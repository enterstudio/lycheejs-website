<!DOCTYPE html>
<html manifest="index.appcache">
<head>
	<meta charset="utf-8">
	<title>/projects/flappy/main</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="manifest" href="./manifest.json">
	<link rel="icon" href="./icon.png" sizes="128x128" type="image/png">

	<script src="./core.js"></script>

	<style>
		body {
			margin: 0;
			padding: 0;
			overflow: hidden;
		}
		
		.lychee-Renderer-canvas {
			display: block;
			margin: 0 auto;
			user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			-webkit-user-select: none;
		}
	</style>

</head>
<body>
<script>
(function(lychee, global) {

	let environment = lychee.deserialize({"constructor":"lychee.Environment","arguments":[{"id":"/projects/flappy/main","build":"game.Main","debug":false,"sandbox":false,"timeout":5000,"type":"build","tags":{"platform":["html"]}}],"blob":{"definitions":{"game.Main":{"constructor":"lychee.Definition","arguments":["game.Main"],"blob":{"attaches":{},"requires":["game.state.Game"],"includes":["lychee.app.Main"],"exports":"function (lychee, global, attachments) {\n\n\tconst _game = lychee.import('game');\n\tconst _Main = lychee.import('lychee.app.Main');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({\n\n\t\t\tclient:  null,\n\t\t\tserver:  null,\n\t\t\tstash:   null,\n\t\t\tstorage: null,\n\n\t\t\tinput: {\n\t\t\t\tdelay:       0,\n\t\t\t\tkey:         false,\n\t\t\t\tkeymodifier: false,\n\t\t\t\tscroll:      false,\n\t\t\t\tswipe:       false,\n\t\t\t\ttouch:       true\n\t\t\t},\n\n\t\t\tjukebox: {\n\t\t\t\tmusic: false,\n\t\t\t\tsound: true\n\t\t\t},\n\n\t\t\trenderer: {\n\t\t\t\twidth:  1024,\n\t\t\t\theight: 512\n\t\t\t},\n\n\t\t\tviewport: {\n\t\t\t\tfullscreen: false\n\t\t\t}\n\n\t\t}, data);\n\n\n\t\t_Main.call(this, settings);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('load', function(oncomplete) {\n\t\t\toncomplete(true);\n\t\t}, this, true);\n\n\t\tthis.bind('init', function() {\n\n\t\t\tthis.setState('game', new _game.state.Game(this));\n\t\t\tthis.changeState('game');\n\n\t\t}, this, true);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Main.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.Main';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Main":{"constructor":"lychee.Definition","arguments":["lychee.app.Main"],"blob":{"attaches":{},"requires":["lychee.Input","lychee.Renderer","lychee.Stash","lychee.Storage","lychee.Viewport","lychee.event.Flow","lychee.app.Jukebox","lychee.app.Loop","lychee.app.State","lychee.net.Client","lychee.net.Server"],"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Client   = lychee.import('lychee.net.Client');\n\tconst _Emitter  = lychee.import('lychee.event.Emitter');\n\tconst _Flow     = lychee.import('lychee.event.Flow');\n\tconst _Input    = lychee.import('lychee.Input');\n\tconst _Jukebox  = lychee.import('lychee.app.Jukebox');\n\tconst _Loop     = lychee.import('lychee.app.Loop');\n\tconst _Renderer = lychee.import('lychee.Renderer');\n\tconst _Server   = lychee.import('lychee.net.Server');\n\tconst _Stash    = lychee.import('lychee.Stash');\n\tconst _State    = lychee.import('lychee.app.State');\n\tconst _Storage  = lychee.import('lychee.Storage');\n\tconst _Viewport = lychee.import('lychee.Viewport');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _API_ORIGIN = (function(location) {\n\n\t\tlet hostname = location.hostname || '';\n\t\tlet origin   = location.origin   || '';\n\t\tlet proto    = origin.split(':')[0];\n\n\t\tif (/app|file|chrome-extension/g.test(proto)) {\n\n\t\t\treturn 'http://harvester.artificial.engineering:4848';\n\n\t\t} else if (hostname === 'localhost') {\n\n\t\t\treturn 'http://localhost:4848';\n\n\t\t} else if (/http|https/g.test(proto)) {\n\n\t\t\treturn 'http://' + hostname + ':4848';\n\n\t\t} else {\n\n\t\t\treturn '';\n\n\t\t}\n\n\t})(global.location || {});\n\n\tconst _load_api = function(url, callback, scope) {\n\n\t\turl = typeof url === 'string' ? url : '/api/server/connect?identifier=boilerplate';\n\n\n\t\tif (/^(http|https):\\/\\//g.test(url) === false) {\n\t\t\turl = _API_ORIGIN + url;\n\t\t}\n\n\n\t\tlet config = new Config(url);\n\n\t\tconfig.onload = function(result) {\n\t\t\tcallback.call(scope, result === true ? this.buffer : null);\n\t\t};\n\n\t\tconfig.load();\n\n\t};\n\n\tconst _initialize = function() {\n\n\t\tlet settings = this.settings;\n\n\t\tif (settings.client !== null) {\n\t\t\tthis.client = new _Client(settings.client);\n\t\t\tthis.client.connect();\n\t\t}\n\n\t\tif (settings.server !== null) {\n\t\t\tthis.server = new _Server(settings.server);\n\t\t\tthis.server.connect();\n\t\t}\n\n\t\tif (settings.input !== null) {\n\t\t\tthis.input = new _Input(settings.input);\n\t\t}\n\n\t\tif (settings.jukebox !== null) {\n\t\t\tthis.jukebox = new _Jukebox(settings.jukebox);\n\t\t}\n\n\t\tif (settings.loop !== null) {\n\n\t\t\tthis.loop = new _Loop(settings.loop);\n\t\t\tthis.loop.bind('render', _on_render, this);\n\t\t\tthis.loop.bind('update', _on_update, this);\n\n\t\t}\n\n\t\tif (settings.renderer !== null) {\n\t\t\tthis.renderer = new _Renderer(settings.renderer);\n\t\t}\n\n\t\tif (settings.stash !== null) {\n\n\t\t\tthis.stash = new _Stash(settings.stash);\n\t\t\tthis.stash.bind('sync', function(data) {\n\n\t\t\t\tlet client = this.client;\n\t\t\t\tif (client !== null) {\n\n\t\t\t\t\tlet service = client.getService('stash');\n\t\t\t\t\tif (service !== null) {\n\t\t\t\t\t\tservice.sync(data);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tlet server = this.server;\n\t\t\t\tif (server !== null) {\n\n\t\t\t\t\tlet service = server.getService('stash');\n\t\t\t\t\tif (service !== null) {\n\t\t\t\t\t\tservice.sync(data);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t}\n\n\t\tif (settings.storage !== null) {\n\n\t\t\tthis.storage = new _Storage(settings.storage);\n\t\t\tthis.storage.bind('sync', function(data) {\n\n\t\t\t\tlet client = this.client;\n\t\t\t\tif (client !== null) {\n\n\t\t\t\t\tlet service = client.getService('storage');\n\t\t\t\t\tif (service !== null) {\n\t\t\t\t\t\tservice.sync(data);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tlet server = this.server;\n\t\t\t\tif (server !== null) {\n\n\t\t\t\t\tlet service = server.getService('storage');\n\t\t\t\t\tif (service !== null) {\n\t\t\t\t\t\tservice.sync(data);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t}\n\n\t\tif (settings.viewport !== null) {\n\n\t\t\tthis.viewport = new _Viewport();\n\t\t\tthis.viewport.bind('reshape', _on_reshape, this);\n\t\t\tthis.viewport.bind('hide',    _on_hide,    this);\n\t\t\tthis.viewport.bind('show',    _on_show,    this);\n\n\t\t\tthis.viewport.setFullscreen(settings.viewport.fullscreen);\n\n\t\t}\n\n\t};\n\n\tconst _on_hide = function() {\n\n\t\tlet loop = this.loop;\n\t\tif (loop !== null) {\n\t\t\tloop.pause();\n\t\t}\n\n\t};\n\n\tconst _on_render = function(clock, delta) {\n\n\t\tif (this.state !== null) {\n\t\t\tthis.state.render(clock, delta);\n\t\t}\n\n\t};\n\n\tconst _on_reshape = function(orientation, rotation, width, height) {\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tlet settings = this.settings;\n\t\t\tif (settings.renderer !== null) {\n\t\t\t\trenderer.setWidth(settings.renderer.width);\n\t\t\t\trenderer.setHeight(settings.renderer.height);\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_show = function() {\n\n\t\tlet loop = this.loop;\n\t\tif (loop !== null) {\n\t\t\tloop.resume();\n\t\t}\n\n\t};\n\n\tconst _on_update = function(clock, delta) {\n\n\t\tif (this.state !== null) {\n\t\t\tthis.state.update(clock, delta);\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * DEFAULT SETTINGS\n\t * and SERIALIZATION CACHE\n\t */\n\n\tlet _DEFAULTS = {\n\n\t\tclient: null,\n\t\tserver: null,\n\n\t\tinput: {\n\t\t\tdelay:       0,\n\t\t\tkey:         true,\n\t\t\tkeymodifier: false,\n\t\t\tscroll:      true,\n\t\t\tswipe:       true,\n\t\t\ttouch:       true\n\t\t},\n\n\t\tjukebox: {\n\t\t\tchannels: 8,\n\t\t\tmusic:    true,\n\t\t\tsound:    true\n\t\t},\n\n\t\tloop: {\n\t\t\trender: 60,\n\t\t\tupdate: 60\n\t\t},\n\n\t\trenderer: {\n\t\t\twidth:      null,\n\t\t\theight:     null,\n\t\t\tid:         'app',\n\t\t\tbackground: '#405050'\n\t\t},\n\n\t\tstash: {\n\t\t\tid:   'app',\n\t\t\ttype: _Stash.TYPE.persistent\n\t\t},\n\n\t\tstorage: {\n\t\t\tid:    'app',\n\t\t\tmodel: {},\n\t\t\ttype:  _Storage.TYPE.persistent\n\t\t},\n\n\t\tviewport: {\n\t\t\tfullscreen: false\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(settings) {\n\n\t\tthis.settings = lychee.assignunlink({}, _DEFAULTS, settings);\n\t\tthis.defaults = lychee.assignunlink({}, this.settings);\n\n\t\tthis.client   = null;\n\t\tthis.server   = null;\n\n\t\tthis.input    = null;\n\t\tthis.jukebox  = null;\n\t\tthis.loop     = null;\n\t\tthis.renderer = null;\n\t\tthis.stash    = null;\n\t\tthis.storage  = null;\n\t\tthis.viewport = null;\n\n\t\tthis.state    = null;\n\t\tthis.__states = {};\n\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.client instanceof Object)   this.client   = lychee.deserialize(blob.client);\n\t\t\tif (blob.server instanceof Object)   this.server   = lychee.deserialize(blob.server);\n\n\t\t\tif (blob.input instanceof Object)    this.input    = lychee.deserialize(blob.input);\n\t\t\tif (blob.jukebox instanceof Object)  this.jukebox  = lychee.deserialize(blob.jukebox);\n\t\t\tif (blob.loop instanceof Object)     this.loop     = lychee.deserialize(blob.loop);\n\t\t\tif (blob.renderer instanceof Object) this.renderer = lychee.deserialize(blob.renderer);\n\t\t\tif (blob.stash instanceof Object)    this.stash    = lychee.deserialize(blob.stash);\n\t\t\tif (blob.storage instanceof Object)  this.storage  = lychee.deserialize(blob.storage);\n\t\t\tif (blob.viewport instanceof Object) this.viewport = lychee.deserialize(blob.viewport);\n\n\n\t\t\tif (blob.states instanceof Object) {\n\n\t\t\t\tfor (let id in blob.states) {\n\n\t\t\t\t\tlet stateblob = blob.states[id];\n\n\t\t\t\t\tfor (let a = 0, al = stateblob.arguments.length; a < al; a++) {\n\t\t\t\t\t\tif (stateblob.arguments[a] === '#MAIN') {\n\t\t\t\t\t\t\tstateblob.arguments[a] = this;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState(id, lychee.deserialize(stateblob));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Main';\n\n\t\t\tlet settings = lychee.assignunlink({}, this.settings);\n\t\t\tlet blob     = data['blob'] || {};\n\n\n\t\t\tif (this.client !== null)   blob.client   = lychee.serialize(this.client);\n\t\t\tif (this.server !== null)   blob.server   = lychee.serialize(this.server);\n\n\t\t\tif (this.input !== null)    blob.input    = lychee.serialize(this.input);\n\t\t\tif (this.jukebox !== null)  blob.jukebox  = lychee.serialize(this.jukebox);\n\t\t\tif (this.loop !== null)     blob.loop     = lychee.serialize(this.loop);\n\t\t\tif (this.renderer !== null) blob.renderer = lychee.serialize(this.renderer);\n\t\t\tif (this.stash !== null)    blob.stash    = lychee.serialize(this.stash);\n\t\t\tif (this.storage !== null)  blob.storage  = lychee.serialize(this.storage);\n\t\t\tif (this.viewport !== null) blob.viewport = lychee.serialize(this.viewport);\n\n\n\t\t\tif (Object.keys(this.__states).length > 0) {\n\n\t\t\t\tblob.states = {};\n\n\t\t\t\tfor (let id in this.__states) {\n\t\t\t\t\tblob.states[id] = lychee.serialize(this.__states[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * MAIN API\n\t\t */\n\n\t\tinit: function() {\n\n\t\t\tlet flow       = new _Flow();\n\t\t\tlet client_api = this.settings.client;\n\t\t\tlet server_api = this.settings.server;\n\n\n\t\t\tflow.then('load-api');\n\t\t\tflow.then('load');\n\t\t\tflow.then('init');\n\n\n\t\t\tflow.bind('load-api', function(oncomplete) {\n\n\t\t\t\tlet c = typeof client_api === 'string';\n\t\t\t\tlet s = typeof server_api === 'string';\n\n\n\t\t\t\tif (c === true && s === true) {\n\n\t\t\t\t\t_load_api(client_api, function(settings) {\n\n\t\t\t\t\t\tthis.settings.client = Object.assign({}, settings);\n\n\t\t\t\t\t\t_load_api(server_api, function(settings) {\n\t\t\t\t\t\t\tthis.settings.server = Object.assign({}, settings);\n\t\t\t\t\t\t\toncomplete(true);\n\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t}, this);\n\n\t\t\t\t} else if (c === true) {\n\n\t\t\t\t\t_load_api(client_api, function(settings) {\n\t\t\t\t\t\tthis.settings.client = Object.assign({}, settings);\n\t\t\t\t\t\toncomplete(true);\n\t\t\t\t\t}, this);\n\n\t\t\t\t} else if (s === true) {\n\n\t\t\t\t\t_load_api(server_api, function(settings) {\n\t\t\t\t\t\tthis.settings.server = Object.assign({}, settings);\n\t\t\t\t\t\toncomplete(true);\n\t\t\t\t\t}, this);\n\n\t\t\t\t} else {\n\n\t\t\t\t\toncomplete(true);\n\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t\tflow.bind('load', function(oncomplete) {\n\n\t\t\t\tlet result = this.trigger('load', [ oncomplete ]);\n\t\t\t\tif (result === false) {\n\t\t\t\t\toncomplete(true);\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t\tflow.bind('init', function(oncomplete) {\n\n\t\t\t\t_initialize.call(this);\n\t\t\t\toncomplete(true);\n\n\t\t\t}, this);\n\n\t\t\tflow.bind('complete', function() {\n\t\t\t\tthis.trigger('init');\n\t\t\t}, this);\n\n\t\t\tflow.bind('error', function() {\n\t\t\t\t_initialize.call(this);\n\t\t\t}, this);\n\n\t\t\tflow.init();\n\n\t\t},\n\n\t\tdestroy: function() {\n\n\t\t\tif (this.client !== null) {\n\t\t\t\tthis.client.disconnect();\n\t\t\t\tthis.client = null;\n\t\t\t}\n\n\t\t\tif (this.server !== null) {\n\t\t\t\tthis.server.disconnect();\n\t\t\t\tthis.server = null;\n\t\t\t}\n\n\t\t\tif (this.input !== null) {\n\t\t\t\tthis.input.destroy();\n\t\t\t\tthis.input = null;\n\t\t\t}\n\n\t\t\tif (this.jukebox !== null) {\n\t\t\t\tthis.jukebox = null;\n\t\t\t}\n\n\t\t\tif (this.loop !== null) {\n\t\t\t\tthis.loop.destroy();\n\t\t\t\tthis.loop = null;\n\t\t\t}\n\n\t\t\tif (this.renderer !== null) {\n\t\t\t\tthis.renderer.destroy();\n\t\t\t\tthis.renderer = null;\n\t\t\t}\n\n\t\t\tif (this.stash !== null) {\n\t\t\t\tthis.stash = null;\n\t\t\t}\n\n\t\t\tif (this.storage !== null) {\n\t\t\t\tthis.storage = null;\n\t\t\t}\n\n\t\t\tif (this.viewport !== null) {\n\t\t\t\tthis.viewport.destroy();\n\t\t\t\tthis.viewport = null;\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetState: function(id, state) {\n\n\t\t\tid    = typeof id === 'string'            ? id    : null;\n\t\t\tstate = lychee.interfaceof(_State, state) ? state : null;\n\n\n\t\t\tif (id !== null && state !== null) {\n\n\t\t\t\tthis.__states[id] = state;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__states[id] !== undefined) {\n\t\t\t\treturn this.__states[id];\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremoveState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__states[id] !== undefined) {\n\n\t\t\t\tif (this.state === this.__states[id]) {\n\t\t\t\t\tthis.changeState(null);\n\t\t\t\t}\n\n\t\t\t\tdelete this.__states[id];\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tchangeState: function(id, data) {\n\n\t\t\tid   = typeof id === 'string' ? id   : null;\n\t\t\tdata = data !== undefined     ? data : null;\n\n\n\t\t\tlet that     = this;\n\t\t\tlet oldstate = this.state;\n\t\t\tlet newstate = this.__states[id] || null;\n\n\n\t\t\tif (newstate !== null) {\n\n\t\t\t\tif (oldstate !== null) {\n\n\t\t\t\t\toldstate.leave(function(result) {\n\t\t\t\t\t\tnewstate.enter(function(result) {\n\t\t\t\t\t\t\tthat.state = newstate;\n\t\t\t\t\t\t}, data);\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewstate.enter(function(result) {\n\t\t\t\t\t\tthat.state = newstate;\n\t\t\t\t\t}, data);\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (oldstate !== null) {\n\n\t\t\t\t\toldstate.leave(function(result) {\n\t\t\t\t\t\tthat.state = null;\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\n\t\t\t\tif (id === null) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.event.Emitter":{"constructor":"lychee.Definition","arguments":["lychee.event.Emitter"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _bind = function(event, callback, scope, once) {\n\n\t\tif (event === null || callback === null) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet pass_event = false;\n\t\tlet pass_self  = false;\n\n\t\tlet modifier = event.charAt(0);\n\t\tif (modifier === '@') {\n\n\t\t\tevent      = event.substr(1, event.length - 1);\n\t\t\tpass_event = true;\n\n\t\t} else if (modifier === '#') {\n\n\t\t\tevent     = event.substr(1, event.length - 1);\n\t\t\tpass_self = true;\n\n\t\t}\n\n\n\t\tif (this.___events[event] === undefined) {\n\t\t\tthis.___events[event] = [];\n\t\t}\n\n\n\t\tthis.___events[event].push({\n\t\t\tpass_event: pass_event,\n\t\t\tpass_self:  pass_self,\n\t\t\tcallback:   callback,\n\t\t\tscope:      scope,\n\t\t\tonce:       once\n\t\t});\n\n\n\t\treturn true;\n\n\t};\n\n\tconst _relay = function(event, instance, once) {\n\n\t\tif (event === null || instance === null) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet callback = function() {\n\n\t\t\tlet event = arguments[0];\n\t\t\tlet data  = [];\n\n\t\t\tfor (let a = 1, al = arguments.length; a < al; a++) {\n\t\t\t\tdata.push(arguments[a]);\n\t\t\t}\n\n\t\t\tthis.trigger(event, data);\n\n\t\t};\n\n\n\t\tif (this.___events[event] === undefined) {\n\t\t\tthis.___events[event] = [];\n\t\t}\n\n\n\t\tthis.___events[event].push({\n\t\t\tpass_event: true,\n\t\t\tpass_self:  false,\n\t\t\tcallback:   callback,\n\t\t\tscope:      instance,\n\t\t\tonce:       once\n\t\t});\n\n\n\t\treturn true;\n\n\t};\n\n\tconst _trigger = function(event, data) {\n\n\t\tif (this.___events !== undefined && this.___events[event] !== undefined) {\n\n\t\t\tlet value = undefined;\n\n\t\t\tfor (let e = 0; e < this.___events[event].length; e++) {\n\n\t\t\t\tlet args  = [];\n\t\t\t\tlet entry = this.___events[event][e];\n\n\t\t\t\tif (entry.pass_event === true) {\n\n\t\t\t\t\targs.push(event);\n\n\t\t\t\t} else if (entry.pass_self === true) {\n\n\t\t\t\t\targs.push(this);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (data !== null) {\n\t\t\t\t\targs.push.apply(args, data);\n\t\t\t\t}\n\n\n\t\t\t\tlet result = entry.callback.apply(entry.scope, args);\n\t\t\t\tif (result !== undefined) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\n\n\t\t\t\tif (entry.once === true) {\n\n\t\t\t\t\tif (this.unbind(event, entry.callback, entry.scope) === true) {\n\t\t\t\t\t\te--;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (value !== undefined) {\n\t\t\t\treturn value;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _unbind = function(event, callback, scope) {\n\n\t\tlet found = false;\n\n\t\tif (event !== null) {\n\n\t\t\tfound = _unbind_event.call(this, event, callback, scope);\n\n\t\t} else {\n\n\t\t\tfor (event in this.___events) {\n\n\t\t\t\tlet result = _unbind_event.call(this, event, callback, scope);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn found;\n\n\t};\n\n\tconst _unbind_event = function(event, callback, scope) {\n\n\t\tif (this.___events !== undefined && this.___events[event] !== undefined) {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let e = 0, el = this.___events[event].length; e < el; e++) {\n\n\t\t\t\tlet entry = this.___events[event][e];\n\n\t\t\t\tif ((callback === null || entry.callback === callback) && (scope === null || entry.scope === scope)) {\n\n\t\t\t\t\tfound = true;\n\n\t\t\t\t\tthis.___events[event].splice(e, 1);\n\t\t\t\t\tel--;\n\t\t\t\t\te--;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function() {\n\n\t\tthis.___events   = {};\n\t\tthis.___timeline = {\n\t\t\tbind:    [],\n\t\t\ttrigger: [],\n\t\t\trelay:   [],\n\t\t\tunbind:  []\n\t\t};\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.events instanceof Object) {\n\t\t\t\t// TODO: deserialize events\n\t\t\t}\n\n\t\t\tif (blob.timeline instanceof Object) {\n\t\t\t\t// TODO: deserialize timeline\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet blob = {};\n\n\n\t\t\tif (Object.keys(this.___events).length > 0) {\n\n\t\t\t\tblob.events = {};\n\n\t\t\t\tfor (let event in this.___events) {\n\n\t\t\t\t\tblob.events[event] = [];\n\n\t\t\t\t\tfor (let e = 0, el = this.___events[event].length; e < el; e++) {\n\n\t\t\t\t\t\tlet entry = this.___events[event][e];\n\n\t\t\t\t\t\tblob.events[event].push({\n\t\t\t\t\t\t\tpass_event: entry.pass_event,\n\t\t\t\t\t\t\tpass_self:  entry.pass_self,\n\t\t\t\t\t\t\tcallback:   lychee.serialize(entry.callback),\n\t\t\t\t\t\t\t// scope:      lychee.serialize(entry.scope),\n\t\t\t\t\t\t\tscope:      null,\n\t\t\t\t\t\t\tonce:       entry.once\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.___timeline.bind.length > 0 || this.___timeline.trigger.length > 0 || this.___timeline.unbind.length > 0) {\n\n\t\t\t\tblob.timeline = {};\n\n\n\t\t\t\tif (this.___timeline.bind.length > 0) {\n\n\t\t\t\t\tblob.timeline.bind = [];\n\n\t\t\t\t\tfor (let b = 0, bl = this.___timeline.bind.length; b < bl; b++) {\n\t\t\t\t\t\tblob.timeline.bind.push(this.___timeline.bind[b]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (this.___timeline.trigger.length > 0) {\n\n\t\t\t\t\tblob.timeline.trigger = [];\n\n\t\t\t\t\tfor (let t = 0, tl = this.___timeline.trigger.length; t < tl; t++) {\n\t\t\t\t\t\tblob.timeline.trigger.push(this.___timeline.trigger[t]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (this.___timeline.unbind.length > 0) {\n\n\t\t\t\t\tblob.timeline.unbind = [];\n\n\t\t\t\t\tfor (let u = 0, ul = this.___timeline.unbind.length; u < ul; u++) {\n\t\t\t\t\t\tblob.timeline.unbind.push(this.___timeline.unbind[u]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.event.Emitter',\n\t\t\t\t'arguments':   [],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tbind: function(event, callback, scope, once) {\n\n\t\t\tevent    = typeof event === 'string'    ? event    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : this;\n\t\t\tonce     = once === true;\n\n\n\t\t\tlet result = _bind.call(this, event, callback, scope, once);\n\t\t\tif (result === true && lychee.debug === true) {\n\n\t\t\t\tthis.___timeline.bind.push({\n\t\t\t\t\ttime:     Date.now(),\n\t\t\t\t\tevent:    event,\n\t\t\t\t\tcallback: lychee.serialize(callback),\n\t\t\t\t\t// scope:    lychee.serialize(scope),\n\t\t\t\t\tscope:    null,\n\t\t\t\t\tonce:     once\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\trelay: function(event, instance, once) {\n\n\t\t\tevent    = typeof event === 'string'               ? event    : null;\n\t\t\tinstance = lychee.interfaceof(Composite, instance) ? instance : null;\n\t\t\tonce     = once === true;\n\n\n\t\t\tlet result = _relay.call(this, event, instance, once);\n\t\t\tif (result === true && lychee.debug === true) {\n\n\t\t\t\tthis.___timeline.relay.push({\n\t\t\t\t\ttime:     Date.now(),\n\t\t\t\t\tevent:    event,\n\t\t\t\t\tinstance: lychee.serialize(instance),\n\t\t\t\t\tonce:     once\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\ttrigger: function(event, data) {\n\n\t\t\tevent = typeof event === 'string' ? event : null;\n\t\t\tdata  = data instanceof Array     ? data  : null;\n\n\n\t\t\tlet result = _trigger.call(this, event, data);\n\t\t\tif (result === true && lychee.debug === true) {\n\n\t\t\t\tthis.___timeline.trigger.push({\n\t\t\t\t\ttime:  Date.now(),\n\t\t\t\t\tevent: event,\n\t\t\t\t\tdata:  lychee.serialize(data)\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tunbind: function(event, callback, scope) {\n\n\t\t\tevent    = typeof event === 'string'    ? event    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : null;\n\n\n\t\t\tlet result = _unbind.call(this, event, callback, scope);\n\t\t\tif (result === true) {\n\n\t\t\t\tthis.___timeline.unbind.push({\n\t\t\t\t\ttime:     Date.now(),\n\t\t\t\t\tevent:    event,\n\t\t\t\t\tcallback: lychee.serialize(callback),\n\t\t\t\t\t// scope:    lychee.serialize(scope)\n\t\t\t\t\tscope:    null\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.event.Flow":{"constructor":"lychee.Definition","arguments":["lychee.event.Flow"],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _process_recursive = function(event, result) {\n\n\t\tif (result === true) {\n\n\t\t\tif (this.___timeout === null) {\n\n\t\t\t\tthis.___timeout = setTimeout(function() {\n\n\t\t\t\t\tthis.___timeout = null;\n\t\t\t\t\t_process_stack.call(this);\n\n\t\t\t\t}.bind(this), 0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.trigger('error', [ event ]);\n\n\t\t}\n\n\t};\n\n\tconst _process_stack = function() {\n\n\t\tlet entry = this.___stack.shift() || null;\n\t\tif (entry !== null) {\n\n\t\t\tlet data  = entry.data;\n\t\t\tlet event = entry.event;\n\t\t\tlet args  = [ event, [] ];\n\n\t\t\tif (data !== null) {\n\t\t\t\targs[1].push.apply(args[1], data);\n\t\t\t}\n\n\t\t\targs[1].push(_process_recursive.bind(this, event));\n\n\n\t\t\tlet result = this.trigger.apply(this, args);\n\t\t\tif (result === false) {\n\t\t\t\tthis.trigger('error', [ event ]);\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.trigger('complete');\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function() {\n\n\t\tthis.___init    = false;\n\t\tthis.___stack   = [];\n\t\tthis.___timeout = null;\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.event.Flow';\n\n\t\t\tlet blob = (data['blob'] || {});\n\n\n\t\t\tif (this.___stack.length > 0) {\n\n\t\t\t\tblob.stack = [];\n\n\t\t\t\tfor (let s = 0, sl = this.___stack.length; s < sl; s++) {\n\n\t\t\t\t\tlet entry = this.___stack[s];\n\n\t\t\t\t\tblob.stack.push({\n\t\t\t\t\t\tevent: entry.event,\n\t\t\t\t\t\tdata:  lychee.serialize(entry.data)\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tthen: function(event, data) {\n\n\t\t\tevent = typeof event === 'string' ? event : null;\n\t\t\tdata  = data instanceof Array     ? data  : null;\n\n\n\t\t\tif (event !== null) {\n\n\t\t\t\tthis.___stack.push({\n\t\t\t\t\tevent: event,\n\t\t\t\t\tdata:  data\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tinit: function() {\n\n\t\t\tif (this.___init === false) {\n\n\t\t\t\tthis.___init = true;\n\n\n\t\t\t\tif (this.___stack.length > 0) {\n\n\t\t\t\t\t_process_stack.call(this);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Input":{"constructor":"lychee.Definition","arguments":["lychee.Input"],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\tif (typeof global.addEventListener === 'function') {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _INSTANCES = [];\n\n\n\n\t/*\n\t * EVENTS\n\t */\n\n\tlet _mouseactive = false;\n\tlet _wheelactive = Date.now();\n\n\tconst _listeners = {\n\n\t\tkeydown: function(event) {\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\thandled = _process_key.call(_INSTANCES[i], event.keyCode, event.ctrlKey, event.altKey, event.shiftKey) || handled;\n\t\t\t}\n\n\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\ttouchstart: function(event) {\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tif (event.touches && event.touches.length) {\n\n\t\t\t\t\tfor (let t = 0, tl = event.touches.length; t < tl; t++) {\n\t\t\t\t\t\thandled = _process_touch.call(_INSTANCES[i], t, event.touches[t].pageX, event.touches[t].pageY) || handled;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\thandled = _process_touch.call(_INSTANCES[i], 0, event.pageX, event.pageY) || handled;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Prevent scrolling and swiping behaviour\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\ttouchmove: function(event) {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tif (event.touches && event.touches.length) {\n\n\t\t\t\t\tfor (let t = 0, tl = event.touches.length; t < tl; t++) {\n\t\t\t\t\t\t_process_swipe.call(_INSTANCES[i], t, 'move', event.touches[t].pageX, event.touches[t].pageY);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t_process_swipe.call(_INSTANCES[i], 0, 'move', event.pageX, event.pageY);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\ttouchend: function(event) {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tif (event.touches && event.touches.length) {\n\n\t\t\t\t\tfor (let t = 0, tl = event.touches.length; t < tl; t++) {\n\t\t\t\t\t\t_process_swipe.call(_INSTANCES[i], t, 'end', event.touches[t].pageX, event.touches[t].pageY);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t_process_swipe.call(_INSTANCES[i], 0, 'end', event.pageX, event.pageY);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tmousestart: function(event) {\n\n\t\t\t_mouseactive = true;\n\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\thandled = _process_touch.call(_INSTANCES[i], 0, event.pageX, event.pageY) || handled;\n\t\t\t}\n\n\n\t\t\t// Prevent drag of canvas as image\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\tmousemove: function(event) {\n\n\t\t\tif (_mouseactive === false) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\tlet handled = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\thandled = _process_swipe.call(_INSTANCES[i], 0, 'move', event.pageX, event.pageY) || handled;\n\t\t\t}\n\n\n\t\t\t// Prevent selection of canvas as content\n\t\t\tif (handled === true) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t},\n\n\t\tmouseend: function(event) {\n\n\t\t\tif (_mouseactive === false) return;\n\n\t\t\t_mouseactive = false;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_swipe.call(_INSTANCES[i], 0, 'end', event.pageX, event.pageY);\n\t\t\t}\n\n\t\t},\n\n\t\tmousewheel: function(event) {\n\n\t\t\tlet time = Date.now();\n\t\t\tif (time < _wheelactive + 100) {\n\t\t\t\t_wheelactive = time;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_wheelactive = time;\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_scroll.call(_INSTANCES[i], 0, event.pageX, event.pageY, event.wheelDeltaX, event.wheelDeltaY);\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function() {\n\n\t\tlet keyboard = 'onkeydown' in global;\n\t\tlet touch    = 'ontouchstart' in global;\n\t\tlet mouse    = 'onmousedown' in global;\n\n\n\t\tif (typeof global.addEventListener === 'function') {\n\n\t\t\tif (keyboard) {\n\t\t\t\tglobal.addEventListener('keydown',    _listeners.keydown,    true);\n\t\t\t}\n\n\t\t\tif (touch) {\n\n\t\t\t\tglobal.addEventListener('touchstart', _listeners.touchstart, true);\n\t\t\t\tglobal.addEventListener('touchmove',  _listeners.touchmove,  true);\n\t\t\t\tglobal.addEventListener('touchend',   _listeners.touchend,   true);\n\n\t\t\t} else if (mouse) {\n\n\t\t\t\tglobal.addEventListener('mousedown',  _listeners.mousestart, true);\n\t\t\t\tglobal.addEventListener('mousemove',  _listeners.mousemove,  true);\n\t\t\t\tglobal.addEventListener('mouseup',    _listeners.mouseend,   true);\n\t\t\t\tglobal.addEventListener('mouseout',   _listeners.mouseend,   true);\n\t\t\t\tglobal.addEventListener('mousewheel', _listeners.mousewheel, true);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (keyboard) methods.push('Keyboard');\n\t\t\tif (touch)    methods.push('Touch');\n\t\t\tif (mouse)    methods.push('Mouse');\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Input: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Input: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _KEYMAP = {\n\n\t\t 8:  'backspace',\n\t\t 9:  'tab',\n\t\t13:  'enter',\n\t\t16:  'shift',\n\t\t17:  'ctrl',\n\t\t18:  'alt',\n\t\t19:  'pause',\n//\t\t20:  'capslock',\n\n\t\t27:  'escape',\n\t\t32:  'space',\n\t\t33:  'page-up',\n\t\t34:  'page-down',\n\t\t35:  'end',\n\t\t36:  'home',\n\n\t\t37:  'arrow-left',\n\t\t38:  'arrow-up',\n\t\t39:  'arrow-right',\n\t\t40:  'arrow-down',\n\n\t\t45:  'insert',\n\t\t46:  'delete',\n\n\t\t65:  'a',\n\t\t66:  'b',\n\t\t67:  'c',\n\t\t68:  'd',\n\t\t69:  'e',\n\t\t70:  'f',\n\t\t71:  'g',\n\t\t72:  'h',\n\t\t73:  'i',\n\t\t74:  'j',\n\t\t75:  'k',\n\t\t76:  'l',\n\t\t77:  'm',\n\t\t78:  'n',\n\t\t79:  'o',\n\t\t80:  'p',\n\t\t81:  'q',\n\t\t82:  'r',\n\t\t83:  's',\n\t\t84:  't',\n\t\t85:  'u',\n\t\t86:  'v',\n\t\t87:  'w',\n\t\t88:  'x',\n\t\t89:  'y',\n\t\t90:  'z',\n\n\t\t96:  '0',\n\t\t97:  '1',\n\t\t98:  '2',\n\t\t99:  '3',\n\t\t100: '4',\n\t\t101: '5',\n\t\t102: '6',\n\t\t103: '7',\n\t\t104: '8',\n\t\t105: '9',\n\t\t106: '*',\n\t\t107: '+',\n\t\t109: '-',\n\t\t110: '.',\n\t\t111: '/',\n\n\t\t112: 'f1',\n\t\t113: 'f2',\n\t\t114: 'f3',\n\t\t115: 'f4',\n\t\t116: 'f5',\n\t\t117: 'f6',\n\t\t118: 'f7',\n\t\t119: 'f8',\n\t\t120: 'f9',\n\t\t121: 'f10',\n\t\t122: 'f11',\n\t\t123: 'f12'\n\n\t};\n\n\tconst _SPECIALMAP = {\n\n\t\t48:  [ '0', ')' ],\n\t\t49:  [ '1', '!' ],\n\t\t50:  [ '2', '@' ],\n\t\t51:  [ '3', '#' ],\n\t\t52:  [ '4', '$' ],\n\t\t53:  [ '5', '%' ],\n\t\t54:  [ '6', '^' ],\n\t\t55:  [ '7', '&' ],\n\t\t56:  [ '8', '*' ],\n\t\t57:  [ '9', '(' ],\n\n\t\t186: [ ';', ':' ],\n\t\t187: [ '=', '+' ],\n\t\t188: [ ',', '<' ],\n\t\t189: [ '-', '_' ],\n\t\t190: [ '.', '>' ],\n\t\t191: [ '/', '?' ],\n\t\t192: [ '`', '~' ],\n\n\t\t219: [ '[',  '{' ],\n\t\t220: [ '\\\\', '|' ],\n\t\t221: [ ']',  '}' ],\n\t\t222: [ '\\'', '\"' ]\n\n\t};\n\n\tconst _process_key = function(code, ctrl, alt, shift) {\n\n\t\tif (this.key === false) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tctrl  =  ctrl === true;\n\t\talt   =   alt === true;\n\t\tshift = shift === true;\n\n\n\t\tif (_KEYMAP[code] === undefined && _SPECIALMAP[code] === undefined) {\n\n\t\t\treturn false;\n\n\t\t} else if (this.keymodifier === false) {\n\n\t\t\tif (code === 16 && shift === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (code === 17 && ctrl === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (code === 18 && alt === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet key     = null;\n\t\tlet name    = null;\n\t\tlet tmp     = null;\n\t\tlet handled = false;\n\t\tlet delta   = Date.now() - this.__clock.key;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.key = Date.now();\n\t\t}\n\n\n\t\t// 0. Computation of Special Characters\n\t\tif (_SPECIALMAP[code] !== undefined) {\n\n\t\t\ttmp  = _SPECIALMAP[code];\n\t\t\tkey  = shift === true ? tmp[1] : tmp[0];\n\t\t\tname = '';\n\n\t\t\tif (ctrl  === true) name += 'ctrl-';\n\t\t\tif (alt   === true) name += 'alt-';\n\t\t\tif (shift === true) name += 'shift-';\n\n\t\t\tname += tmp[0];\n\n\t\t// 0. Computation of Normal Characters\n\t\t} else if (_KEYMAP[code] !== undefined) {\n\n\t\t\tkey  = _KEYMAP[code];\n\t\t\tname = '';\n\n\t\t\tif (ctrl  === true && key !== 'ctrl')  name += 'ctrl-';\n\t\t\tif (alt   === true && key !== 'alt')   name += 'alt-';\n\t\t\tif (shift === true && key !== 'shift') name += 'shift-';\n\n\n\t\t\tif (shift === true && key !== 'ctrl' && key !== 'alt' && key !== 'shift') {\n\n\t\t\t\ttmp = String.fromCharCode(code);\n\t\t\t\tkey = tmp.trim() !== '' ? tmp : key;\n\n\t\t\t}\n\n\n\t\t\tname += key.toLowerCase();\n\n\t\t}\n\n\n\t\t// 1. Event API\n\t\tif (key !== null) {\n\n\t\t\t// bind('key') and bind('ctrl-a');\n\t\t\t// bind('!')   and bind('shift-1');\n\n\t\t\thandled = this.trigger('key', [ key, name, delta ]) || handled;\n\t\t\thandled = this.trigger(name,  [ delta ])            || handled;\n\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\tconst _process_scroll = function(id, x, y, dx, dy) {\n\n\t\tif (this.scroll === false) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet direction = null;\n\t\tlet position  = { x: x, y: y };\n\t\tlet handled   = false;\n\t\tlet delta     = Date.now() - this.__clock.scroll;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.scroll = Date.now();\n\t\t}\n\n\n\t\t// 0. Computation\n\t\tif (Math.abs(dx) > Math.abs(dy)) {\n\t\t\tdirection = dx < 0 ? 'right' : 'left';\n\t\t} else {\n\t\t\tdirection = dy < 0 ? 'down'  : 'up';\n\t\t}\n\n\n\t\t// 1. Event API\n\t\tif (direction !== null) {\n\n\t\t\thandled = this.trigger('scroll', [ id, direction, position, delta ]) || handled;\n\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\tlet _process_swipe = function(id, state, x, y) {\n\n\t\tif (this.swipe === false) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tlet position = { x: x, y: y };\n\t\tlet swipe    = { x: 0, y: 0 };\n\t\tlet handled  = false;\n\t\tlet delta    = Date.now() - this.__clock.swipe;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.swipe = Date.now();\n\t\t}\n\n\n\t\t// 0. Computation of Swipe\n\t\tif (this.__swipes[id] !== null) {\n\n\t\t\t// FIX for touchend events\n\t\t\tif (state === 'end' && x === 0 && y === 0) {\n\t\t\t\tposition.x = this.__swipes[id].x;\n\t\t\t\tposition.y = this.__swipes[id].y;\n\t\t\t}\n\n\t\t\tswipe.x = x - this.__swipes[id].x;\n\t\t\tswipe.y = y - this.__swipes[id].y;\n\n\t\t}\n\n\n\t\t// 1. Event API\n\t\tif (state === 'start') {\n\n\t\t\thandled = this.trigger(\n\t\t\t\t'swipe',\n\t\t\t\t[ id, 'start', position, delta, swipe ]\n\t\t\t) || handled;\n\n\t\t\tthis.__swipes[id] = {\n\t\t\t\tx: x, y: y\n\t\t\t};\n\n\t\t} else if (state === 'move') {\n\n\t\t\thandled = this.trigger(\n\t\t\t\t'swipe',\n\t\t\t\t[ id, 'move', position, delta, swipe ]\n\t\t\t) || handled;\n\n\t\t} else if (state === 'end') {\n\n\t\t\thandled = this.trigger(\n\t\t\t\t'swipe',\n\t\t\t\t[ id, 'end', position, delta, swipe ]\n\t\t\t) || handled;\n\n\t\t\tthis.__swipes[id] = null;\n\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\tconst _process_touch = function(id, x, y) {\n\n\t\tif (this.touch === false && this.swipe === true) {\n\n\t\t\tif (this.__swipes[id] === null) {\n\t\t\t\t_process_swipe.call(this, id, 'start', x, y);\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else if (this.touch === false) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\n\t\tlet position = { x: x, y: y };\n\t\tlet handled  = false;\n\t\tlet delta    = Date.now() - this.__clock.touch;\n\n\t\tif (delta < this.delay) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.__clock.touch = Date.now();\n\t\t}\n\n\n\t\t// 1. Event API\n\t\thandled = this.trigger('touch', [ id, position, delta ]) || handled;\n\n\n\t\t// 1. Event API: Swipe only for tracked Touches\n\t\tif (this.__swipes[id] === null) {\n\t\t\thandled = _process_swipe.call(this, id, 'start', x, y) || handled;\n\t\t}\n\n\n\t\treturn handled;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.delay       = 0;\n\t\tthis.key         = false;\n\t\tthis.keymodifier = false;\n\t\tthis.touch       = false;\n\t\tthis.scroll      = false;\n\t\tthis.swipe       = false;\n\n\t\tthis.__clock   = {\n\t\t\tkey:    Date.now(),\n\t\t\tscroll: Date.now(),\n\t\t\tswipe:  Date.now(),\n\t\t\ttouch:  Date.now()\n\t\t};\n\t\tthis.__swipes  = {\n\t\t\t0: null, 1: null,\n\t\t\t2: null, 3: null,\n\t\t\t4: null, 5: null,\n\t\t\t6: null, 7: null,\n\t\t\t8: null, 9: null\n\t\t};\n\n\n\t\tthis.setDelay(settings.delay);\n\t\tthis.setKey(settings.key);\n\t\tthis.setKeyModifier(settings.keymodifier);\n\t\tthis.setScroll(settings.scroll);\n\t\tthis.setSwipe(settings.swipe);\n\t\tthis.setTouch(settings.touch);\n\n\n\t\t_Emitter.call(this);\n\n\t\t_INSTANCES.push(this);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let i = 0, il = _INSTANCES.length; i < il; i++) {\n\n\t\t\t\tif (_INSTANCES[i] === this) {\n\t\t\t\t\t_INSTANCES.splice(i, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t\til--;\n\t\t\t\t\ti--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.unbind();\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Input';\n\n\t\t\tlet settings = {};\n\n\n\t\t\tif (this.delay !== 0)           settings.delay       = this.delay;\n\t\t\tif (this.key !== false)         settings.key         = this.key;\n\t\t\tif (this.keymodifier !== false) settings.keymodifier = this.keymodifier;\n\t\t\tif (this.touch !== false)       settings.touch       = this.touch;\n\t\t\tif (this.swipe !== false)       settings.swipe       = this.swipe;\n\n\n\t\t\tdata['arguments'][0] = settings;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetDelay: function(delay) {\n\n\t\t\tdelay = typeof delay === 'number' ? delay : null;\n\n\n\t\t\tif (delay !== null) {\n\n\t\t\t\tthis.delay = delay;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetKey: function(key) {\n\n\t\t\tif (key === true || key === false) {\n\n\t\t\t\tthis.key = key;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetKeyModifier: function(keymodifier) {\n\n\t\t\tif (keymodifier === true || keymodifier === false) {\n\n\t\t\t\tthis.keymodifier = keymodifier;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetTouch: function(touch) {\n\n\t\t\tif (touch === true || touch === false) {\n\n\t\t\t\tthis.touch = touch;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetScroll: function(scroll) {\n\n\t\t\tif (scroll === true || scroll === false) {\n\n\t\t\t\tthis.scroll = scroll;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetSwipe: function(swipe) {\n\n\t\t\tif (swipe === true || swipe === false) {\n\n\t\t\t\tthis.swipe = swipe;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Renderer":{"constructor":"lychee.Definition","arguments":["lychee.Renderer"],"blob":{"attaches":{},"tags":{"platform":"html"},"supports":"function (lychee, global) {\n\n\t/*\n\t * XXX: typeof CanvasRenderingContext2D is:\n\t * > function in Chrome, Firefox, IE10\n\t * > object in Safari, Safari Mobile\n\t */\n\n\n\tif (\n\t\ttypeof global.document !== 'undefined'\n\t\t&& typeof global.document.createElement === 'function'\n\t\t&& typeof global.CanvasRenderingContext2D !== 'undefined'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tconst _PI2  = Math.PI * 2;\n\tlet   _id   = 0;\n\tlet   _body = null;\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function(global) {\n\n\t\tif (typeof global.document !== 'undefined') {\n\n\t\t\tif (typeof global.document.body !== 'undefined') {\n\t\t\t\t_body = global.document.body;\n\t\t\t}\n\n\t\t}\n\n\t})(global);\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _Buffer = function(width, height) {\n\n\t\tthis.width  = typeof width === 'number'  ? width  : 1;\n\t\tthis.height = typeof height === 'number' ? height : 1;\n\n\t\tthis.__buffer = global.document.createElement('canvas');\n\t\tthis.__ctx    = this.__buffer.getContext('2d');\n\n\n\t\tthis.resize(this.width, this.height);\n\n\t};\n\n\t_Buffer.prototype = {\n\n\t\tclear: function() {\n\n\t\t\tthis.__ctx.clearRect(0, 0, this.width, this.height);\n\n\t\t},\n\n\t\tresize: function(width, height) {\n\n\t\t\tthis.width  = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.__buffer.width  = this.width;\n\t\t\tthis.__buffer.height = this.height;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.alpha      = 1.0;\n\t\tthis.background = '#000000';\n\t\tthis.id         = 'lychee-Renderer-' + _id++;\n\t\tthis.width      = null;\n\t\tthis.height     = null;\n\t\tthis.offset     = { x: 0, y: 0 };\n\n\t\tthis.__canvas           = global.document.createElement('canvas');\n\t\tthis.__canvas.className = 'lychee-Renderer';\n\t\tthis.__ctx              = this.__canvas.getContext('2d');\n\n\t\tif (_body !== null) {\n\t\t\t_body.appendChild(this.__canvas);\n\t\t}\n\n\n\t\tthis.setAlpha(settings.alpha);\n\t\tthis.setBackground(settings.background);\n\t\tthis.setId(settings.id);\n\t\tthis.setWidth(settings.width);\n\t\tthis.setHeight(settings.height);\n\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet canvas = this.__canvas;\n\t\t\tif (canvas.parentNode !== null) {\n\t\t\t\tcanvas.parentNode.removeChild(canvas);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = {};\n\n\n\t\t\tif (this.alpha !== 1.0)                           settings.alpha      = this.alpha;\n\t\t\tif (this.background !== '#000000')                settings.background = this.background;\n\t\t\tif (this.id.substr(0, 16) !== 'lychee-Renderer-') settings.id         = this.id;\n\t\t\tif (this.width !== null)                          settings.width      = this.width;\n\t\t\tif (this.height !== null)                         settings.height     = this.height;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.Renderer',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * SETTERS AND GETTERS\n\t\t */\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tif (alpha >= 0 && alpha <= 1) {\n\t\t\t\t\tthis.alpha = alpha;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetBackground: function(color) {\n\n\t\t\tcolor = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : null;\n\n\n\t\t\tif (color !== null) {\n\t\t\t\tthis.background = color;\n\t\t\t\tthis.__canvas.style.backgroundColor = color;\n\t\t\t}\n\n\t\t},\n\n\t\tsetId: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\t\t\t\tthis.id = id;\n\t\t\t\tthis.__canvas.id = id;\n\t\t\t}\n\n\t\t},\n\n\t\tsetWidth: function(width) {\n\n\t\t\twidth = typeof width === 'number' ? width : null;\n\n\n\t\t\tif (width !== null) {\n\t\t\t\tthis.width = width;\n\t\t\t} else {\n\t\t\t\tthis.width = global.innerWidth;\n\t\t\t}\n\n\n\t\t\tthis.__canvas.width       = this.width;\n\t\t\tthis.__canvas.style.width = this.width + 'px';\n\t\t\tthis.offset.x             = this.__canvas.getBoundingClientRect().left;\n\n\t\t},\n\n\t\tsetHeight: function(height) {\n\n\t\t\theight = typeof height === 'number' ? height : null;\n\n\n\t\t\tif (height !== null) {\n\t\t\t\tthis.height = height;\n\t\t\t} else {\n\t\t\t\tthis.height = global.innerHeight;\n\t\t\t}\n\n\n\t\t\tthis.__canvas.height       = this.height;\n\t\t\tthis.__canvas.style.height = this.height + 'px';\n\t\t\tthis.offset.y              = this.__canvas.getBoundingClientRect().top;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * BUFFER INTEGRATION\n\t\t */\n\n\t\tclear: function(buffer) {\n\n\t\t\tbuffer = buffer instanceof _Buffer ? buffer : null;\n\n\n\t\t\tif (buffer !== null) {\n\n\t\t\t\tbuffer.clear();\n\n\t\t\t} else {\n\n\t\t\t\tlet ctx = this.__ctx;\n\n\t\t\t\tctx.fillStyle = this.background;\n\t\t\t\tctx.fillRect(0, 0, this.width, this.height);\n\n\t\t\t}\n\n\t\t},\n\n\t\tflush: function() {\n\n\t\t},\n\n\t\tcreateBuffer: function(width, height) {\n\t\t\treturn new _Buffer(width, height);\n\t\t},\n\n\t\tsetBuffer: function(buffer) {\n\n\t\t\tbuffer = buffer instanceof _Buffer ? buffer : null;\n\n\n\t\t\tif (buffer !== null) {\n\t\t\t\tthis.__ctx = buffer.__ctx;\n\t\t\t} else {\n\t\t\t\tthis.__ctx = this.__canvas.getContext('2d');\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * DRAWING API\n\t\t */\n\n\t\tdrawArc: function(x, y, start, end, radius, color, background, lineWidth) {\n\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tradius,\n\t\t\t\tstart * _PI2,\n\t\t\t\tend   * _PI2\n\t\t\t);\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.stroke();\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\tctx.closePath();\n\n\t\t},\n\n\t\tdrawBox: function(x1, y1, x2, y2, color, background, lineWidth) {\n\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.strokeRect(x1, y1, x2 - x1, y2 - y1);\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fillRect(x1, y1, x2 - x1, y2 - y1);\n\t\t\t}\n\n\t\t},\n\n\t\tdrawBuffer: function(x1, y1, buffer) {\n\n\t\t\tbuffer = buffer instanceof _Buffer ? buffer : null;\n\n\n\t\t\tif (buffer !== null) {\n\n\t\t\t\tlet ctx    = this.__ctx;\n\t\t\t\tlet width  = buffer.width;\n\t\t\t\tlet height = buffer.height;\n\n\n\t\t\t\tctx.globalAlpha = this.alpha;\n\t\t\t\tctx.drawImage(\n\t\t\t\t\tbuffer.__buffer,\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\twidth,\n\t\t\t\t\theight,\n\t\t\t\t\tx1,\n\t\t\t\t\ty1,\n\t\t\t\t\twidth,\n\t\t\t\t\theight\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t},\n\n\t\tdrawCircle: function(x, y, radius, color, background, lineWidth) {\n\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\n\t\t\tctx.arc(\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tradius,\n\t\t\t\t0,\n\t\t\t\t_PI2\n\t\t\t);\n\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.stroke();\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\tctx.closePath();\n\n\t\t},\n\n\t\tdrawLine: function(x1, y1, x2, y2, color, lineWidth) {\n\n\t\t\tcolor     = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tlineWidth = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\n\t\t\tctx.lineWidth   = lineWidth;\n\t\t\tctx.strokeStyle = color;\n\t\t\tctx.stroke();\n\n\t\t\tctx.closePath();\n\n\t\t},\n\n\t\tdrawTriangle: function(x1, y1, x2, y2, x3, y3, color, background, lineWidth) {\n\n\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\tbackground = background === true;\n\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\tctx.globalAlpha = this.alpha;\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x1, y1);\n\t\t\tctx.lineTo(x2, y2);\n\t\t\tctx.lineTo(x3, y3);\n\t\t\tctx.lineTo(x1, y1);\n\n\t\t\tif (background === false) {\n\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.stroke();\n\t\t\t} else {\n\t\t\t\tctx.fillStyle   = color;\n\t\t\t\tctx.fill();\n\t\t\t}\n\n\t\t\tctx.closePath();\n\n\t\t},\n\n\t\t// points, x1, y1, [ ... x(a), y(a) ... ], [ color, background, lineWidth ]\n\t\tdrawPolygon: function(points, x1, y1) {\n\n\t\t\tlet l = arguments.length;\n\n\t\t\tif (points > 3) {\n\n\t\t\t\tlet optargs = l - (points * 2) - 1;\n\t\t\t\tlet color, background, lineWidth;\n\n\t\t\t\tif (optargs === 3) {\n\n\t\t\t\t\tcolor      = arguments[l - 3];\n\t\t\t\t\tbackground = arguments[l - 2];\n\t\t\t\t\tlineWidth  = arguments[l - 1];\n\n\t\t\t\t} else if (optargs === 2) {\n\n\t\t\t\t\tcolor      = arguments[l - 2];\n\t\t\t\t\tbackground = arguments[l - 1];\n\n\t\t\t\t} else if (optargs === 1) {\n\n\t\t\t\t\tcolor      = arguments[l - 1];\n\n\t\t\t\t}\n\n\n\t\t\t\tcolor      = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : '#000000';\n\t\t\t\tbackground = background === true;\n\t\t\t\tlineWidth  = typeof lineWidth === 'number' ? lineWidth : 1;\n\n\n\t\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\t\tctx.globalAlpha = this.alpha;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(x1, y1);\n\n\t\t\t\tfor (let p = 1; p < points; p++) {\n\n\t\t\t\t\tctx.lineTo(\n\t\t\t\t\t\targuments[1 + p * 2],\n\t\t\t\t\t\targuments[1 + p * 2 + 1]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tctx.lineTo(x1, y1);\n\n\t\t\t\tif (background === false) {\n\t\t\t\t\tctx.lineWidth   = lineWidth;\n\t\t\t\t\tctx.strokeStyle = color;\n\t\t\t\t\tctx.stroke();\n\t\t\t\t} else {\n\t\t\t\t\tctx.fillStyle   = color;\n\t\t\t\t\tctx.fill();\n\t\t\t\t}\n\n\t\t\t\tctx.closePath();\n\n\t\t\t}\n\n\t\t},\n\n\t\tdrawSprite: function(x1, y1, texture, map) {\n\n\t\t\ttexture = texture instanceof Texture ? texture : null;\n\t\t\tmap     = map instanceof Object      ? map     : null;\n\n\n\t\t\tif (texture !== null && texture.buffer !== null) {\n\n\t\t\t\tlet ctx    = this.__ctx;\n\t\t\t\tlet width  = 0;\n\t\t\t\tlet height = 0;\n\t\t\t\tlet x      = 0;\n\t\t\t\tlet y      = 0;\n\t\t\t\tlet r      = 0;\n\n\n\t\t\t\tctx.globalAlpha = this.alpha;\n\n\t\t\t\tif (map === null) {\n\n\t\t\t\t\twidth  = texture.width;\n\t\t\t\t\theight = texture.height;\n\n\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight,\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\twidth  = map.w;\n\t\t\t\t\theight = map.h;\n\t\t\t\t\tx      = map.x;\n\t\t\t\t\ty      = map.y;\n\t\t\t\t\tr      = map.r || 0;\n\n\t\t\t\t\tif (r === 0) {\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tx1,\n\t\t\t\t\t\t\ty1,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet cos = Math.cos(r * Math.PI / 180);\n\t\t\t\t\t\tlet sin = Math.sin(r * Math.PI / 180);\n\n\t\t\t\t\t\tctx.setTransform(\n\t\t\t\t\t\t\tcos,\n\t\t\t\t\t\t\tsin,\n\t\t\t\t\t\t\t-sin,\n\t\t\t\t\t\t\tcos,\n\t\t\t\t\t\t\tx1,\n\t\t\t\t\t\t\ty1\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t-1 / 2 * width,\n\t\t\t\t\t\t\t-1 / 2 * height,\n\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\theight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tctx.setTransform(\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tdrawText: function(x1, y1, text, font, center) {\n\n\t\t\tfont   = font instanceof Font ? font : null;\n\t\t\tcenter = center === true;\n\n\n\t\t\tif (font !== null) {\n\n\t\t\t\tif (center === true) {\n\n\t\t\t\t\tlet dim = font.measure(text);\n\n\t\t\t\t\tx1 -= dim.realwidth / 2;\n\t\t\t\t\ty1 -= (dim.realheight - font.baseline) / 2;\n\n\t\t\t\t}\n\n\n\t\t\t\ty1 -= font.baseline / 2;\n\n\n\t\t\t\tlet margin  = 0;\n\t\t\t\tlet texture = font.texture;\n\t\t\t\tif (texture !== null && texture.buffer !== null) {\n\n\t\t\t\t\tlet ctx = this.__ctx;\n\n\n\t\t\t\t\tctx.globalAlpha = this.alpha;\n\n\t\t\t\t\tfor (let t = 0, l = text.length; t < l; t++) {\n\n\t\t\t\t\t\tlet chr = font.measure(text[t]);\n\n\t\t\t\t\t\tctx.drawImage(\n\t\t\t\t\t\t\ttexture.buffer,\n\t\t\t\t\t\t\tchr.x,\n\t\t\t\t\t\t\tchr.y,\n\t\t\t\t\t\t\tchr.width,\n\t\t\t\t\t\t\tchr.height,\n\t\t\t\t\t\t\tx1 + margin - font.spacing,\n\t\t\t\t\t\t\ty1,\n\t\t\t\t\t\t\tchr.width,\n\t\t\t\t\t\t\tchr.height\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tmargin += chr.realwidth + font.kerning;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Stash":{"constructor":"lychee.Definition","arguments":["lychee.Stash"],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\tif (\n\t\ttypeof global.Storage !== 'undefined'\n\t\t&& typeof global.localStorage === 'object'\n\t\t&& typeof global.sessionStorage === 'object'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn true;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tlet   _id         = 0;\n\tconst _Emitter    = lychee.import('lychee.event.Emitter');\n\tconst _JSON       = {\n\t\tencode: JSON.stringify,\n\t\tdecode: JSON.parse\n\t};\n\tconst _PERSISTENT = {\n\t\tdata: {},\n\t\tread: function() {\n\t\t\treturn null;\n\t\t},\n\t\twrite: function(id, asset) {\n\t\t\treturn false;\n\t\t}\n\t};\n\tconst _TEMPORARY  = {\n\t\tdata: {},\n\t\tread: function() {\n\n\t\t\tif (Object.keys(this.data).length > 0) {\n\t\t\t\treturn this.data;\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\t\twrite: function(id, asset) {\n\n\t\t\tif (asset !== null) {\n\t\t\t\tthis.data[id] = asset;\n\t\t\t} else {\n\t\t\t\tdelete this.data[id];\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function() {\n\n\t\tlet local   = false;\n\t\tlet session = false;\n\n\n\t\ttry {\n\t\t\tlocal = 'localStorage' in global;\n\t\t} catch (err) {\n\t\t\tlocal = false;\n\t\t}\n\n\t\ttry {\n\t\t\tsession = 'sessionStorage' in global;\n\t\t} catch (err) {\n\t\t\tsession = false;\n\t\t}\n\n\n\t\tif (local === true) {\n\n\t\t\t_PERSISTENT.read = function() {\n\n\t\t\t\tthis.data = _JSON.decode(global.localStorage.getItem('lychee-Stash-PERSISTENT'));\n\n\n\t\t\t\tlet blob = {};\n\n\t\t\t\tfor (let id in this.data) {\n\t\t\t\t\tblob[id] = lychee.deserialize(this.data[id]);\n\t\t\t\t}\n\n\t\t\t\treturn Object.keys(blob).length > 0 ? blob : null;\n\n\t\t\t};\n\n\t\t\t_PERSISTENT.write = function(id, asset) {\n\n\t\t\t\tlet path = lychee.environment.resolve(id);\n\t\t\t\tif (path.substr(0, lychee.ROOT.project.length) === lychee.ROOT.project) {\n\n\t\t\t\t\tif (asset !== null) {\n\n\t\t\t\t\t\tlet data = lychee.serialize(asset);\n\t\t\t\t\t\tif (data !== null && data.blob !== null && typeof data.blob.buffer === 'string') {\n\n\t\t\t\t\t\t\tlet index = data.blob.buffer.indexOf('base64,') + 7;\n\t\t\t\t\t\t\tif (index > 7) {\n\t\t\t\t\t\t\t\tthis.data[id] = data;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.data[id] = null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tglobal.localStorage.setItem('lychee-Stash-PERSISTENT', _JSON.encode(this.data));\n\n\n\t\t\t\treturn true;\n\n\t\t\t};\n\n\n\t\t\t(function() {\n\n\t\t\t\tlet data = _JSON.decode(global.localStorage.getItem('lychee-Stash-PERSISTENT'));\n\t\t\t\tif (data !== null) {\n\n\t\t\t\t\tfor (let id in data) {\n\t\t\t\t\t\t_PERSISTENT.data[id] = data[id];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t})();\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (local)   methods.push('Persistent');\n\t\t\tif (session) methods.push('Temporary');\n\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Stash: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Stash: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_asset = function(asset) {\n\n\t\tif (asset instanceof Object && typeof asset.serialize === 'function') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n\tconst _on_batch_remove = function(stash, others) {\n\n\t\tlet keys = Object.keys(others);\n\n\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\tlet key   = keys[k];\n\t\t\tlet index = this.load.indexOf(key);\n\t\t\tif (index !== -1) {\n\n\t\t\t\tif (this.ready.indexOf(key) === -1) {\n\t\t\t\t\tthis.ready.push(null);\n\t\t\t\t\tthis.load.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (this.load.length === 0) {\n\t\t\tstash.trigger('batch', [ 'remove', this.ready ]);\n\t\t\tstash.unbind('sync', _on_batch_remove);\n\t\t}\n\n\t};\n\n\tconst _on_batch_write = function(stash, others) {\n\n\t\tlet keys = Object.keys(others);\n\n\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\tlet key   = keys[k];\n\t\t\tlet index = this.load.indexOf(key);\n\t\t\tif (index !== -1) {\n\n\t\t\t\tif (this.ready.indexOf(key) === -1) {\n\t\t\t\t\tthis.ready.push(others[key]);\n\t\t\t\t\tthis.load.splice(index, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (this.load.length === 0) {\n\t\t\tstash.trigger('batch', [ 'write', this.ready ]);\n\t\t\tstash.unbind('sync', _on_batch_write);\n\t\t}\n\n\t};\n\n\tconst _read_stash = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet blob = null;\n\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\tblob = _PERSISTENT.read();\n\n\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\tblob = _TEMPORARY.read();\n\n\t\t}\n\n\n\t\tif (blob !== null) {\n\n\t\t\tif (Object.keys(this.__assets).length !== Object.keys(blob).length) {\n\n\t\t\t\tthis.__assets = {};\n\n\t\t\t\tfor (let id in blob) {\n\t\t\t\t\tthis.__assets[id] = blob[id];\n\t\t\t\t}\n\n\n\t\t\t\tthis.trigger('sync', [ this.__assets ]);\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _write_stash = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet operations = this.__operations;\n\t\tlet filtered   = {};\n\n\t\tif (operations.length !== 0) {\n\n\t\t\twhile (operations.length > 0) {\n\n\t\t\t\tlet operation = operations.shift();\n\t\t\t\tif (operation.type === 'update') {\n\n\t\t\t\t\tfiltered[operation.id] = operation.asset;\n\n\t\t\t\t\tif (this.__assets[operation.id] !== operation.asset) {\n\t\t\t\t\t\tthis.__assets[operation.id] = operation.asset;\n\t\t\t\t\t}\n\n\t\t\t\t} else if (operation.type === 'remove') {\n\n\t\t\t\t\tfiltered[operation.id] = null;\n\n\t\t\t\t\tif (this.__assets[operation.id] !== null) {\n\t\t\t\t\t\tthis.__assets[operation.id] = null;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\t\tfor (let id in filtered) {\n\t\t\t\t\t_PERSISTENT.write(id, filtered[id]);\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\t\tfor (let id in filtered) {\n\t\t\t\t\t_PERSISTENT.write(id, filtered[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (silent === false) {\n\t\t\t\tthis.trigger('sync', [ this.__assets ]);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.id   = 'lychee-Stash-' + _id++;\n\t\tthis.type = Composite.TYPE.persistent;\n\n\n\t\tthis.__assets     = {};\n\t\tthis.__operations = [];\n\n\n\t\tthis.setId(settings.id);\n\t\tthis.setType(settings.type);\n\n\n\t\t_Emitter.call(this);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\t_read_stash.call(this);\n\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tpersistent: 0,\n\t\ttemporary:  1\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tsync: function(silent) {\n\n\t\t\tsilent = silent === true;\n\n\n\t\t\tlet result = false;\n\n\n\t\t\tif (Object.keys(this.__assets).length > 0) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype: 'sync'\n\t\t\t\t});\n\n\t\t\t}\n\n\n\t\t\tif (this.__operations.length > 0) {\n\t\t\t\tresult = _write_stash.call(this, silent);\n\t\t\t} else {\n\t\t\t\tresult = _read_stash.call(this, silent);\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.assets instanceof Object) {\n\n\t\t\t\tthis.__assets = {};\n\n\t\t\t\tfor (let id in blob.assets) {\n\t\t\t\t\tthis.__assets[id] = lychee.deserialize(blob.assets[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Stash';\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.id.substr(0, 13) !== 'lychee-Stash-') settings.id   = this.id;\n\t\t\tif (this.type !== Composite.TYPE.persistent)       settings.type = this.type;\n\n\n\t\t\tif (Object.keys(this.__assets).length > 0) {\n\n\t\t\t\tblob.assets = {};\n\n\t\t\t\tfor (let id in this.__assets) {\n\t\t\t\t\tblob.assets[id] = lychee.serialize(this.__assets[id]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tbatch: function(action, ids, assets) {\n\n\t\t\taction = typeof action === 'string' ? action : null;\n\t\t\tids    = ids instanceof Array       ? ids    : null;\n\t\t\tassets = assets instanceof Array    ? assets : null;\n\n\n\t\t\tif (action !== null) {\n\n\t\t\t\tlet cache  = {\n\t\t\t\t\tload:  [].slice.call(ids),\n\t\t\t\t\tready: []\n\t\t\t\t};\n\n\n\t\t\t\tlet result = true;\n\t\t\t\tlet that   = this;\n\t\t\t\tlet i      = 0;\n\t\t\t\tlet il     = ids.length;\n\n\t\t\t\tif (action === 'read') {\n\n\t\t\t\t\tfor (i = 0; i < il; i++) {\n\n\t\t\t\t\t\tlet asset = this.read(ids[i]);\n\t\t\t\t\t\tif (asset !== null) {\n\n\t\t\t\t\t\t\tasset.onload = function(result) {\n\n\t\t\t\t\t\t\t\tlet index = cache.load.indexOf(this.url);\n\t\t\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\t\t\tcache.ready.push(this);\n\t\t\t\t\t\t\t\t\tcache.load.splice(index, 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (cache.load.length === 0) {\n\t\t\t\t\t\t\t\t\tthat.trigger('batch', [ 'read', cache.ready ]);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tasset.load();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresult = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn result;\n\n\t\t\t\t} else if (action === 'remove') {\n\n\t\t\t\t\tthis.bind('#sync', _on_batch_remove, cache);\n\n\t\t\t\t\tfor (i = 0; i < il; i++) {\n\n\t\t\t\t\t\tif (this.remove(ids[i]) === false) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tthis.unbind('sync', _on_batch_remove);\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn result;\n\n\t\t\t\t} else if (action === 'write' && ids.length === assets.length) {\n\n\t\t\t\t\tthis.bind('#sync', _on_batch_write, cache);\n\n\t\t\t\t\tfor (i = 0; i < il; i++) {\n\n\t\t\t\t\t\tif (this.write(ids[i], assets[i]) === false) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tthis.unbind('sync', _on_batch_write);\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn result;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tread: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet asset = new lychee.Asset(id, null, true);\n\t\t\t\tif (asset !== null) {\n\n\t\t\t\t\tthis.__assets[id] = asset;\n\n\t\t\t\t\treturn asset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremove: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype: 'remove',\n\t\t\t\t\tid:   id\n\t\t\t\t});\n\n\n\t\t\t\t_write_stash.call(this);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\twrite: function(id, asset) {\n\n\t\t\tid    = typeof id === 'string'          ? id    : null;\n\t\t\tasset = _validate_asset(asset) === true ? asset : null;\n\n\n\t\t\tif (id !== null && asset !== null) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype:  'update',\n\t\t\t\t\tid:    id,\n\t\t\t\t\tasset: asset\n\t\t\t\t});\n\n\n\t\t\t\t_write_stash.call(this);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetId: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tthis.id = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tthis.type = type;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Storage":{"constructor":"lychee.Definition","arguments":["lychee.Storage"],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\tif (\n\t\ttypeof global.Storage !== 'undefined'\n\t\t&& typeof global.localStorage === 'object'\n\t\t&& typeof global.sessionStorage === 'object'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn true;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tlet   _id         = 0;\n\tconst _Emitter    = lychee.import('lychee.event.Emitter');\n\tconst _JSON       = {\n\t\tencode: JSON.stringify,\n\t\tdecode: JSON.parse\n\t};\n\tlet   _PERSISTENT = null;\n\tlet   _TEMPORARY  = null;\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function() {\n\n\t\tlet local   = false;\n\t\tlet session = false;\n\n\n\t\ttry {\n\n\t\t\tlocal = 'localStorage' in global;\n\n\t\t\tif (local === true) {\n\t\t\t\t_PERSISTENT = global.localStorage;\n\t\t\t}\n\n\t\t\tsession = 'sessionStorage' in global;\n\n\t\t\tif (session === true) {\n\t\t\t\t_TEMPORARY = global.sessionStorage;\n\t\t\t}\n\n\t\t} catch (err) {\n\n\t\t\tlocal   = false;\n\t\t\tsession = true;\n\n\t\t\t_PERSISTENT = null;\n\t\t\t_TEMPORARY  = {\n\n\t\t\t\tdata: {},\n\n\t\t\t\tgetItem: function(id) {\n\t\t\t\t\treturn this.data[id] || null;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(id, data) {\n\t\t\t\t\tthis.data[id] = data;\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (local)   methods.push('Persistent');\n\t\t\tif (session) methods.push('Temporary');\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Storage: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Storage: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _read_storage = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet id   = this.id;\n\t\tlet blob = null;\n\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\tif (_PERSISTENT !== null) {\n\t\t\t\tblob = JSON.parse(_PERSISTENT.getItem(id));\n\t\t\t}\n\n\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\tif (_TEMPORARY !== null) {\n\t\t\t\tblob = JSON.parse(_TEMPORARY.getItem(id));\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (blob !== null) {\n\n\t\t\tif (this.model === null) {\n\n\t\t\t\tif (blob['@model'] instanceof Object) {\n\t\t\t\t\tthis.model = blob['@model'];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (Object.keys(this.__objects).length !== Object.keys(blob['@objects']).length) {\n\n\t\t\t\tif (blob['@objects'] instanceof Object) {\n\n\t\t\t\t\tthis.__objects = {};\n\n\t\t\t\t\tfor (let o in blob['@objects']) {\n\t\t\t\t\t\tthis.__objects[o] = blob['@objects'][o];\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (silent === false) {\n\t\t\t\t\t\tthis.trigger('sync', [ this.__objects ]);\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _write_storage = function(silent) {\n\n\t\tsilent = silent === true;\n\n\n\t\tlet operations = this.__operations;\n\t\tif (operations.length !== 0) {\n\n\t\t\twhile (operations.length > 0) {\n\n\t\t\t\tlet operation = operations.shift();\n\t\t\t\tif (operation.type === 'update') {\n\n\t\t\t\t\tif (this.__objects[operation.id] !== operation.object) {\n\t\t\t\t\t\tthis.__objects[operation.id] = operation.object;\n\t\t\t\t\t}\n\n\t\t\t\t} else if (operation.type === 'remove') {\n\n\t\t\t\t\tif (this.__objects[operation.id] !== undefined) {\n\t\t\t\t\t\tdelete this.__objects[operation.id];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tlet id   = this.id;\n\t\t\tlet blob = {\n\t\t\t\t'@model':   this.model,\n\t\t\t\t'@objects': this.__objects\n\t\t\t};\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.persistent) {\n\n\t\t\t\tif (_PERSISTENT !== null) {\n\t\t\t\t\t_PERSISTENT.setItem(id, _JSON.encode(blob));\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.temporary) {\n\n\t\t\t\tif (_TEMPORARY !== null) {\n\t\t\t\t\t_TEMPORARY.setItem(id, _JSON.encode(blob));\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (silent === false) {\n\t\t\t\tthis.trigger('sync', [ this.__objects ]);\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.id    = 'lychee-Storage-' + _id++;\n\t\tthis.model = {};\n\t\tthis.type  = Composite.TYPE.persistent;\n\n\t\tthis.__objects    = {};\n\t\tthis.__operations = [];\n\n\n\t\tthis.setId(settings.id);\n\t\tthis.setModel(settings.model);\n\t\tthis.setType(settings.type);\n\n\n\t\t_Emitter.call(this);\n\n\t\tsettings = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\t_read_storage.call(this);\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tpersistent: 0,\n\t\ttemporary:  1\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tsync: function(silent) {\n\n\t\t\tsilent = silent === true;\n\n\n\t\t\tlet result = false;\n\n\n\t\t\tif (this.__operations.length > 0) {\n\t\t\t\tresult = _write_storage.call(this, silent);\n\t\t\t} else {\n\t\t\t\tresult = _read_storage.call(this, silent);\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.objects instanceof Object) {\n\n\t\t\t\tthis.__objects = {};\n\n\t\t\t\tfor (let o in blob.objects) {\n\n\t\t\t\t\tlet object = blob.objects[o];\n\n\t\t\t\t\tif (lychee.interfaceof(this.model, object)) {\n\t\t\t\t\t\tthis.__objects[o] = object;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Storage';\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.id.substr(0, 15) !== 'lychee-Storage-') settings.id    = this.id;\n\t\t\tif (Object.keys(this.model).length !== 0)        settings.model = this.model;\n\t\t\tif (this.type !== Composite.TYPE.persistent)         settings.type  = this.type;\n\n\n\t\t\tif (Object.keys(this.__objects).length > 0) {\n\n\t\t\t\tblob.objects = {};\n\n\t\t\t\tfor (let o in this.__objects) {\n\n\t\t\t\t\tlet object = this.__objects[o];\n\t\t\t\t\tif (object instanceof Object) {\n\t\t\t\t\t\tblob.objects[o] = _JSON.decode(_JSON.encode(object));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcreate: function() {\n\t\t\treturn lychee.assignunlink({}, this.model);\n\t\t},\n\n\t\tfilter: function(callback, scope) {\n\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : this;\n\n\n\t\t\tlet filtered = [];\n\n\n\t\t\tif (callback !== null) {\n\n\t\t\t\tfor (let o in this.__objects) {\n\n\t\t\t\t\tlet object = this.__objects[o];\n\n\t\t\t\t\tif (callback.call(scope, object, o) === true) {\n\t\t\t\t\t\tfiltered.push(object);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\n\t\t\treturn filtered;\n\n\t\t},\n\n\t\tread: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet object = this.__objects[id] || null;\n\t\t\t\tif (object !== null) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremove: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet object = this.__objects[id] || null;\n\t\t\t\tif (object !== null) {\n\n\t\t\t\t\tthis.__operations.push({\n\t\t\t\t\t\ttype:   'remove',\n\t\t\t\t\t\tid:     id,\n\t\t\t\t\t\tobject: object\n\t\t\t\t\t});\n\n\n\t\t\t\t\t_write_storage.call(this);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\twrite: function(id, object) {\n\n\t\t\tid     = typeof id === 'string'                    ? id     : null;\n\t\t\tobject = lychee.diff(this.model, object) === false ? object : null;\n\n\n\t\t\tif (id !== null && object !== null) {\n\n\t\t\t\tthis.__operations.push({\n\t\t\t\t\ttype:   'update',\n\t\t\t\t\tid:     id,\n\t\t\t\t\tobject: object\n\t\t\t\t});\n\n\n\t\t\t\t_write_storage.call(this);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetId: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tthis.id = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetModel: function(model) {\n\n\t\t\tmodel = model instanceof Object ? model : null;\n\n\n\t\t\tif (model !== null) {\n\n\t\t\t\tthis.model = _JSON.decode(_JSON.encode(model));\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tthis.type = type;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Jukebox":{"constructor":"lychee.Definition","arguments":["lychee.app.Jukebox"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.channels = 8;\n\t\tthis.music    = true;\n\t\tthis.sound    = true;\n\t\tthis.volume   = 1.0;\n\n\t\tthis.__music  = null;\n\t\tthis.__sounds = [\n\t\t\tnull, null,\n\t\t\tnull, null,\n\t\t\tnull, null,\n\t\t\tnull, null\n\t\t];\n\n\n\t\tthis.setChannels(settings.channels);\n\t\tthis.setMusic(settings.music);\n\t\tthis.setSound(settings.sound);\n\t\tthis.setVolume(settings.volume);\n\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = {};\n\n\n\t\t\tif (this.channels !== 8) settings.channels = this.channels;\n\t\t\tif (this.music !== true) settings.music    = this.music;\n\t\t\tif (this.sound !== true) settings.sound    = this.sound;\n\t\t\tif (this.volume !== 1.0) settings.volume   = this.volume;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.Jukebox',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tplay: function(track) {\n\n\t\t\tlet volume = this.volume;\n\n\n\t\t\tif (track instanceof Music && this.music === true) {\n\n\t\t\t\tlet music = this.__music;\n\t\t\t\tif (music !== null) {\n\t\t\t\t\tmusic.stop();\n\t\t\t\t}\n\n\n\t\t\t\tthis.__music = track;\n\t\t\t\tthis.__music.setVolume(this.volume);\n\t\t\t\tthis.__music.play();\n\n\n\t\t\t\treturn true;\n\n\t\t\t} else if (track instanceof Sound && this.sound === true) {\n\n\t\t\t\tlet found  = false;\n\t\t\t\tlet sounds = this.__sounds;\n\n\t\t\t\tfor (let s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\t\tlet sound = sounds[s];\n\t\t\t\t\tif (sound === null) {\n\n\t\t\t\t\t\tsounds[s] = track.clone();\n\t\t\t\t\t\tsounds[s].setVolume(volume);\n\t\t\t\t\t\tsounds[s].play();\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t} else if (sound.isIdle === true) {\n\n\t\t\t\t\t\tif (sound.url === track.url) {\n\n\t\t\t\t\t\t\tsound.setVolume(volume);\n\t\t\t\t\t\t\tsound.play();\n\t\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === false) {\n\n\t\t\t\t\tif (track.isIdle === true) {\n\n\t\t\t\t\t\ttrack.setVolume(volume);\n\t\t\t\t\t\ttrack.play();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor (let s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\t\t\t\tlet sound = sounds[s];\n\t\t\t\t\t\t\tif (sound.isIdle === true) {\n\n\t\t\t\t\t\t\t\tsounds[s] = null;\n\t\t\t\t\t\t\t\tsounds[s] = track.clone();\n\t\t\t\t\t\t\t\tsounds[s].setVolume(volume);\n\t\t\t\t\t\t\t\tsounds[s].play();\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tstop: function(track) {\n\n\t\t\ttrack = (track instanceof Music || track instanceof Sound) ? track : null;\n\n\n\t\t\tlet found  = false;\n\t\t\tlet music  = this.__music;\n\t\t\tlet sounds = this.__sounds;\n\n\n\t\t\tlet s, sl, sound = null;\n\n\t\t\tif (track instanceof Music) {\n\n\t\t\t\tif (music === track) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tmusic.stop();\n\t\t\t\t}\n\n\n\t\t\t\tthis.__music = null;\n\n\t\t\t} else if (track instanceof Sound) {\n\n\t\t\t\tfor (s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\t\tsound = sounds[s];\n\n\t\t\t\t\tif (sound !== null && sound.url === track.url && sound.isIdle === false) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tsound.stop();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if (track === null) {\n\n\t\t\t\tif (music !== null) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tmusic.stop();\n\t\t\t\t}\n\n\n\t\t\t\tfor (s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\t\tsound = sounds[s];\n\n\t\t\t\t\tif (sound !== null && sound.isIdle === false) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tsound.stop();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (found === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetChannels: function(channels) {\n\n\t\t\tchannels = typeof channels === 'number' ? channels : null;\n\n\n\t\t\tif (channels !== null) {\n\n\t\t\t\tthis.channels = channels;\n\t\t\t\tthis.__sounds.fill(null);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetMusic: function(music) {\n\n\t\t\tif (music === true || music === false) {\n\n\t\t\t\tthis.music = music;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetSound: function(sound) {\n\n\t\t\tif (sound === true || sound === false) {\n\n\t\t\t\tthis.sound = sound;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVolume: function(volume) {\n\n\t\t\tvolume = typeof volume === 'number' ? volume : null;\n\n\n\t\t\tif (volume !== null) {\n\n\t\t\t\tthis.volume = Math.min(Math.max(0, volume), 1);\n\n\n\t\t\t\tlet music = this.__music;\n\t\t\t\tif (music !== null) {\n\t\t\t\t\tmusic.setVolume(this.volume);\n\t\t\t\t}\n\n\n\t\t\t\tlet sounds = this.__sounds;\n\t\t\t\tfor (let s = 0, sl = sounds.length; s < sl; s++) {\n\n\t\t\t\t\tlet sound = sounds[s];\n\t\t\t\t\tif (sound !== null) {\n\t\t\t\t\t\tsound.setVolume(this.volume);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.Viewport":{"constructor":"lychee.Definition","arguments":["lychee.Viewport"],"blob":{"attaches":{},"tags":{"platform":"html"},"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\tif (\n\t\ttypeof global.addEventListener === 'function'\n\t\t&& typeof global.innerWidth === 'number'\n\t\t&& typeof global.innerHeight === 'number'\n\t\t&& typeof global.document !== 'undefined'\n\t\t&& typeof global.document.querySelectorAll === 'function'\n\t) {\n\n\t\treturn true;\n\n\t}\n\n\n\treturn false;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _CLOCK     = {\n\t\torientationchange: null,\n\t\tresize:            0\n\t};\n\tconst _INSTANCES = [];\n\n\n\n\t/*\n\t * EVENTS\n\t */\n\n\tlet _focusactive   = true;\n\tlet _reshapeactive = false;\n\tlet _reshapewidth  = global.innerWidth;\n\tlet _reshapeheight = global.innerHeight;\n\n\tconst _reshape_viewport = function() {\n\n\t\tif (_reshapeactive === true || (_reshapewidth === global.innerWidth && _reshapeheight === global.innerHeight)) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\t_reshapeactive = true;\n\n\n\n\t\t/*\n\t\t * ISSUE in Mobile WebKit:\n\t\t *\n\t\t * An issue occurs if width of viewport is higher than\n\t\t * the width of the viewport of future rotation state.\n\t\t *\n\t\t * This bugfix prevents the viewport to scale higher\n\t\t * than 1.0, even if the meta tag is correctly setup.\n\t\t */\n\n\t\tlet elements = global.document.querySelectorAll('.lychee-Renderer');\n\t\tfor (let e = 0, el = elements.length; e < el; e++) {\n\n\t\t\tlet element = elements[e];\n\n\t\t\telement.style.width  = '1px';\n\t\t\telement.style.height = '1px';\n\n\t\t}\n\n\n\n\t\t/*\n\t\t * ISSUE in Mobile Firefox and Mobile WebKit\n\t\t *\n\t\t * The reflow is too slow for an update, so we have\n\t\t * to lock the heuristic to only be executed once,\n\t\t * waiting for a second to let the reflow finish.\n\t\t */\n\n\t\tsetTimeout(function() {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_reshape.call(_INSTANCES[i], global.innerWidth, global.innerHeight);\n\t\t\t}\n\n\t\t\t_reshapewidth  = global.innerWidth;\n\t\t\t_reshapeheight = global.innerHeight;\n\t\t\t_reshapeactive = false;\n\n\t\t}, 1000);\n\n\t};\n\n\tconst _listeners = {\n\n\t\torientationchange: function() {\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t_process_orientation.call(_INSTANCES[i], global.orientation);\n\t\t\t}\n\n\t\t\t_CLOCK.orientationchange = Date.now();\n\t\t\t_reshape_viewport();\n\n\t\t},\n\n\t\tresize: function() {\n\n\t\t\tif (_CLOCK.orientationchange === null || (_CLOCK.orientationchange !== null && _CLOCK.orientationchange > _CLOCK.resize)) {\n\n\t\t\t\t_CLOCK.resize = Date.now();\n\t\t\t\t_reshape_viewport();\n\n\t\t\t}\n\n\t\t},\n\n\t\tfocus: function() {\n\n\t\t\tif (_focusactive === false) {\n\n\t\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t\t_process_show.call(_INSTANCES[i]);\n\t\t\t\t}\n\n\t\t\t\t_focusactive = true;\n\n\t\t\t}\n\n\t\t},\n\n\t\tblur: function() {\n\n\t\t\tif (_focusactive === true) {\n\n\t\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\t\t\t\t\t_process_hide.call(_INSTANCES[i]);\n\t\t\t\t}\n\n\t\t\t\t_focusactive = false;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\tlet _enterFullscreen = null;\n\tlet _leaveFullscreen = null;\n\n\t(function() {\n\n\t\tlet resize      = 'onresize' in global;\n\t\tlet orientation = 'onorientationchange' in global;\n\t\tlet focus       = 'onfocus' in global;\n\t\tlet blur        = 'onblur' in global;\n\n\n\t\tif (typeof global.addEventListener === 'function') {\n\n\t\t\tif (resize)      global.addEventListener('resize',            _listeners.resize,            true);\n\t\t\tif (orientation) global.addEventListener('orientationchange', _listeners.orientationchange, true);\n\t\t\tif (focus)       global.addEventListener('focus',             _listeners.focus,             true);\n\t\t\tif (blur)        global.addEventListener('blur',              _listeners.blur,              true);\n\n\t\t}\n\n\n\t\tif (global.document && global.document.documentElement) {\n\n\t\t\tlet element = global.document.documentElement;\n\n\t\t\tif (typeof element.requestFullscreen === 'function' && typeof element.exitFullscreen === 'function') {\n\n\t\t\t\t_enterFullscreen = function() {\n\t\t\t\t\telement.requestFullscreen();\n\t\t\t\t};\n\n\t\t\t\t_leaveFullscreen = function() {\n\t\t\t\t\telement.exitFullscreen();\n\t\t\t\t};\n\n\t\t\t}\n\n\n\t\t\tif (_enterFullscreen === null || _leaveFullscreen === null) {\n\n\t\t\t\tlet prefixes = [ 'moz', 'ms', 'webkit' ];\n\t\t\t\tlet prefix   = null;\n\n\t\t\t\tfor (let p = 0, pl = prefixes.length; p < pl; p++) {\n\n\t\t\t\t\tif (typeof element[prefixes[p] + 'RequestFullScreen'] === 'function' && typeof document[prefixes[p] + 'CancelFullScreen'] === 'function') {\n\t\t\t\t\t\tprefix = prefixes[p];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (prefix !== null) {\n\n\t\t\t\t\t_enterFullscreen = function() {\n\t\t\t\t\t\telement[prefix + 'RequestFullScreen']();\n\t\t\t\t\t};\n\n\t\t\t\t\t_leaveFullscreen = function() {\n\t\t\t\t\t\tglobal.document[prefix + 'CancelFullScreen']();\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (resize)      methods.push('Resize');\n\t\t\tif (orientation) methods.push('Orientation');\n\t\t\tif (focus)       methods.push('Focus');\n\t\t\tif (blur)        methods.push('Blur');\n\n\t\t\tif (_enterFullscreen !== null && _leaveFullscreen !== null) {\n\t\t\t\tmethods.push('Fullscreen');\n\t\t\t}\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.Viewport: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.Viewport: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})();\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _process_show = function() {\n\n\t\treturn this.trigger('show');\n\n\t};\n\n\tconst _process_hide = function() {\n\n\t\treturn this.trigger('hide');\n\n\t};\n\n\tconst _process_orientation = function(orientation) {\n\n\t\torientation = typeof orientation === 'number' ? orientation : null;\n\n\t\tif (orientation !== null) {\n\t\t\tthis.__orientation = orientation;\n\t\t}\n\n\t};\n\n\tconst _process_reshape = function(width, height) {\n\n\t\tif (width === this.width && height === this.height) {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tthis.width  = width;\n\t\tthis.height = height;\n\n\n\t\tlet orientation = null;\n\t\tlet rotation    = null;\n\n\n\n\t\t/*\n\t\t *    TOP\n\t\t *  _______\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * [X][X][X]\n\t\t *\n\t\t *  BOTTOM\n\t\t */\n\n\t\tif (this.__orientation === 0) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\n\n\t\t/*\n\t\t *  BOTTOM\n\t\t *\n\t\t * [X][X][X]\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |       |\n\t\t * |_______|\n\t\t *\n\t\t *    TOP\n\t\t */\n\n\t\t} else if (this.__orientation === 180) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\n\n\t\t/*\n\t\t *    ____________    B\n\t\t * T |            [x] O\n\t\t * O |            [x] T\n\t\t * P |____________[x] T\n\t\t *                    O\n\t\t *                    M\n\t\t */\n\n\t\t} else if (this.__orientation === 90) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\n\n\t\t/*\n\t\t * B    ____________\n\t\t * O [x]            | T\n\t\t * T [x]            | O\n\t\t * T [x]____________| P\n\t\t * O\n\t\t * M\n\t\t */\n\n\t\t} else if (this.__orientation === -90) {\n\n\t\t\tif (width > height) {\n\n\t\t\t\torientation = 'portrait';\n\t\t\t\trotation    = 'landscape';\n\n\t\t\t} else {\n\n\t\t\t\torientation = 'landscape';\n\t\t\t\trotation    = 'portrait';\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn this.trigger('reshape', [ orientation, rotation, width, height ]);\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.fullscreen = false;\n\t\tthis.width      = global.innerWidth;\n\t\tthis.height     = global.innerHeight;\n\n\t\tthis.__orientation = typeof global.orientation === 'number' ? global.orientation : 0;\n\n\n\t\t_Emitter.call(this);\n\n\t\t_INSTANCES.push(this);\n\n\n\t\tthis.setFullscreen(settings.fullscreen);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tsetTimeout(function() {\n\n\t\t\tthis.width  = 0;\n\t\t\tthis.height = 0;\n\n\t\t\t_process_reshape.call(this, global.innerWidth, global.innerHeight);\n\n\t\t}.bind(this), 100);\n\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let i = 0, il = _INSTANCES.length; i < il; i++) {\n\n\t\t\t\tif (_INSTANCES[i] === this) {\n\t\t\t\t\t_INSTANCES.splice(i, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t\til--;\n\t\t\t\t\ti--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.unbind();\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.Viewport';\n\n\t\t\tlet settings = {};\n\n\n\t\t\tif (this.fullscreen !== false) settings.fullscreen = this.fullscreen;\n\n\n\t\t\tdata['arguments'][0] = settings;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetFullscreen: function(fullscreen) {\n\n\t\t\tif (fullscreen === true && this.fullscreen === false) {\n\n\t\t\t\tif (_enterFullscreen !== null) {\n\n\t\t\t\t\t_enterFullscreen();\n\t\t\t\t\tthis.fullscreen = true;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else if (fullscreen === false && this.fullscreen === true) {\n\n\t\t\t\tif (_leaveFullscreen !== null) {\n\n\t\t\t\t\t_leaveFullscreen();\n\t\t\t\t\tthis.fullscreen = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Loop":{"constructor":"lychee.Definition","arguments":["lychee.app.Loop"],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\tif (typeof global.setInterval === 'function') {\n\t\treturn true;\n\t}\n\n\treturn false;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _INSTANCES = [];\n\tlet   _id        = 0;\n\n\n\n\t/*\n\t * EVENTS\n\t */\n\n\tconst _listeners = {\n\n\t\tinterval: function() {\n\n\t\t\tlet now = Date.now();\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tlet instance = _INSTANCES[i];\n\t\t\t\tlet clock    = now - instance.__start;\n\n\t\t\t\t_update_loop.call(instance, clock);\n\t\t\t\t_render_loop.call(instance, clock);\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function() {\n\n\t\t\tlet now = Date.now();\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tlet instance = _INSTANCES[i];\n\t\t\t\tlet clock    = now - instance.__start;\n\n\t\t\t\t_update_loop.call(instance, clock);\n\n\t\t\t}\n\n\t\t},\n\n\t\t// XXX: render loop is inlined for maximum performance\n\t\trender: function() {\n\n\t\t\tlet now = Date.now();\n\n\t\t\tfor (let i = 0, l = _INSTANCES.length; i < l; i++) {\n\n\t\t\t\tlet instance = _INSTANCES[i];\n\t\t\t\tif (instance.__state === 1) {\n\n\t\t\t\t\tlet clock = now   - instance.__start;\n\t\t\t\t\tlet delta = clock - instance.__renderclock;\n\t\t\t\t\tif (delta >= instance.__renderdelay) {\n\t\t\t\t\t\tinstance.trigger('render', [ clock, delta ]);\n\t\t\t\t\t\tinstance.__renderclock = clock;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tglobal.requestAnimationFrame(_listeners.render);\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * FEATURE DETECTION\n\t */\n\n\t(function(delta) {\n\n\t\tlet interval = typeof global.setInterval === 'function';\n\t\tlet raf      = typeof global.requestAnimationFrame === 'function';\n\n\t\tif (raf === true && interval === true) {\n\t\t\tglobal.setInterval(_listeners.update, delta);\n\t\t\tglobal.requestAnimationFrame(_listeners.render);\n\t\t} else if (interval === true) {\n\t\t\tglobal.setInterval(_listeners.interval, delta);\n\t\t}\n\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tlet methods = [];\n\n\t\t\tif (interval) methods.push('setInterval');\n\t\t\tif (raf)      methods.push('requestAnimationFrame');\n\n\t\t\tif (methods.length === 0) {\n\t\t\t\tconsole.error('lychee.app.Loop: Supported methods are NONE');\n\t\t\t} else {\n\t\t\t\tconsole.info('lychee.app.Loop: Supported methods are ' + methods.join(', '));\n\t\t\t}\n\n\t\t}\n\n\t})((1000 / 60) | 0);\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _update_loop = function(clock) {\n\n\t\tif (this.__state !== 1) return;\n\n\n\t\tlet delta = clock - this.__updateclock;\n\t\tif (delta >= this.__updatedelay) {\n\n\t\t\tthis.trigger('update', [ clock, delta ]);\n\n\n\t\t\tfor (let iid in this.__intervals) {\n\n\t\t\t\tlet interval = this.__intervals[iid];\n\n\t\t\t\tif (clock >= interval.clock) {\n\n\t\t\t\t\tinterval.callback.call(\n\t\t\t\t\t\tinterval.scope,\n\t\t\t\t\t\tclock,\n\t\t\t\t\t\tclock - interval.clock,\n\t\t\t\t\t\tinterval.step++\n\t\t\t\t\t);\n\n\t\t\t\t\tinterval.clock = clock + interval.delta;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tfor (let tid in this.__timeouts) {\n\n\t\t\t\tlet timeout = this.__timeouts[tid];\n\t\t\t\tif (clock >= timeout.clock) {\n\n\t\t\t\t\ttimeout.callback.call(\n\t\t\t\t\t\ttimeout.scope,\n\t\t\t\t\t\tclock,\n\t\t\t\t\t\tclock - timeout.clock\n\t\t\t\t\t);\n\n\t\t\t\t\tdelete this.__timeouts[tid];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__updateclock = clock;\n\n\t\t}\n\n\t};\n\n\tconst _render_loop = function(clock) {\n\n\t\tif (this.__state !== 1) return;\n\n\n\t\tlet delta = clock - this.__renderclock;\n\t\tif (delta >= this.__renderdelay) {\n\n\t\t\tthis.trigger('render', [ clock, delta ]);\n\n\n\t\t\tthis.__renderclock = clock;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.update = 40;\n\t\tthis.render = 40;\n\n\t\tthis.__timeouts  = {};\n\t\tthis.__intervals = {};\n\n\t\tthis.__pause       = 0;\n\t\tthis.__start       = Date.now();\n\t\tthis.__state       = 1;\n\t\tthis.__renderclock = 0;\n\t\tthis.__renderdelay = 1000 / this.update;\n\t\tthis.__updateclock = 0;\n\t\tthis.__updatedelay = 1000 / this.render;\n\n\n\t\tthis.setUpdate(settings.update);\n\t\tthis.setRender(settings.render);\n\n\n\t\t_Emitter.call(this);\n\n\t\t_INSTANCES.push(this);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tdestroy: function() {\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let i = 0, il = _INSTANCES.length; i < il; i++) {\n\n\t\t\t\tif (_INSTANCES[i] === this) {\n\t\t\t\t\t_INSTANCES.splice(i, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t\til--;\n\t\t\t\t\ti--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.unbind();\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (typeof blob.state === 'number') {\n\n\t\t\t\tthis.__state = blob.state;\n\t\t\t\tthis.__pause = blob.pause;\n\n\t\t\t}\n\n\t\t\tif (typeof blob.updateclock === 'number') this.__updateclock = blob.updateclock;\n\t\t\tif (typeof blob.renderclock === 'number') this.__renderclock = blob.renderclock;\n\n\n\t\t\tif (blob.timeouts instanceof Array) {\n\t\t\t\t// TODO: deserialize timeouts\n\t\t\t}\n\n\t\t\tif (blob.intervals instanceof Array) {\n\t\t\t\t// TODO: deserialize intervals\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Loop';\n\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.update !== 40) settings.update = this.update;\n\t\t\tif (this.render !== 40) settings.render = this.render;\n\n\n\t\t\tif (Object.keys(this.__timeouts).length > 0) {\n\n\t\t\t\tblob.timeouts = [];\n\n\t\t\t\tfor (let tid in this.__timeouts) {\n\n\t\t\t\t\tlet timeout = this.__timeouts[tid];\n\n\t\t\t\t\tblob.timeouts.push({\n\t\t\t\t\t\tdelta:    timeout.clock - this.__updateclock,\n\t\t\t\t\t\tcallback: lychee.serialize(timeout.callback),\n\t\t\t\t\t\t// scope:    lychee.serialize(timeout.scope)\n\t\t\t\t\t\tscope:    null\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (Object.keys(this.__intervals).length > 0) {\n\n\t\t\t\tblob.intervals = [];\n\n\t\t\t\tfor (let iid in this.__intervals) {\n\n\t\t\t\t\tlet interval = this.__intervals[iid];\n\n\t\t\t\t\tblob.intervals.push({\n\t\t\t\t\t\tclock:    interval.clock - this.__updateclock,\n\t\t\t\t\t\tdelta:    interval.delta,\n\t\t\t\t\t\tstep:     interval.step,\n\t\t\t\t\t\tcallback: lychee.serialize(interval.callback),\n\t\t\t\t\t\t// scope:    lychee.serialize(interval.scope)\n\t\t\t\t\t\tscope:    null\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.__state !== 1) {\n\n\t\t\t\tblob.pause = this.__pause;\n\t\t\t\tblob.state = this.__state;\n\n\t\t\t}\n\n\t\t\tblob.updateclock = this.__updateclock;\n\t\t\tblob.renderclock = this.__renderclock;\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.Loop',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tstart: function() {\n\n\t\t\tthis.__state = 1;\n\t\t\tthis.__start = Date.now();\n\n\t\t},\n\n\t\tstop: function() {\n\n\t\t\tthis.__state = 0;\n\n\t\t},\n\n\t\tpause: function() {\n\n\t\t\tthis.__state = 0;\n\t\t\tthis.__pause = Date.now() - this.__start;\n\n\t\t},\n\n\t\tresume: function() {\n\n\t\t\tthis.__state = 1;\n\t\t\tthis.__start = Date.now() - this.__pause;\n\t\t\tthis.__pause = 0;\n\n\t\t},\n\n\t\tsetTimeout: function(delta, callback, scope) {\n\n\t\t\tdelta    = typeof delta === 'number'    ? delta    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : global;\n\n\n\t\t\tif (delta === null || callback === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tlet id = _id++;\n\n\t\t\tthis.__timeouts[id] = {\n\t\t\t\tclock:    this.__updateclock + delta,\n\t\t\t\tcallback: callback,\n\t\t\t\tscope:    scope\n\t\t\t};\n\n\n\t\t\treturn id;\n\n\t\t},\n\n\t\tremoveTimeout: function(id) {\n\n\t\t\tid = typeof id === 'number' ? id : null;\n\n\n\t\t\tif (id !== null && this.__timeouts[id] !== undefined) {\n\n\t\t\t\tdelete this.__timeouts[id];\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetInterval: function(delta, callback, scope) {\n\n\t\t\tdelta    = typeof delta === 'number'    ? delta    : null;\n\t\t\tcallback = callback instanceof Function ? callback : null;\n\t\t\tscope    = scope !== undefined          ? scope    : global;\n\n\n\t\t\tif (delta === null || callback === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\n\t\t\tlet id = _id++;\n\n\t\t\tthis.__intervals[id] = {\n\t\t\t\tclock:    this.__updateclock + delta,\n\t\t\t\tdelta:    delta,\n\t\t\t\tstep:     1,\n\t\t\t\tcallback: callback,\n\t\t\t\tscope:    scope\n\t\t\t};\n\n\n\t\t\treturn id;\n\n\t\t},\n\n\t\tremoveInterval: function(id) {\n\n\t\t\tid = typeof id === 'number' ? id : null;\n\n\n\t\t\tif (id !== null && this.__intervals[id] !== undefined) {\n\n\t\t\t\tdelete this.__intervals[id];\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetUpdate: function(update) {\n\n\t\t\tupdate = typeof update === 'number' ? update : null;\n\n\n\t\t\tif (update !== null && update > 0) {\n\n\t\t\t\tthis.update        = update;\n\t\t\t\tthis.__updatedelay = 1000 / update;\n\n\t\t\t\treturn true;\n\n\t\t\t} else if (update === 0) {\n\n\t\t\t\tthis.update        = update;\n\t\t\t\tthis.__updatedelay = Infinity;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRender: function(render) {\n\n\t\t\trender = typeof render === 'number' ? render : null;\n\n\n\t\t\tif (render !== null && render > 0) {\n\n\t\t\t\tthis.render        = render;\n\t\t\t\tthis.__renderdelay = 1000 / render;\n\n\t\t\t\treturn true;\n\n\t\t\t} else if (render === 0) {\n\n\t\t\t\tthis.render        = render;\n\t\t\t\tthis.__renderdelay = Infinity;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.State":{"constructor":"lychee.Definition","arguments":["lychee.app.State"],"blob":{"attaches":{},"requires":["lychee.ai.Layer","lychee.app.Layer","lychee.ui.Layer"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Ai_layer  = lychee.import('lychee.ai.Layer');\n\tconst _App_layer = lychee.import('lychee.app.Layer');\n\tconst _Ui_layer  = lychee.import('lychee.ui.Layer');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_layer = function(layer) {\n\n\t\tif (\n\t\t\tlychee.interfaceof(_Ai_layer, layer)\n\t\t\t|| lychee.interfaceof(_App_layer, layer)\n\t\t\t|| lychee.interfaceof(_Ui_layer, layer)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _get_id = function(entity) {\n\n\t\tfor (let id in this.__map) {\n\n\t\t\tif (this.__map[id] === entity) {\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _recursive_deserialize = function(oldlayer, newlayer) {\n\n\t\tif (typeof oldlayer.setType === 'function') {\n\t\t\toldlayer.setType(newlayer.type);\n\t\t}\n\n\t\tif (typeof oldlayer.setVisible === 'function') {\n\t\t\toldlayer.setVisible(newlayer.visible);\n\t\t}\n\n\n\t\tfor (let e = 0, el = newlayer.entities.length; e < el; e++) {\n\n\t\t\tlet entity = newlayer.entities[e];\n\t\t\tlet id     = _get_id.call(newlayer, entity);\n\t\t\tlet other  = oldlayer.getEntity(id);\n\n\t\t\tif (other === null) {\n\n\t\t\t\toldlayer.setEntity(id, entity);\n\n\t\t\t} else if (typeof other.entities !== 'undefined' && typeof entity.entities !== 'undefined') {\n\n\t\t\t\t_recursive_deserialize(other, entity);\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_key = function(key, name, delta) {\n\n\t\tlet focus = this.__focus;\n\t\tif (focus !== null) {\n\n\t\t\tlet result = focus.trigger('key', [ key, name, delta ]);\n\t\t\tif (result === true) {\n\n\t\t\t\tif (focus.state === 'default') {\n\t\t\t\t\tthis.__focus = null;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_reshape = function(orientation, rotation, width, height) {\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tlet position = {\n\t\t\t\tx: 1 / 2 * renderer.width,\n\t\t\t\ty: 1 / 2 * renderer.height\n\t\t\t};\n\n\n\t\t\tfor (let id in this.__layers) {\n\t\t\t\tthis.__layers[id].setPosition(position);\n\t\t\t\tthis.__layers[id].trigger('relayout');\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_scroll = function(id, direction, position, delta) {\n\n\t\tlet args = [ id, direction, {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t}, delta ];\n\n\n\t\tlet x = position.x;\n\t\tlet y = position.y;\n\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tx -= renderer.offset.x;\n\t\t\ty -= renderer.offset.y;\n\n\t\t}\n\n\n\t\tfor (let lid in this.__layers) {\n\n\t\t\tlet layer = this.__layers[lid];\n\t\t\tif (layer.visible === false) continue;\n\n\t\t\tif (lychee.interfaceof(_Ui_layer, layer)) {\n\n\t\t\t\targs[2].x = x - layer.position.x;\n\t\t\t\targs[2].y = y - layer.position.y;\n\n\n\t\t\t\tlet result = layer.trigger('scroll', args);\n\t\t\t\tif (result !== true && result !== false && result !== null) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_swipe = function(id, type, position, delta, swipe) {\n\n\t\tlet touch = this.__touches[id];\n\t\tif (touch.entity !== null) {\n\n\t\t\tif (touch.layer.visible === false) return;\n\n\n\t\t\tlet args   = [ id, type, position, delta, swipe ];\n\t\t\tlet result = false;\n\n\t\t\tlet renderer = this.renderer;\n\t\t\tif (renderer !== null) {\n\n\t\t\t\targs[2].x -= renderer.offset.x;\n\t\t\t\targs[2].y -= renderer.offset.y;\n\n\t\t\t}\n\n\n\t\t\tif (type === 'start') {\n\n\t\t\t\t_trace_entity_offset.call(\n\t\t\t\t\ttouch.offset,\n\t\t\t\t\ttouch.entity,\n\t\t\t\t\ttouch.layer\n\t\t\t\t);\n\n\n\t\t\t\targs[2].x -= touch.offset.x;\n\t\t\t\targs[2].y -= touch.offset.y;\n\t\t\t\tresult     = touch.entity.trigger('swipe', args);\n\n\t\t\t\tif (result === false) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t} else if (type === 'move') {\n\n\t\t\t\targs[2].x -= touch.offset.x;\n\t\t\t\targs[2].y -= touch.offset.y;\n\t\t\t\tresult     = touch.entity.trigger('swipe', args);\n\n\t\t\t\tif (result === false) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t} else if (type === 'end') {\n\n\t\t\t\targs[2].x -= touch.offset.x;\n\t\t\t\targs[2].y -= touch.offset.y;\n\t\t\t\tresult     = touch.entity.trigger('swipe', args);\n\n\t\t\t\tif (result === false) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _on_touch = function(id, position, delta) {\n\n\t\tlet args = [ id, {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t}, delta ];\n\n\n\t\tlet x = position.x;\n\t\tlet y = position.y;\n\n\n\t\tlet renderer = this.renderer;\n\t\tif (renderer !== null) {\n\n\t\t\tx -= renderer.offset.x;\n\t\t\ty -= renderer.offset.y;\n\n\t\t}\n\n\n\t\tlet touch_layer  = null;\n\t\tlet touch_entity = null;\n\n\t\tfor (let lid in this.__layers) {\n\n\t\t\tlet layer = this.__layers[lid];\n\t\t\tif (layer.visible === false) continue;\n\n\t\t\tif (lychee.interfaceof(_Ui_layer, layer)) {\n\n\t\t\t\targs[1].x = x - layer.position.x;\n\t\t\t\targs[1].y = y - layer.position.y;\n\n\n\t\t\t\tlet result = layer.trigger('touch', args);\n\t\t\t\tif (result !== true && result !== false && result !== null) {\n\n\t\t\t\t\ttouch_entity = result;\n\t\t\t\t\ttouch_layer  = layer;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet old_focus = this.__focus;\n\t\tlet new_focus = touch_entity;\n\n\t\t// 1. Reset Touch trace data if no Entity was touched\n\t\tif (new_focus === null) {\n\t\t\tthis.__touches[id].entity = null;\n\t\t\tthis.__touches[id].layer  = null;\n\t\t}\n\n\n\t\t// 2. Change Focus State Interaction\n\t\tif (new_focus !== old_focus) {\n\n\t\t\tif (old_focus !== null) {\n\n\t\t\t\tif (old_focus.state !== 'default') {\n\t\t\t\t\told_focus.trigger('blur');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (new_focus !== null) {\n\n\t\t\t\tif (new_focus.state === 'default') {\n\t\t\t\t\tnew_focus.trigger('focus');\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__focus = new_focus;\n\n\t\t}\n\n\n\t\t// 3. Prepare UI Swipe event\n\t\tif (touch_entity !== null) {\n\n\t\t\tlet touch = this.__touches[id];\n\n\t\t\ttouch.entity = new_focus;\n\t\t\ttouch.layer  = touch_layer;\n\n\n\t\t\t_trace_entity_offset.call(\n\t\t\t\ttouch.offset,\n\t\t\t\ttouch.entity,\n\t\t\t\ttouch.layer\n\t\t\t);\n\n\t\t}\n\n\t};\n\n\tconst _trace_entity_offset = function(entity, layer, offsetX, offsetY) {\n\n\t\tif (offsetX === undefined || offsetY === undefined) {\n\n\t\t\tthis.x  = 0;\n\t\t\tthis.y  = 0;\n\t\t\toffsetX = layer.position.x;\n\t\t\toffsetY = layer.position.y;\n\n\t\t}\n\n\n\t\tif (layer === entity) {\n\n\t\t\tthis.x = offsetX;\n\t\t\tthis.y = offsetY;\n\n\t\t\treturn true;\n\n\t\t} else if (layer.entities !== undefined) {\n\n\t\t\tlet entities = layer.entities;\n\t\t\tfor (let e = entities.length - 1; e >= 0; e--) {\n\n\t\t\t\tlet dx = layer.offset.x + entities[e].position.x;\n\t\t\t\tlet dy = layer.offset.y + entities[e].position.y;\n\n\n\t\t\t\tlet result = _trace_entity_offset.call(\n\t\t\t\t\tthis,\n\t\t\t\t\tentity,\n\t\t\t\t\tentities[e],\n\t\t\t\t\toffsetX + dx,\n\t\t\t\t\toffsetY + dy\n\t\t\t\t);\n\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(main) {\n\n\t\tthis.main     = main          || null;\n\t\tthis.client   = main.client   || null;\n\t\tthis.server   = main.server   || null;\n\n\t\tthis.input    = main.input    || null;\n\t\tthis.jukebox  = main.jukebox  || null;\n\t\tthis.loop     = main.loop     || null;\n\t\tthis.renderer = main.renderer || null;\n\t\tthis.storage  = main.storage  || null;\n\t\tthis.viewport = main.viewport || null;\n\n\n\t\tthis.__layers_map = [];\n\t\tthis.__layers     = {};\n\t\tthis.__focus      = null;\n\t\tthis.__touches    = [\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } },\n\t\t\t{ entity: null, layer: null, offset: { x: 0, y: 0 } }\n\t\t];\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tlet viewport = this.viewport;\n\t\tif (viewport !== null) {\n\t\t\tviewport.bind('reshape', _on_reshape, this);\n\t\t}\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * STATE API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.layers) {\n\n\t\t\t\tfor (let laid in blob.layers) {\n\n\t\t\t\t\tlet tmp1 = this.__layers[laid] || null;\n\t\t\t\t\tlet tmp2 = lychee.deserialize(blob.layers[laid]);\n\n\t\t\t\t\tif (tmp1 === null && tmp2 !== null) {\n\n\t\t\t\t\t\tthis.setLayer(laid, tmp2);\n\n\t\t\t\t\t} else if (tmp1 !== null && tmp2 !== null) {\n\n\t\t\t\t\t\t_recursive_deserialize.call(this, tmp1, tmp2);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = this.main !== null ? '#MAIN' : null;\n\t\t\tlet blob     = {};\n\n\n\t\t\tif (Object.keys(this.__layers).length > 0) {\n\n\t\t\t\tblob.layers = {};\n\n\t\t\t\tfor (let lid in this.__layers) {\n\t\t\t\t\tblob.layers[lid] = lychee.serialize(this.__layers[lid]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.State',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\t\tenter: function(oncomplete) {\n\n\t\t\toncomplete = oncomplete instanceof Function ? oncomplete : null;\n\n\n\t\t\tlet input = this.input;\n\t\t\tif (input !== null) {\n\t\t\t\tinput.bind('key',    _on_key,    this);\n\t\t\t\tinput.bind('scroll', _on_scroll, this);\n\t\t\t\tinput.bind('swipe',  _on_swipe,  this);\n\t\t\t\tinput.bind('touch',  _on_touch,  this);\n\t\t\t}\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\t\t},\n\n\t\tleave: function(oncomplete) {\n\n\t\t\toncomplete = oncomplete instanceof Function ? oncomplete : null;\n\n\n\t\t\tlet focus = this.__focus;\n\t\t\tif (focus !== null) {\n\t\t\t\tfocus.trigger('blur');\n\t\t\t}\n\n\n\t\t\tfor (let t = 0, tl = this.__touches.length; t < tl; t++) {\n\n\t\t\t\tlet touch = this.__touches[t];\n\t\t\t\tif (touch.entity !== null) {\n\t\t\t\t\ttouch.entity = null;\n\t\t\t\t\ttouch.layer  = null;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__focus = null;\n\n\n\t\t\tlet input = this.input;\n\t\t\tif (input !== null) {\n\t\t\t\tinput.unbind('touch',  _on_touch,  this);\n\t\t\t\tinput.unbind('swipe',  _on_swipe,  this);\n\t\t\t\tinput.unbind('scroll', _on_scroll, this);\n\t\t\t\tinput.unbind('key',    _on_key,    this);\n\t\t\t}\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\t\t},\n\n\t\trender: function(clock, delta, custom) {\n\n\t\t\tcustom = custom === true;\n\n\n\t\t\tlet renderer = this.renderer;\n\t\t\tif (renderer !== null) {\n\n\t\t\t\tif (custom === false) {\n\t\t\t\t\trenderer.clear();\n\t\t\t\t}\n\n\n\t\t\t\tlet layers_map = this.__layers_map;\n\t\t\t\tfor (let l = 0, ll = layers_map.length; l < ll; l++) {\n\n\t\t\t\t\tlet layer = this.__layers[layers_map[l]];\n\t\t\t\t\tif (layer.visible === false) continue;\n\n\t\t\t\t\tlayer.render(\n\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (custom === false) {\n\t\t\t\t\trenderer.flush();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tfor (let id in this.__layers) {\n\n\t\t\t\tlet layer = this.__layers[id];\n\t\t\t\tif (layer.visible === false) continue;\n\n\t\t\t\tlayer.update(clock, delta);\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * LAYER API\n\t\t */\n\n\t\tsetLayer: function(id, layer) {\n\n\t\t\tid    = typeof id === 'string'          ? id    : null;\n\t\t\tlayer = _validate_layer(layer) === true ? layer : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tif (layer !== null) {\n\n\t\t\t\t\tthis.__layers[id] = layer;\n\t\t\t\t\tthis.__layers_map = Object.keys(this.__layers).sort();\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetLayer: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__layers[id] !== undefined) {\n\t\t\t\treturn this.__layers[id];\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tqueryLayer: function(id, query) {\n\n\t\t\tid    = typeof id === 'string'    ? id    : null;\n\t\t\tquery = typeof query === 'string' ? query : null;\n\n\n\t\t\tif (id !== null && query !== null) {\n\n\t\t\t\tlet layer = this.getLayer(id);\n\t\t\t\tif (layer !== null) {\n\n\t\t\t\t\tlet entity = layer;\n\t\t\t\t\tlet ids    = query.split(' > ');\n\n\t\t\t\t\tfor (let i = 0, il = ids.length; i < il; i++) {\n\n\t\t\t\t\t\tentity = entity.getEntity(ids[i]);\n\n\t\t\t\t\t\tif (entity === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn entity;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremoveLayer: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__layers[id] !== undefined) {\n\n\t\t\t\tdelete this.__layers[id];\n\t\t\t\tthis.__layers_map = Object.keys(this.__layers).sort();\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Client":{"constructor":"lychee.Definition","arguments":["lychee.net.Client"],"blob":{"attaches":{},"requires":["lychee.net.client.Debugger","lychee.net.client.Stash","lychee.net.client.Storage"],"includes":["lychee.net.Tunnel"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Debugger = lychee.import('lychee.net.client.Debugger');\n\tconst _Stash    = lychee.import('lychee.net.client.Stash');\n\tconst _Storage  = lychee.import('lychee.net.client.Storage');\n\tconst _Tunnel   = lychee.import('lychee.net.Tunnel');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\t_Tunnel.call(this, settings);\n\n\t\tsettings = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tthis.bind('connect', function() {\n\t\t\t\tthis.addService(new _Debugger(this));\n\t\t\t}, this);\n\n\t\t}\n\n\n\t\tthis.bind('connect', function() {\n\n\t\t\tthis.addService(new _Stash(this));\n\t\t\tthis.addService(new _Storage(this));\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Tunnel.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Client';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Server":{"constructor":"lychee.Definition","arguments":["lychee.net.Server"],"blob":{"attaches":{},"tags":{"platform":"html"},"requires":["lychee.Storage","lychee.codec.JSON","lychee.net.Remote"],"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\t// TODO: Feature Detection of Raw TCP Socket API\n\n\treturn true;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _JSON    = lychee.import('lychee.codec.JSON');\n\tconst _Remote  = lychee.import('lychee.net.Remote');\n\tconst _Storage = lychee.import('lychee.Storage');\n\tconst _storage = new _Storage({\n\t\tid:    'server',\n\t\ttype:  _Storage.TYPE.persistent,\n\t\tmodel: {\n\t\t\tid:   '[::ffff]:1337',\n\t\t\ttype: 'client',\n\t\t\thost: '::ffff',\n\t\t\tport: 1337\n\t\t}\n\t});\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.codec  = _JSON;\n\t\tthis.host   = null;\n\t\tthis.port   = 1337;\n\t\tthis.remote = _Remote;\n\t\tthis.type   = Composite.TYPE.WS;\n\n\n\t\tthis.__isConnected = false;\n\t\tthis.__server      = null;\n\n\n\t\tthis.setCodec(settings.codec);\n\t\tthis.setHost(settings.host);\n\t\tthis.setPort(settings.port);\n\t\tthis.setType(settings.type);\n\n\n\t\t_Emitter.call(this);\n\n\t\tsettings = null;\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('connect', function(remote) {\n\n\t\t\tlet id  = (/:/g.test(remote.host) ? '[' + remote.host + ']' : remote.host) + ':' + remote.port;\n\t\t\tlet obj = _storage.create();\n\t\t\tif (obj !== null) {\n\n\t\t\t\tobj.id   = id;\n\t\t\t\tobj.type = 'client';\n\t\t\t\tobj.host = remote.host;\n\t\t\t\tobj.port = remote.port;\n\n\t\t\t\t_storage.write(id, obj);\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('disconnect', function(remote) {\n\n\t\t\tlet id  = (/:/g.test(remote.host) ? '[' + remote.host + ']' : remote.host) + ':' + remote.port;\n\t\t\tlet obj = _storage.read(id);\n\t\t\tif (obj !== null) {\n\t\t\t\t_storage.remove(id);\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tWS:   0,\n\t\tHTTP: 1,\n\t\tTCP:  2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Server';\n\n\t\t\tlet settings = {};\n\n\n\t\t\tif (this.codec !== _JSON)            settings.codec  = lychee.serialize(this.codec);\n\t\t\tif (this.host !== 'localhost')       settings.host   = this.host;\n\t\t\tif (this.port !== 1337)              settings.port   = this.port;\n\t\t\tif (this.remote !== _Remote)         settings.remote = lychee.serialize(this.remote);\n\t\t\tif (this.type !== Composite.TYPE.WS) settings.type   = this.type;\n\n\n\t\t\tdata['arguments'][0] = settings;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function() {\n\n\t\t\tif (this.__isConnected === false) {\n\n\t\t\t\tif (lychee.debug === true) {\n\t\t\t\t\tconsole.log('lychee.net.Server: Connected to ' + this.host + ':' + this.port);\n\t\t\t\t}\n\n\n\t\t\t\t// TODO: Setup HTTP Server\n\n\t\t\t\t// let that      = this;\n\t\t\t\t// let server = new _net.Server();\n\n\n\t\t\t\t// server.on('connection', function(socket) {\n\n\t\t\t\t// \tlet host   = socket.remoteAddress || socket.server._connectionKey.split(':')[1];\n\t\t\t\t// \tlet port   = socket.remotePort    || socket.server._connectionKey.split(':')[2];\n\t\t\t\t// \tlet remote = new that.remote({\n\t\t\t\t// \t\tcodec: that.codec,\n\t\t\t\t// \t\thost:  host,\n\t\t\t\t// \t\tport:  port,\n\t\t\t\t// \t\ttype:  that.type\n\t\t\t\t// \t});\n\n\n\t\t\t\t// \tremote.bind('connect', function() {\n\t\t\t\t// \t\tthat.trigger('connect', [ this ]);\n\t\t\t\t// \t});\n\n\t\t\t\t// \tremote.bind('disconnect', function() {\n\t\t\t\t// \t\tthat.trigger('disconnect', [ this ]);\n\t\t\t\t// \t});\n\n\n\t\t\t\t// \tremote.connect(socket);\n\n\t\t\t\t// });\n\n\t\t\t\t// server.on('error', function() {\n\t\t\t\t// \tthis.close();\n\t\t\t\t// });\n\n\t\t\t\t// server.on('close', function() {\n\t\t\t\t// \tthat.__isConnected = false;\n\t\t\t\t// \tthat.__server      = null;\n\t\t\t\t// });\n\n\t\t\t\t// server.listen(this.port, this.host);\n\n\n\t\t\t\t// this.__server      = server;\n\t\t\t\t// this.__isConnected = true;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tlet server = this.__server;\n\t\t\tif (server !== null) {\n\t\t\t\tserver.close();\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * TUNNEL API\n\t\t */\n\n\t\tsetCodec: function(codec) {\n\n\t\t\tcodec = lychee.interfaceof(_JSON, codec) ? codec : null;\n\n\n\t\t\tif (codec !== null) {\n\n\t\t\t\tlet oldcodec = this.codec;\n\t\t\t\tif (oldcodec !== codec) {\n\n\t\t\t\t\tthis.codec = codec;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetHost: function(host) {\n\n\t\t\thost = typeof host === 'string' ? host : null;\n\n\n\t\t\tif (host !== null) {\n\n\t\t\t\tthis.host = host;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPort: function(port) {\n\n\t\t\tport = typeof port === 'number' ? (port | 0) : null;\n\n\n\t\t\tif (port !== null) {\n\n\t\t\t\tthis.port = port;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRemote: function(remote) {\n\n\t\t\tremote = lychee.interfaceof(_Remote, remote) ? remote : null;\n\n\n\t\t\tif (remote !== null) {\n\n\t\t\t\tlet oldremote = this.remote;\n\t\t\t\tif (oldremote !== remote) {\n\n\t\t\t\t\tthis.remote = remote;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tlet oldtype = this.type;\n\t\t\t\tif (oldtype !== type) {\n\n\t\t\t\t\tthis.type = type;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.codec.JSON":{"constructor":"lychee.Definition","arguments":["lychee.codec.JSON"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _CHARS_DANGEROUS = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_ESCAPABLE = /[\\\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_META      = {\n\t\t'\\b': '\\\\b',\n\t\t'\\t': '\\\\t',\n\t\t'\\n': '\\\\n',\n\t\t'\\f': '\\\\f',\n\t\t'\\r': '',    // FUCK YOU, Microsoft!\n\t\t'\"':  '\\\\\"',\n\t\t'\\\\': '\\\\\\\\'\n\t};\n\n\tconst _sanitize_string = function(str) {\n\n\t\tlet san = str;\n\n\n\t\tif (_CHARS_ESCAPABLE.test(san)) {\n\n\t\t\tsan = san.replace(_CHARS_ESCAPABLE, function(char) {\n\n\t\t\t\tlet val = _CHARS_META[char];\n\t\t\t\tif (typeof val === 'string') {\n\t\t\t\t\treturn val;\n\t\t\t\t} else {\n\t\t\t\t\treturn '\\\\u' + (char.charCodeAt(0).toString(16)).slice(-4);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t\treturn san;\n\n\t};\n\n\n\n\tconst _Stream = function(buffer, mode) {\n\n\t\tthis.__buffer = typeof buffer === 'string'        ? buffer : '';\n\t\tthis.__mode   = lychee.enumof(_Stream.MODE, mode) ? mode   : 0;\n\n\t\tthis.__index  = 0;\n\n\t};\n\n\n\t_Stream.MODE = {\n\t\tread:  0,\n\t\twrite: 1\n\t};\n\n\n\t_Stream.prototype = {\n\n\t\ttoString: function() {\n\t\t\treturn this.__buffer;\n\t\t},\n\n\t\tpointer: function() {\n\t\t\treturn this.__index;\n\t\t},\n\n\t\tlength: function() {\n\t\t\treturn this.__buffer.length;\n\t\t},\n\n\t\tread: function(bytes) {\n\n\t\t\tlet buffer = '';\n\n\t\t\tbuffer       += this.__buffer.substr(this.__index, bytes);\n\t\t\tthis.__index += bytes;\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\tsearch: function(array) {\n\n\t\t\tlet bytes = Infinity;\n\n\t\t\tfor (let a = 0, al = array.length; a < al; a++) {\n\n\t\t\t\tlet token = array[a];\n\t\t\t\tlet size  = this.__buffer.indexOf(token, this.__index + 1) - this.__index;\n\t\t\t\tif (size > -1 && size < bytes) {\n\t\t\t\t\tbytes = size;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (bytes === Infinity) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\n\t\t\treturn bytes;\n\n\t\t},\n\n\t\tseek: function(bytes) {\n\t\t\treturn this.__buffer.substr(this.__index, bytes);\n\t\t},\n\n\t\twrite: function(buffer) {\n\n\t\t\tthis.__buffer += buffer;\n\t\t\tthis.__index  += buffer.length;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * ENCODER and DECODER\n\t */\n\n\tconst _encode = function(stream, data) {\n\n\t\t// null,false,true: Boolean or Null or EOS\n\t\tif (typeof data === 'boolean' || data === null) {\n\n\t\t\tif (data === null) {\n\t\t\t\tstream.write('null');\n\t\t\t} else if (data === false) {\n\t\t\t\tstream.write('false');\n\t\t\t} else if (data === true) {\n\t\t\t\tstream.write('true');\n\t\t\t}\n\n\n\t\t// 123,12.3: Integer or Float\n\t\t} else if (typeof data === 'number') {\n\n\t\t\tlet type = 1;\n\t\t\tif (data < 268435456 && data !== (data | 0)) {\n\t\t\t\ttype = 2;\n\t\t\t}\n\n\n\t\t\t// Negative value\n\t\t\tlet sign = 0;\n\t\t\tif (data < 0) {\n\t\t\t\tdata = -data;\n\t\t\t\tsign = 1;\n\t\t\t}\n\n\n\t\t\tif (sign === 1) {\n\t\t\t\tstream.write('-');\n\t\t\t}\n\n\n\t\t\tif (type === 1) {\n\t\t\t\tstream.write('' + data.toString());\n\t\t\t} else {\n\t\t\t\tstream.write('' + data.toString());\n\t\t\t}\n\n\n\t\t// \"\": String\n\t\t} else if (typeof data === 'string') {\n\n\t\t\tdata = _sanitize_string(data);\n\n\n\t\t\tstream.write('\"');\n\n\t\t\tstream.write(data);\n\n\t\t\tstream.write('\"');\n\n\n\t\t// []: Array\n\t\t} else if (data instanceof Array) {\n\n\t\t\tstream.write('[');\n\n\t\t\tfor (let d = 0, dl = data.length; d < dl; d++) {\n\n\t\t\t\t_encode(stream, data[d]);\n\n\t\t\t\tif (d < dl - 1) {\n\t\t\t\t\tstream.write(',');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstream.write(']');\n\n\n\t\t// {}: Object\n\t\t} else if (data instanceof Object && typeof data.serialize !== 'function') {\n\n\t\t\tstream.write('{');\n\n\t\t\tlet keys = Object.keys(data);\n\n\t\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\t\tlet key = keys[k];\n\n\t\t\t\t_encode(stream, key);\n\t\t\t\tstream.write(':');\n\n\t\t\t\t_encode(stream, data[key]);\n\n\t\t\t\tif (k < kl - 1) {\n\t\t\t\t\tstream.write(',');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstream.write('}');\n\n\n\t\t// Custom High-Level Implementation\n\t\t} else if (data instanceof Object && typeof data.serialize === 'function') {\n\n\t\t\tstream.write('%');\n\n\t\t\tlet blob = lychee.serialize(data);\n\n\t\t\t_encode(stream, blob);\n\n\t\t\tstream.write('%');\n\n\t\t}\n\n\t};\n\n\tconst _decode = function(stream) {\n\n\t\tlet value  = undefined;\n\t\tlet seek   = '';\n\t\tlet size   = 0;\n\t\tlet tmp    = 0;\n\t\tlet errors = 0;\n\t\tlet check  = null;\n\n\n\t\tif (stream.pointer() < stream.length()) {\n\n\t\t\tseek = stream.seek(1);\n\n\n\t\t\t// null,false,true: Boolean or Null or EOS\n\t\t\tif (seek === 'n' || seek === 'f' || seek === 't') {\n\n\t\t\t\tif (stream.seek(4) === 'null') {\n\t\t\t\t\tstream.read(4);\n\t\t\t\t\tvalue = null;\n\t\t\t\t} else if (stream.seek(5) === 'false') {\n\t\t\t\t\tstream.read(5);\n\t\t\t\t\tvalue = false;\n\t\t\t\t} else if (stream.seek(4) === 'true') {\n\t\t\t\t\tstream.read(4);\n\t\t\t\t\tvalue = true;\n\t\t\t\t}\n\n\n\t\t\t// 123: Number\n\t\t\t} else if (seek === '-' || !isNaN(parseInt(seek, 10))) {\n\n\t\t\t\tsize = stream.search([ ',', ']', '}' ]);\n\n\t\t\t\tif (size > 0) {\n\n\t\t\t\t\ttmp = stream.read(size);\n\n\t\t\t\t\tif (tmp.indexOf('.') !== -1) {\n\t\t\t\t\t\tvalue = parseFloat(tmp, 10);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = parseInt(tmp, 10);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t// \"\": String\n\t\t\t} else if (seek === '\"') {\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\tsize = stream.search([ '\\\\', '\"' ]);\n\n\t\t\t\tif (size > 0) {\n\t\t\t\t\tvalue = stream.read(size);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\n\n\t\t\t\tcheck = stream.read(1);\n\n\n\t\t\t\twhile (check === '\\\\') {\n\n\t\t\t\t\tvalue[value.length - 1] = check;\n\n\t\t\t\t\tlet special = stream.seek(1);\n\t\t\t\t\tif (special === 'b') {\n\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\tvalue += '\\b';\n\n\t\t\t\t\t} else if (special === 't') {\n\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\tvalue += '\\t';\n\n\t\t\t\t\t} else if (special === 'n') {\n\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\tvalue += '\\n';\n\n\t\t\t\t\t} else if (special === 'f') {\n\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\tvalue += '\\f';\n\n\t\t\t\t\t} else if (special === '\"') {\n\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\tvalue += '\"';\n\n\t\t\t\t\t} else if (special === '\\\\') {\n\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\tvalue += '\\\\';\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tsize   = stream.search([ '\\\\', '\"' ]);\n\t\t\t\t\tvalue += stream.read(size);\n\t\t\t\t\tcheck  = stream.read(1);\n\n\t\t\t\t}\n\n\n\t\t\t// []: Array\n\t\t\t} else if (seek === '[') {\n\n\t\t\t\tvalue = [];\n\n\n\t\t\t\tsize  = stream.search([ ']' ]);\n\t\t\t\tcheck = stream.read(1).trim() + stream.seek(size).trim();\n\n\t\t\t\tif (check !== '[]') {\n\n\t\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\t\tvalue.push(_decode(stream));\n\n\t\t\t\t\t\tcheck = stream.seek(1);\n\n\t\t\t\t\t\tif (check === ',') {\n\t\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t\t} else if (check === ']') {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\terrors++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstream.read(1);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstream.read(size);\n\n\t\t\t\t}\n\n\n\t\t\t// {}: Object\n\t\t\t} else if (seek === '{') {\n\n\t\t\t\tvalue = {};\n\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tif (stream.seek(1) === '}') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\n\t\t\t\t\tlet object_key = _decode(stream);\n\t\t\t\t\tcheck = stream.seek(1);\n\n\t\t\t\t\tif (check === '}') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (check === ':') {\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t} else if (check !== ':') {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet object_value = _decode(stream);\n\t\t\t\t\tcheck = stream.seek(1);\n\n\n\t\t\t\t\tvalue[object_key] = object_value;\n\n\n\t\t\t\t\tif (check === '}') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (check === ',') {\n\t\t\t\t\t\tstream.read(1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstream.read(1);\n\n\t\t\t// %%: Custom High-Level Implementation\n\t\t\t} else if (seek === '%') {\n\n\t\t\t\tstream.read(1);\n\n\t\t\t\tlet blob = _decode(stream);\n\n\t\t\t\tvalue = lychee.deserialize(blob);\n\t\t\t\tcheck = stream.read(1);\n\n\t\t\t\tif (check !== '%') {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Invalid seek, assume it's a space character\n\n\t\t\t\tstream.read(1);\n\t\t\t\treturn _decode(stream);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn value;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Module = {\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'reference': 'lychee.codec.JSON',\n\t\t\t\t'blob':      null\n\t\t\t};\n\n\t\t},\n\n\t\tencode: function(data) {\n\n\t\t\tdata = data instanceof Object ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream('', _Stream.MODE.write);\n\n\t\t\t\t_encode(stream, data);\n\n\t\t\t\treturn new Buffer(stream.toString(), 'utf8');\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tdecode: function(data) {\n\n\t\t\tdata = data instanceof Buffer ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream(data.toString('utf8'), _Stream.MODE.read);\n\t\t\t\tlet object = _decode(stream);\n\t\t\t\tif (object !== undefined) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Module;\n\n}"}},"lychee.math.Mersenne":{"constructor":"lychee.Definition","arguments":["lychee.math.Mersenne"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\tconst _UPPER_MASK = 0x80000000;\n\tconst _LOWER_MASK = 0x7fffffff;\n\tconst _XOR_MATRIX = new Array(0x0, 0x9908b0df);\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _initialize = function(seed) {\n\n\t\tlet index   = 1;\n\t\tlet N       = this.N;\n\t\tlet twister = this.twister;\n\n\n\t\ttwister[0] = seed >>> 0;\n\n\n\t\twhile (index < N) {\n\n\t\t\tlet value = twister[index - 1] ^ (twister[index - 1] >>> 30);\n\n\t\t\ttwister[index] = (((((value & 0xffff0000) >>> 16) * 1812433253) << 16) + (value & 0x0000ffff) * 1812433253) + index;\n\t\t\ttwister[index] >>>= 0;\n\n\t\t\tindex++;\n\n\t\t}\n\n\t\tthis.index = index;\n\n\t};\n\n\tconst _random_int32 = function() {\n\n\t\tlet index   = this.index;\n\t\tlet twister = this.twister;\n\t\tlet value   = 0;\n\t\tlet M       = this.M;\n\t\tlet N       = this.N;\n\n\n\t\tif (index >= N) {\n\n\t\t\tlet i = 0;\n\n\t\t\tif (index === N + 1) {\n\t\t\t\t_initialize.call(this, 5489);\n\t\t\t}\n\n\n\t\t\twhile (i < N - M) {\n\n\t\t\t\tvalue      = (twister[i] & _UPPER_MASK) | (twister[i + 1] & _LOWER_MASK);\n\t\t\t\ttwister[i] = twister[i + M] ^ (value >>> 1) ^ _XOR_MATRIX[value & 0x1];\n\n\t\t\t\ti++;\n\n\t\t\t}\n\n\t\t\twhile (i < N - 1) {\n\n\t\t\t\tvalue      = (twister[i] & _UPPER_MASK) | (twister[i + 1] & _LOWER_MASK);\n\t\t\t\ttwister[i] = twister[i + (M - N)] ^ (value >>> 1) ^ _XOR_MATRIX[value & 0x1];\n\n\t\t\t\ti++;\n\n\t\t\t}\n\n\n\t\t\tvalue          = (twister[N - 1] & _UPPER_MASK) | (twister[0] & _LOWER_MASK);\n\t\t\ttwister[N - 1] = twister[M - 1] ^ (value >>> 1) ^ _XOR_MATRIX[value & 0x1];\n\n\t\t\tthis.index = 0;\n\n\t\t}\n\n\n\t\tvalue = twister[this.index++];\n\n\t\tvalue ^= (value >>> 11);\n\t\tvalue ^= (value  <<  7) & 0x9d2c5680;\n\t\tvalue ^= (value  << 15) & 0xefc60000;\n\t\tvalue ^= (value >>> 18);\n\n\n\t\treturn value >>> 0;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(seed) {\n\n\t\tseed = typeof seed === 'number' ? (seed | 0) : ((Math.random() * Number.MAX_SAFE_INTEGER) | 0);\n\n\n\t\tthis.N = 624;\n\t\tthis.M = 397;\n\n\t\tthis.twister = new Array(this.N);\n\t\tthis.index   = this.N + 1;\n\n\t\tthis.__seed  = seed;\n\n\n\t\t_initialize.call(this, seed);\n\n\t\tseed = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.math.Mersenne',\n\t\t\t\t'arguments':   [ this.__seed ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\trandom: function() {\n\n\t\t\treturn (_random_int32.call(this) * (1.0 / 4294967296.0));\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.state.Game":{"constructor":"lychee.Definition","arguments":["game.state.Game"],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy/source/state/Game.json"],"blob":{"buffer":"data:application/json;base64,ewoJImxheWVycyI6IHsKCQkiYmciOiB7CgkJCSJjb25zdHJ1Y3RvciI6ICJseWNoZWUuYXBwLkxheWVyIiwKCQkJImFyZ3VtZW50cyI6IFsKCQkJCXt9CgkJCV0sCgkJCSJibG9iIjogewoJCQkJImVudGl0aWVzIjogWwoJCQkJCXsKCQkJCQkJImNvbnN0cnVjdG9yIjogImdhbWUudWkuc3ByaXRlLkJhY2tncm91bmQiLAoJCQkJCQkiYXJndW1lbnRzIjogWwoJCQkJCQkJe30KCQkJCQkJXQoJCQkJCX0KCQkJCV0sCgkJCQkibWFwIjogewoJCQkJCSJiYWNrZ3JvdW5kIjogMAoJCQkJfQoJCQl9CgkJfSwKCQkiZ2FtZSI6IHsKCQkJImNvbnN0cnVjdG9yIjogImx5Y2hlZS5hcHAuTGF5ZXIiLAoJCQkiYXJndW1lbnRzIjogWwoJCQkJe30KCQkJXQoJCX0sCgkJInVpIjogewoJCQkiY29uc3RydWN0b3IiOiAibHljaGVlLnVpLkxheWVyIiwKCQkJImFyZ3VtZW50cyI6IFsKCQkJCXt9CgkJCV0sCgkJCSJibG9iIjogewoJCQkJImVudGl0aWVzIjogWwoJCQkJCXsKCQkJCQkJImNvbnN0cnVjdG9yIjogImx5Y2hlZS51aS5lbnRpdHkuTGFiZWwiLAoJCQkJCQkiYXJndW1lbnRzIjogWwoJCQkJCQkJewoJCQkJCQkJCSJ2YWx1ZSI6ICJHZW5lcmF0aW9uIDEgLSBTY29yZSAwIiwKCQkJCQkJCQkicG9zaXRpb24iOiB7CgkJCQkJCQkJCSJ4IjogMCwKCQkJCQkJCQkJInkiOiAtNjQKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCV0KCQkJCQl9CgkJCQldLAoJCQkJIm1hcCI6IHsKCQkJCQkiaW5mbyI6IDAKCQkJCX0KCQkJfQoJCX0KCX0KfQ=="}}},"requires":["lychee.math.Mersenne","lychee.ui.entity.Label","game.effect.Explosion","game.entity.Goal","game.entity.Plane","game.ui.sprite.Background"],"includes":["lychee.app.State"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Explosion  = lychee.import('game.effect.Explosion');\n\tconst _Goal       = lychee.import('game.entity.Goal');\n\tconst _Mersenne   = lychee.import('lychee.math.Mersenne');\n\tconst _Plane      = lychee.import('game.entity.Plane');\n\tconst _State      = lychee.import('lychee.app.State');\n\tconst _BLOB       = attachments[\"json\"].buffer;\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _on_touch = function(id, position, delta) {\n\n\t\tlet plane = this.__cache.planes[0] || null;\n\t\tif (plane !== null) {\n\t\t\tplane.flap();\n\t\t}\n\n\t};\n\n\tconst _get_next_goal = function(plane) {\n\n\t\tlet distance = Infinity;\n\t\tlet found    = null;\n\t\tlet goals    = this.__cache.goals;\n\t\tlet px       = plane.position.x;\n\t\tlet py       = plane.position.y;\n\n\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\n\t\t\tlet goal = goals[g];\n\t\t\tlet gx   = goal.position.x;\n\t\t\tlet gy   = goal.position.y;\n\n\t\t\tlet dist = Math.sqrt(Math.pow(gx - px, 2) + Math.pow(gy - py, 2));\n\t\t\tif (dist < distance) {\n\t\t\t\tfound    = goal;\n\t\t\t\tdistance = dist;\n\t\t\t}\n\n\t\t}\n\n\t\treturn found;\n\n\t};\n\n\tconst _reset_game = function() {\n\n\t\tlet stats = this.__statistics;\n\n\n\t\tstats.generation++;\n\t\tstats.highscore = Math.max(stats.highscore, stats.score);\n\t\tstats.score     = 0;\n\n\n\t\tthis.twister = new _Mersenne(1337);\n\n\n\t\t_reset_goals.call(this, true);\n\t\t_reset_planes.call(this, true);\n\n\t};\n\n\tconst _reset_goals = function(complete) {\n\n\t\tcomplete = complete === true;\n\n\n\t\tlet goals   = this.__cache.goals;\n\t\tlet twister = this.twister;\n\t\tlet width   = this.renderer.width;\n\t\tlet height  = this.renderer.height;\n\n\t\tlet offsetx =  1 / 2 * width;\n\t\tlet offsety = -1 / 2 * height + 128;\n\n\t\tif (complete === true) {\n\n\t\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\t\t\t\tgoals[g].position.x = -4096;\n\t\t\t}\n\n\t\t}\n\n\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\t\t\toffsetx = Math.max(offsetx, goals[g].position.x);\n\t\t}\n\n\n\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\n\t\t\tlet goal = goals[g];\n\t\t\tif (goal.position.x < -1 / 2 * width) {\n\t\t\t\tgoal.position.x = offsetx;\n\t\t\t\tgoal.position.y = offsety + (twister.random() * (height - 256)) | 0;\n\t\t\t\toffsetx += 256;\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _reset_planes = function(complete) {\n\n\t\tcomplete = complete === true;\n\n\n\t\tlet planes = this.__cache.planes;\n\t\tlet width  = this.renderer.width;\n\n\t\tif (complete === true) {\n\n\t\t\tfor (let p = 0, pl = planes.length; p < pl; p++) {\n\n\t\t\t\tlet plane = planes[p];\n\n\t\t\t\tplane.position.x = -1 / 2 * width + plane.width;\n\t\t\t\tplane.position.y = 0;\n\t\t\t\tplane.velocity.y = 0;\n\t\t\t\tplane.alive      = true;\n\t\t\t\tplane.__canflap  = true;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(main) {\n\n\t\t_State.call(this, main);\n\n\n\t\tthis.twister = new _Mersenne(1337);\n\n\n\t\tthis.__cache = {\n\t\t\tbackground: null,\n\t\t\tgoals:      [],\n\t\t\tinfo:       null,\n\t\t\tplanes:     []\n\t\t};\n\n\t\tthis.__statistics = {\n\t\t\tgeneration: 1,\n\t\t\tscore:      0,\n\t\t\thighscore:  0\n\t\t};\n\n\n\t\tthis.deserialize(_BLOB);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tlet viewport = this.viewport;\n\t\tif (viewport !== null) {\n\n\t\t\tviewport.bind('reshape', function(orientation, rotation) {\n\n\t\t\t\tlet renderer = this.renderer;\n\t\t\t\tif (renderer !== null) {\n\n\t\t\t\t\tlet entity = null;\n\t\t\t\t\tlet width  = renderer.width;\n\t\t\t\t\tlet height = renderer.height;\n\n\n\t\t\t\t\tentity = this.queryLayer('bg', 'background');\n\t\t\t\t\tentity.trigger('reshape', [ null, null, width, height ]);\n\t\t\t\t\tthis.__cache.background = entity;\n\n\t\t\t\t\tentity = this.queryLayer('ui', 'info');\n\t\t\t\t\tentity.setPosition({\n\t\t\t\t\t\ty: -1 / 2 * height + 32\n\t\t\t\t\t});\n\t\t\t\t\tthis.__cache.info = entity;\n\n\t\t\t\t}\n\n\t\t\t}, this);\n\n\t\t}\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _State.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.state.Game';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\tdeserialize: function(blob) {\n\n\t\t\t_State.prototype.deserialize.call(this, blob);\n\n\n\t\t\tlet cache    = this.__cache;\n\t\t\tlet renderer = this.renderer;\n\t\t\tlet layer    = this.getLayer('game');\n\n\t\t\tif (renderer !== null && layer !== null) {\n\n\t\t\t\tlet plane = new _Plane();\n\n\t\t\t\tlayer.addEntity(plane);\n\t\t\t\tcache.planes.push(plane);\n\n\t\t\t\t_reset_planes.call(this);\n\n\n\t\t\t\tfor (let g = 0; g < (renderer.width / 256); g++) {\n\t\t\t\t\tlet goal = new _Goal();\n\t\t\t\t\tcache.goals.push(goal);\n\t\t\t\t\tlayer.addEntity(goal);\n\t\t\t\t}\n\n\t\t\t\t_reset_goals.call(this);\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tenter: function(oncomplete) {\n\n\t\t\t_reset_game.call(this);\n\n\n\t\t\tlet input = this.input;\n\t\t\tif (input !== null) {\n\t\t\t\tinput.bind('touch', _on_touch, this);\n\t\t\t}\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\t\t},\n\n\t\tleave: function(oncomplete) {\n\n\t\t\tlet input = this.input;\n\t\t\tif (input !== null) {\n\t\t\t\tinput.unbind('touch', _on_touch, this);\n\t\t\t}\n\n\n\t\t\tif (oncomplete !== null) {\n\t\t\t\toncomplete(true);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tfor (let id in this.__layers) {\n\n\t\t\t\tif (id === 'ai') continue;\n\n\t\t\t\tlet layer = this.__layers[id];\n\t\t\t\tif (layer.visible === false) continue;\n\n\t\t\t\tlayer.update(clock, delta);\n\n\t\t\t}\n\n\n\t\t\tlet cache  = this.__cache;\n\t\t\tlet stats  = this.__statistics;\n\t\t\tlet width  = this.renderer.width;\n\t\t\tlet height = this.renderer.height;\n\n\n\t\t\tlet background = cache.background;\n\t\t\tif (background !== null) {\n\n\t\t\t\tlet origin = background.origin.x - (delta / 1000) * 128;\n\t\t\t\tbackground.origin.x  = (origin % background.width) | 0;\n\t\t\t\tbackground.__isDirty = true;\n\n\t\t\t}\n\n\n\t\t\tlet is_alive = false;\n\t\t\tlet goals    = cache.goals;\n\t\t\tlet planes   = cache.planes;\n\n\t\t\tlet next_goal = _get_next_goal.call(this, planes[0]);\n\t\t\tif (next_goal !== null) {\n\n\t\t\t\tfor (let p = 0, pl = planes.length; p < pl; p++) {\n\n\t\t\t\t\tlet plane = planes[p];\n\t\t\t\t\tif (plane.alive === true) {\n\n\t\t\t\t\t\tif (plane.position.y > 1 / 2 * height || next_goal.collidesWith(plane) === true) {\n\n\t\t\t\t\t\t\tif (plane.effects.length === 0) {\n\t\t\t\t\t\t\t\tplane.addEffect(new _Explosion({\n\t\t\t\t\t\t\t\t\tposition: plane.position\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tplane.alive = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (plane.alive === true) {\n\t\t\t\t\t\tis_alive = true;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (is_alive === true) {\n\n\t\t\t\tstats.score += ((delta / 1000) * 256) | 0;\n\n\n\t\t\t\tlet info = this.__cache.info;\n\t\t\t\tif (info !== null) {\n\t\t\t\t\tinfo.setValue('Generation ' + stats.generation + ' - Score ' + stats.score);\n\t\t\t\t}\n\n\t\t\t\tfor (let g = 0, gl = goals.length; g < gl; g++) {\n\n\t\t\t\t\tif (goals[g].position.x < -1 / 2 * width) {\n\t\t\t\t\t\t_reset_goals.call(this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_reset_game.call(this);\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.Layer":{"constructor":"lychee.Definition","arguments":["lychee.ai.Layer"],"blob":{"attaches":{},"requires":["lychee.ai.Agent","lychee.ai.bnn.Agent","lychee.ai.enn.Agent","lychee.ai.neat.Agent"],"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Agent   = lychee.import('lychee.ai.Agent');\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _agent   = {\n\t\tENN:       lychee.import('lychee.ai.enn.Agent'),\n\t\tBNN:       lychee.import('lychee.ai.bnn.Agent'),\n\t\tNEAT:      lychee.import('lychee.ai.neat.Agent'),\n\t\tBNEAT:     lychee.import('lychee.ai.bneat.Agent'),\n\t\tHYPERNEAT: lychee.import('lychee.ai.hyperneat.Agent')\n\t};\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_agent = function(agent) {\n\n\t\tif (agent instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof agent.update === 'function'\n\t\t\t\t&& typeof agent.crossover === 'function'\n\t\t\t\t&& typeof agent.fitness === 'number'\n\t\t\t\t&& typeof agent.reward === 'function'\n\t\t\t\t&& typeof agent.punish === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _create_agent = function() {\n\n\t\tlet Agent = _Agent;\n\t\tlet type  = this.type;\n\t\tif (type === Composite.TYPE.CUSTOM) {\n\n\t\t\tlet template = lychee.serialize(this.agents[0]);\n\t\t\tif (template !== null) {\n\t\t\t\tAgent = lychee.import(template['constructor']);\n\t\t\t}\n\n\t\t} else if (type === Composite.TYPE.ENN) {\n\t\t\tAgent = _agent.ENN;\n\t\t} else if (type === Composite.TYPE.BNN) {\n\t\t\tAgent = _agent.BNN;\n\t\t} else if (type === Composite.TYPE.NEAT) {\n\t\t\tAgent = _agent.NEAT;\n\t\t} else if (type === Composite.TYPE.BNEAT) {\n\t\t\tAgent = _agent.BNEAT;\n\t\t} else if (type === Composite.TYPE.HYPERNEAT) {\n\t\t\tAgent = _agent.HYPERNEAT;\n\t\t}\n\n\n\t\treturn new Agent();\n\n\t};\n\n\n\tconst _on_epoche = function() {\n\n\t\tlet agents  = this.agents;\n\t\tlet fitness = this.__fitness;\n\n\n\t\tfitness.total   = 0;\n\t\tfitness.average = 0;\n\t\tfitness.best    = -Infinity;\n\t\tfitness.worst   = Infinity;\n\n\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\tlet agent = agents[a];\n\n\t\t\tfitness.total += agent.fitness;\n\t\t\tfitness.best   = Math.max(fitness.best,  agent.fitness);\n\t\t\tfitness.worst  = Math.min(fitness.worst, agent.fitness);\n\n\t\t}\n\n\n\t\t// Worst Case: All Agents are retards\n\t\tif (fitness.total !== 0) {\n\t\t\tfitness.average = fitness.total / agents.length;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet old_a      = 0;\n\t\tlet new_agents = [];\n\t\tlet old_agents = agents.slice(0).sort(function(a, b) {\n\t\t\tif (a.fitness > b.fitness) return -1;\n\t\t\tif (a.fitness < b.fitness) return  1;\n\t\t\treturn 0;\n\t\t});\n\n\n\t\tif (old_agents.length > 8) {\n\n\t\t\tlet partition = Math.round(0.2 * old_agents.length);\n\t\t\tif (partition % 2 === 1) {\n\t\t\t\tpartition++;\n\t\t\t}\n\n\n\t\t\t// Survivor Population\n\t\t\tfor (let p = 0; p < partition; p++) {\n\t\t\t\tnew_agents.push(old_agents[p]);\n\t\t\t\told_a++;\n\t\t\t}\n\n\n\t\t\t// Mutant Population\n\t\t\tfor (let p = 0; p < partition; p++) {\n\n\t\t\t\tlet agent = _create_agent.call(this);\n\n\t\t\t\tagent.brain.setSensors(old_agents[old_a].brain.sensors);\n\t\t\t\tagent.brain.setControls(old_agents[old_a].brain.controls);\n\n\t\t\t\tnew_agents.push(agent);\n\t\t\t\told_a++;\n\n\t\t\t}\n\n\n\t\t\t// Breed Population\n\t\t\tlet b       = 0;\n\t\t\tlet b_tries = 0;\n\n\t\t\twhile (new_agents.length < old_agents.length) {\n\n\t\t\t\tlet agent_mum = old_agents[b];\n\t\t\t\tlet agent_dad = old_agents[b + 1];\n\t\t\t\tlet children  = agent_mum.crossover(agent_dad);\n\n\t\t\t\tif (children !== null) {\n\n\t\t\t\t\tlet agent_sis = children[0];\n\t\t\t\t\tlet agent_bro = children[1];\n\n\t\t\t\t\tif (new_agents.indexOf(agent_sis) === -1) {\n\n\t\t\t\t\t\tagent_sis.brain.setSensors(old_agents[old_a].brain.sensors);\n\t\t\t\t\t\tagent_sis.brain.setControls(old_agents[old_a].brain.controls);\n\n\t\t\t\t\t\tnew_agents.push(agent_sis);\n\t\t\t\t\t\told_a++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (new_agents.indexOf(agent_bro) === -1) {\n\n\t\t\t\t\t\tagent_bro.brain.setSensors(old_agents[old_a].brain.sensors);\n\t\t\t\t\t\tagent_bro.brain.setControls(old_agents[old_a].brain.controls);\n\n\t\t\t\t\t\tnew_agents.push(agent_bro);\n\t\t\t\t\t\told_a++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tb += 1;\n\t\t\t\tb %= partition;\n\n\t\t\t\tb_tries++;\n\n\n\t\t\t\t// XXX: Not enough Agents for healthy Evolution\n\t\t\t\tif (b_tries > old_agents.length) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (new_agents.length < old_agents.length) {\n\n\t\t\tif (lychee.debug === true) {\n\t\t\t\tconsole.warn('lychee.ai.Layer: Not enough Agents for healthy Evolution');\n\t\t\t}\n\n\t\t\tlet diff = old_agents.length - new_agents.length;\n\n\t\t\tfor (let o = 0; o < old_agents.length; o++) {\n\n\t\t\t\tlet old_agent = old_agents[o];\n\t\t\t\tif (new_agents.indexOf(old_agent) === -1) {\n\n\t\t\t\t\tlet other = old_agents[old_a];\n\t\t\t\t\tif (other !== old_agent) {\n\t\t\t\t\t\told_agent.brain.setSensors(other.brain.sensors);\n\t\t\t\t\t\told_agent.brain.setControls(other.brain.controls);\n\t\t\t\t\t}\n\n\t\t\t\t\told_agent.fitness = 0;\n\n\t\t\t\t\tnew_agents.push(old_agent);\n\t\t\t\t\told_a++;\n\t\t\t\t\tdiff--;\n\n\t\t\t\t}\n\n\n\t\t\t\tif (diff === 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// XXX: Don't break references\n\t\tfor (let n = 0, nl = new_agents.length; n < nl; n++) {\n\t\t\tthis.agents[n] = new_agents[n];\n\t\t\tthis.agents[n].alive = true;\n\t\t}\n\n\n\t\tnew_agents = null;\n\t\told_agents = null;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\t// XXX: Keep Layer API compatibility\n\t\tthis.width    = 0;\n\t\tthis.height   = 0;\n\t\tthis.depth    = 0;\n\t\tthis.radius   = 0;\n\t\tthis.alpha    = 1;\n\t\tthis.entities = [];\n\t\tthis.position = { x: 0, y: 0, z: 0 };\n\t\tthis.visible  = true;\n\n\n\t\tthis.agents = [];\n\t\tthis.type   = Composite.TYPE.CUSTOM;\n\n\t\tthis.__fitness = {\n\t\t\ttotal:    0,\n\t\t\taverage:  0,\n\t\t\tbest:    -Infinity,\n\t\t\tworst:    Infinity\n\t\t};\n\t\tthis.__map     = {};\n\n\n\t\tthis.setAgents(settings.agents);\n\n\t\tif (lychee.enumof(Composite.TYPE, settings.type) && this.type !== settings.type) {\n\t\t\tthis.setType(settings.type);\n\t\t} else {\n\t\t\tthis.trigger('epoche');\n\t\t}\n\n\n\t\t_Emitter.call(this);\n\n\t\tsettings = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('epoche', _on_epoche, this);\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tCUSTOM:    0,\n\t\tENN:       1,\n\t\tBNN:       2,\n\t\tNEAT:      3,\n\t\tBNEAT:     4,\n\t\tHYPERNEAT: 5\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ai.Layer';\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.type !== Composite.TYPE.ENN) settings.type = this.type;\n\n\n\t\t\tif (this.agents.length > 0) {\n\t\t\t\tblob.agents = this.agents.map(lychee.serialize);\n\t\t\t}\n\n\t\t\tif (blob.agents instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.agents.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\t\t\t// XXX: Do nothing\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet agents   = this.agents;\n\t\t\tlet is_alive = false;\n\t\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\t\tlet agent = agents[a];\n\t\t\t\tif (agent.alive === true) {\n\t\t\t\t\tagent.update(clock, delta);\n\t\t\t\t\tis_alive = true;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (is_alive === false) {\n\t\t\t\tthis.trigger('epoche');\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\taddAgent: function(agent) {\n\n\t\t\tagent = _validate_agent(agent) === true ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\tlet index = this.agents.indexOf(agent);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.agents.push(agent);\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAgent: function(id, agent) {\n\n\t\t\tid    = typeof id === 'string'          ? id    : null;\n\t\t\tagent = _validate_agent(agent) === true ? agent : null;\n\n\n\t\t\tif (id !== null && agent !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = agent;\n\n\t\t\t\tlet result = this.addAgent(agent);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetAgent: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet num = parseInt(id, 10);\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t} else if (isNaN(num) === false) {\n\t\t\t\t\tfound = this.agents[num] || null;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveAgent: function(agent) {\n\n\t\t\tagent = _validate_agent(agent) === true ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tlet index = this.agents.indexOf(agent);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.agents.splice(index, 1);\n\t\t\t\t\tfound = true;\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === agent) {\n\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAgents: function(agents) {\n\n\t\t\tagents = agents instanceof Array ? agents : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (agents !== null) {\n\n\t\t\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\t\t\tlet result = this.addAgent(agents[a]);\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveAgents: function() {\n\n\t\t\tlet agents = this.agents;\n\n\t\t\tfor (let a = 0, al = agents.length; a < al; a++) {\n\n\t\t\t\tthis.removeAgent(agents[a]);\n\n\t\t\t\tal--;\n\t\t\t\ta--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tlet oldtype = this.type;\n\t\t\t\tif (oldtype !== type) {\n\n\t\t\t\t\tthis.type = type;\n\t\t\t\t\tthis.trigger('epoche');\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Layer":{"constructor":"lychee.Definition","arguments":["lychee.app.Layer"],"blob":{"attaches":{},"requires":["lychee.app.Entity"],"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _Entity  = lychee.import('lychee.app.Entity');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_entity = function(entity) {\n\n\t\tif (entity instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof entity.update === 'function'\n\t\t\t\t&& typeof entity.render === 'function'\n\t\t\t\t&& typeof entity.shape === 'number'\n\t\t\t\t&& typeof entity.isAtPosition === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _project_layer = function(mode) {\n\n\t\tlet grid       = this.grid;\n\t\tlet projection = this.projection;\n\n\n\t\tif (mode === true) {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = x * grid.width;\n\t\t\t\t\ty = y * grid.height;\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = (x - y) * grid.width;\n\t\t\t\t\ty = (x + y) * (grid.height / 2);\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t} else {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = x / grid.width;\n\t\t\t\t\ty = y / grid.height;\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = (y / grid.height) + (x / (2 * grid.width));\n\t\t\t\t\ty = (y / grid.height) - (x / (2 * grid.width));\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t}\n\n\t};\n\n\tconst _on_relayout = function() {\n\n\t\tif (this.__project === true) {\n\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t} else {\n\n\t\t\t_project_layer.call(this, false);\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t}\n\n\n\t\tif (this.__relayout === true) {\n\n\t\t\tlet hwidth  = this.width  / 2;\n\t\t\tlet hheight = this.height / 2;\n\t\t\tlet hdepth  = this.depth  / 2;\n\n\t\t\tfor (let e = 0, el = this.entities.length; e < el; e++) {\n\n\t\t\t\tlet entity = this.entities[e];\n\t\t\t\tif (typeof entity.trigger === 'function') {\n\t\t\t\t\tentity.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\tlet boundx = Math.abs(entity.position.x + this.offset.x);\n\t\t\t\tlet boundy = Math.abs(entity.position.y + this.offset.y);\n\t\t\t\tlet boundz = Math.abs(entity.position.z + this.offset.z);\n\n\t\t\t\tif (entity.shape === _Entity.SHAPE.circle) {\n\t\t\t\t\tboundx += entity.radius;\n\t\t\t\t\tboundy += entity.radius;\n\t\t\t\t\tboundz += entity.radius;\n\t\t\t\t} else if (entity.shape === _Entity.SHAPE.rectangle) {\n\t\t\t\t\tboundx += entity.width  / 2;\n\t\t\t\t\tboundy += entity.height / 2;\n\t\t\t\t\tboundz += entity.depth  / 2;\n\t\t\t\t}\n\n\t\t\t\thwidth  = Math.max(hwidth,  boundx);\n\t\t\t\thheight = Math.max(hheight, boundy);\n\t\t\t\thdepth  = Math.max(hdepth,  boundz);\n\n\t\t\t}\n\n\n\t\t\tthis.width  = hwidth  * 2;\n\t\t\tthis.height = hheight * 2;\n\t\t\tthis.depth  = hdepth  * 2;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof settings.width  === 'number' ? settings.width  : 0;\n\t\tthis.height = typeof settings.height === 'number' ? settings.height : 0;\n\t\tthis.depth  = typeof settings.depth === 'number'  ? settings.depth  : 0;\n\t\tthis.radius = typeof settings.radius === 'number' ? settings.radius : 0;\n\n\t\tthis.alpha      = 1;\n\t\tthis.effects    = [];\n\t\tthis.entities   = [];\n\t\tthis.grid       = { width: 0, height: 0, depth: 0 };\n\t\tthis.offset     = { x: 0, y: 0, z: 0 };\n\t\tthis.position   = { x: 0, y: 0, z: 0 };\n\t\tthis.projection = Composite.PROJECTION.pixel;\n\t\tthis.shape      = _Entity.SHAPE.rectangle;\n\t\tthis.visible    = true;\n\n\t\tthis.__map      = {};\n\t\tthis.__project  = true;\n\t\tthis.__relayout = true;\n\n\n\t\tthis.setAlpha(settings.alpha);\n\t\tthis.setEntities(settings.entities);\n\t\tthis.setGrid(settings.grid);\n\t\tthis.setOffset(settings.offset);\n\t\tthis.setProjection(settings.projection);\n\t\tthis.setPosition(settings.position);\n\t\tthis.setRelayout(settings.relayout);\n\t\tthis.setVisible(settings.visible);\n\n\n\t\t_Emitter.call(this);\n\n\t\tsettings = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('relayout', _on_relayout, this);\n\n\t};\n\n\n\tComposite.PROJECTION = {\n\t\tpixel:    0,\n\t\ttile:     1,\n\t\tisometry: 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.entities instanceof Array) {\n\n\t\t\t\tlet entities = [];\n\t\t\t\tlet map      = {};\n\n\t\t\t\tfor (let be = 0, bel = blob.entities.length; be < bel; be++) {\n\t\t\t\t\tentities.push(lychee.deserialize(blob.entities[be]));\n\t\t\t\t}\n\n\n\t\t\t\tif (blob.map instanceof Object) {\n\n\t\t\t\t\tfor (let bid in blob.map) {\n\n\t\t\t\t\t\tlet index = blob.map[bid];\n\t\t\t\t\t\tif (typeof index === 'number') {\n\t\t\t\t\t\t\tmap[bid] = index;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet id = null;\n\t\t\t\t\tfor (let mid in map) {\n\n\t\t\t\t\t\tif (map[mid] === e) {\n\t\t\t\t\t\t\tid = mid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (id !== null) {\n\t\t\t\t\t\tthis.setEntity(id, entities[e]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addEntity(entities[e]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (blob.project === false) {\n\t\t\t\tthis.__project = false;\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Layer';\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.width  !== 0) settings.width  = this.width;\n\t\t\tif (this.height !== 0) settings.height = this.height;\n\t\t\tif (this.depth !== 0)  settings.depth  = this.depth;\n\t\t\tif (this.radius !== 0) settings.radius = this.radius;\n\n\n\t\t\tif (this.grid.width !== 0 || this.grid.height !== 0 || this.grid.depth !== 0) {\n\n\t\t\t\tsettings.grid = {};\n\n\t\t\t\tif (this.grid.width !== 0)  settings.grid.width  = this.grid.width;\n\t\t\t\tif (this.grid.height !== 0) settings.grid.height = this.grid.height;\n\t\t\t\tif (this.grid.depth !== 0)  settings.grid.depth  = this.grid.depth;\n\n\t\t\t}\n\n\t\t\tif (this.offset.x !== 0 || this.offset.y !== 0 || this.offset.z !== 0) {\n\n\t\t\t\tsettings.offset = {};\n\n\t\t\t\tif (this.offset.x !== 0) settings.offset.x = this.offset.x;\n\t\t\t\tif (this.offset.y !== 0) settings.offset.y = this.offset.y;\n\t\t\t\tif (this.offset.z !== 0) settings.offset.z = this.offset.z;\n\n\t\t\t}\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0 || this.position.z !== 0) {\n\n\t\t\t\tsettings.position = {};\n\n\t\t\t\tif (this.position.x !== 0) settings.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) settings.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== 0) settings.position.z = this.position.z;\n\n\t\t\t}\n\n\t\t\tif (this.alpha !== 1)                               settings.alpha      = this.alpha;\n\t\t\tif (this.__project !== true)                        blob.project        = this.__project;\n\t\t\tif (this.projection !== Composite.PROJECTION.pixel) settings.projection = this.projection;\n\t\t\tif (this.__relayout !== true)                       settings.relayout   = this.__relayout;\n\t\t\tif (this.visible !== true)                          settings.visible    = this.visible;\n\n\n\t\t\tif (this.entities.length > 0) {\n\t\t\t\tblob.entities = this.entities.map(lychee.serialize);\n\t\t\t}\n\n\n\t\t\tif (blob.entities instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.entities.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\t\t\tlet offset   = this.offset;\n\n\n\t\t\tlet ox = position.x + offsetX + offset.x;\n\t\t\tlet oy = position.y + offsetY + offset.y;\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let en = 0, enl = entities.length; en < enl; en++) {\n\n\t\t\t\tentities[en].render(\n\t\t\t\t\trenderer,\n\t\t\t\t\tox,\n\t\t\t\t\toy\n\t\t\t\t);\n\n\t\t\t}\n\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let ef = 0, efl = effects.length; ef < efl; ef++) {\n\t\t\t\teffects[ef].render(renderer, offsetX, offsetY);\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\n\t\t\tif (lychee.debug === true) {\n\n\t\t\t\tox = position.x + offsetX;\n\t\t\t\toy = position.y + offsetY;\n\n\n\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\tlet hheight = this.height / 2;\n\n\n\t\t\t\trenderer.drawBox(\n\t\t\t\t\tox - hwidth,\n\t\t\t\t\toy - hheight,\n\t\t\t\t\tox + hwidth,\n\t\t\t\t\toy + hheight,\n\t\t\t\t\t'#ffff00',\n\t\t\t\t\tfalse,\n\t\t\t\t\t1\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let en = 0, enl = entities.length; en < enl; en++) {\n\t\t\t\tentities[en].update(clock, delta);\n\t\t\t}\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let ef = 0, efl = effects.length; ef < efl; ef++) {\n\n\t\t\t\tlet effect = effects[ef];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tefl--;\n\t\t\t\t\tef--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === _Entity.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === _Entity.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = (typeof alpha === 'number' && alpha >= 0 && alpha <= 1) ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = alpha;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\taddEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet index = this.entities.indexOf(entity);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.entities.push(entity);\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntity: function(id, entity) {\n\n\t\t\tid     = typeof id === 'string'            ? id     : null;\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (id !== null && entity !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = entity;\n\n\t\t\t\tlet result = this.addEntity(entity);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetEntity: function(id, position) {\n\n\t\t\tid       = typeof id === 'string'     ? id       : null;\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet num = parseInt(id, 10);\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t} else if (isNaN(num) === false) {\n\t\t\t\t\tfound = this.entities[num] || null;\n\t\t\t\t}\n\n\t\t\t} else if (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tfor (let e = this.entities.length - 1; e >= 0; e--) {\n\n\t\t\t\t\t\tlet entity = this.entities[e];\n\t\t\t\t\t\tif (entity.visible === false) continue;\n\n\t\t\t\t\t\tif (entity.isAtPosition(position) === true) {\n\t\t\t\t\t\t\tfound = entity;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tlet index = this.entities.indexOf(entity);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.entities.splice(index, 1);\n\t\t\t\t\tfound = true;\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === entity) {\n\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === true) {\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntities: function(entities) {\n\n\t\t\tentities = entities instanceof Array ? entities : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (entities !== null) {\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet result = this.addEntity(entities[e]);\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveEntities: function() {\n\n\t\t\tlet entities = this.entities;\n\n\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\tthis.removeEntity(entities[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetGrid: function(grid) {\n\n\t\t\tif (grid instanceof Object) {\n\n\t\t\t\tthis.grid.width  = typeof grid.width === 'number'  ? grid.width  : this.grid.width;\n\t\t\t\tthis.grid.height = typeof grid.height === 'number' ? grid.height : this.grid.height;\n\t\t\t\tthis.grid.depth  = typeof grid.depth === 'number'  ? grid.depth  : this.grid.depth;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetOffset: function(offset) {\n\n\t\t\tif (offset instanceof Object) {\n\n\t\t\t\tthis.offset.x = typeof offset.x === 'number' ? offset.x : this.offset.x;\n\t\t\t\tthis.offset.y = typeof offset.y === 'number' ? offset.y : this.offset.y;\n\t\t\t\tthis.offset.z = typeof offset.z === 'number' ? offset.z : this.offset.z;\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetProjection: function(projection) {\n\n\t\t\tprojection = lychee.enumof(Composite.PROJECTION, projection) ? projection : null;\n\n\n\t\t\tif (projection !== null) {\n\n\t\t\t\tthis.projection = projection;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRelayout: function(relayout) {\n\n\t\t\tif (relayout === true || relayout === false) {\n\n\t\t\t\tthis.__relayout = relayout;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVisible: function(visible) {\n\n\t\t\tif (visible === true || visible === false) {\n\n\t\t\t\tthis.visible = visible;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.Layer":{"constructor":"lychee.Definition","arguments":["lychee.ui.Layer"],"blob":{"attaches":{},"requires":["lychee.ui.Entity"],"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _Entity  = lychee.import('lychee.ui.Entity');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_entity = function(entity) {\n\n\t\tif (entity instanceof Object) {\n\n\t\t\tif (\n\t\t\t\ttypeof entity.update === 'function'\n\t\t\t\t&& typeof entity.render === 'function'\n\t\t\t\t&& typeof entity.shape === 'number'\n\t\t\t\t&& typeof entity.isAtPosition === 'function'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _project_layer = function(mode) {\n\n\t\tlet grid       = this.grid;\n\t\tlet projection = this.projection;\n\n\n\t\tif (mode === true) {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = x * grid.width;\n\t\t\t\t\ty = y * grid.height;\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w * grid.width;\n\t\t\t\t\th = h * grid.height;\n\t\t\t\t\td = d * grid.depth;\n\t\t\t\t\tx = (x - y) * grid.width;\n\t\t\t\t\ty = (x + y) * (grid.height / 2);\n\t\t\t\t\tz = z * grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t} else {\n\n\t\t\tthis.entities.forEach(function(entity) {\n\n\t\t\t\tlet w = entity.width;\n\t\t\t\tlet h = entity.height;\n\t\t\t\tlet d = entity.depth;\n\t\t\t\tlet x = entity.position.x;\n\t\t\t\tlet y = entity.position.y;\n\t\t\t\tlet z = entity.position.z;\n\n\n\t\t\t\tif (projection === Composite.PROJECTION.tile) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = x / grid.width;\n\t\t\t\t\ty = y / grid.height;\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t} else if (projection === Composite.PROJECTION.isometry) {\n\n\t\t\t\t\tw = w / grid.width;\n\t\t\t\t\th = h / grid.height;\n\t\t\t\t\td = d / grid.depth;\n\t\t\t\t\tx = (y / grid.height) + (x / (2 * grid.width));\n\t\t\t\t\ty = (y / grid.height) - (x / (2 * grid.width));\n\t\t\t\t\tz = z / grid.depth;\n\n\t\t\t\t}\n\n\n\t\t\t\tentity.width      = w;\n\t\t\t\tentity.height     = h;\n\t\t\t\tentity.depth      = d;\n\t\t\t\tentity.position.x = x;\n\t\t\t\tentity.position.y = y;\n\t\t\t\tentity.position.z = z;\n\n\t\t\t});\n\n\t\t}\n\n\t};\n\n\tconst _on_relayout = function() {\n\n\t\tif (this.__project === true) {\n\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t} else {\n\n\t\t\t_project_layer.call(this, false);\n\t\t\t_project_layer.call(this, true);\n\n\t\t\tthis.__project = false;\n\n\t\t}\n\n\n\t\tif (this.__relayout === true) {\n\n\t\t\tlet hwidth  = this.width  / 2;\n\t\t\tlet hheight = this.height / 2;\n\t\t\tlet hdepth  = this.depth  / 2;\n\n\t\t\tfor (let e = 0, el = this.entities.length; e < el; e++) {\n\n\t\t\t\tlet entity = this.entities[e];\n\t\t\t\tif (typeof entity.trigger === 'function') {\n\t\t\t\t\tentity.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\tlet boundx = Math.abs(entity.position.x + this.offset.x);\n\t\t\t\tlet boundy = Math.abs(entity.position.y + this.offset.y);\n\t\t\t\tlet boundz = Math.abs(entity.position.z + this.offset.z);\n\n\t\t\t\tif (entity.shape === _Entity.SHAPE.circle) {\n\t\t\t\t\tboundx += entity.radius;\n\t\t\t\t\tboundy += entity.radius;\n\t\t\t\t\tboundz += entity.radius;\n\t\t\t\t} else if (entity.shape === _Entity.SHAPE.rectangle) {\n\t\t\t\t\tboundx += entity.width  / 2;\n\t\t\t\t\tboundy += entity.height / 2;\n\t\t\t\t\tboundz += entity.depth  / 2;\n\t\t\t\t}\n\n\t\t\t\thwidth  = Math.max(hwidth,  boundx);\n\t\t\t\thheight = Math.max(hheight, boundy);\n\t\t\t\thdepth  = Math.max(hdepth,  boundz);\n\n\t\t\t}\n\n\n\t\t\tthis.width  = hwidth  * 2;\n\t\t\tthis.height = hheight * 2;\n\t\t\tthis.depth  = hdepth  * 2;\n\n\t\t}\n\n\t};\n\n\tconst _on_scroll = function(id, direction, position, delta) {\n\n\t\tif (this.visible === false) return null;\n\n\n\t\tlet triggered = null;\n\t\tlet args      = [ id, direction, {\n\t\t\tx: position.x - this.offset.x,\n\t\t\ty: position.y - this.offset.y\n\t\t}, delta ];\n\n\n\t\tlet entity = this.getEntity(null, args[2]);\n\t\tif (entity !== null) {\n\n\t\t\tif (typeof entity.trigger === 'function') {\n\n\t\t\t\targs[2].x -= entity.position.x;\n\t\t\t\targs[2].y -= entity.position.y;\n\n\t\t\t\tlet result = entity.trigger('scroll', args);\n\t\t\t\tif (result === true) {\n\t\t\t\t\ttriggered = entity;\n\t\t\t\t} else if (result !== false) {\n\t\t\t\t\ttriggered = result;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn triggered;\n\n\t};\n\n\tconst _on_touch = function(id, position, delta) {\n\n\t\tif (this.visible === false) return null;\n\n\n\t\tlet triggered = null;\n\t\tlet args      = [ id, {\n\t\t\tx: position.x - this.offset.x,\n\t\t\ty: position.y - this.offset.y\n\t\t}, delta ];\n\n\n\t\tlet entity = this.getEntity(null, args[1]);\n\t\tif (entity !== null) {\n\n\t\t\tif (typeof entity.trigger === 'function') {\n\n\t\t\t\targs[1].x -= entity.position.x;\n\t\t\t\targs[1].y -= entity.position.y;\n\n\t\t\t\tlet result = entity.trigger('touch', args);\n\t\t\t\tif (result === true) {\n\t\t\t\t\ttriggered = entity;\n\t\t\t\t} else if (result !== false) {\n\t\t\t\t\ttriggered = result;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn triggered;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof settings.width  === 'number' ? settings.width  : 0;\n\t\tthis.height = typeof settings.height === 'number' ? settings.height : 0;\n\t\tthis.depth  = typeof settings.depth === 'number'  ? settings.depth  : 0;\n\t\tthis.radius = typeof settings.radius === 'number' ? settings.radius : 0;\n\n\t\tthis.alpha      = 1;\n\t\tthis.effects    = [];\n\t\tthis.entities   = [];\n\t\tthis.grid       = { width: 0, height: 0, depth: 0 };\n\t\tthis.offset     = { x: 0, y: 0, z: 0 };\n\t\tthis.position   = { x: 0, y: 0, z: 0 };\n\t\tthis.projection = Composite.PROJECTION.pixel;\n\t\tthis.shape      = _Entity.SHAPE.rectangle;\n\t\tthis.visible    = true;\n\n\t\tthis.__map      = {};\n\t\tthis.__project  = true;\n\t\tthis.__relayout = true;\n\n\n\t\tthis.setAlpha(settings.alpha);\n\t\tthis.setEntities(settings.entities);\n\t\tthis.setGrid(settings.grid);\n\t\tthis.setOffset(settings.offset);\n\t\tthis.setProjection(settings.projection);\n\t\tthis.setPosition(settings.position);\n\t\tthis.setRelayout(settings.relayout);\n\t\tthis.setVisible(settings.visible);\n\n\n\t\t_Emitter.call(this);\n\n\t\tsettings = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('scroll',   _on_scroll,   this);\n\t\tthis.bind('touch',    _on_touch,    this);\n\t\tthis.bind('relayout', _on_relayout, this);\n\n\t};\n\n\n\tComposite.PROJECTION = {\n\t\tpixel:    0,\n\t\ttile:     1,\n\t\tisometry: 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.entities instanceof Array) {\n\n\t\t\t\tlet entities = [];\n\t\t\t\tlet map      = {};\n\n\t\t\t\tfor (let be = 0, bel = blob.entities.length; be < bel; be++) {\n\t\t\t\t\tentities.push(lychee.deserialize(blob.entities[be]));\n\t\t\t\t}\n\n\n\t\t\t\tif (blob.map instanceof Object) {\n\n\t\t\t\t\tfor (let bid in blob.map) {\n\n\t\t\t\t\t\tlet index = blob.map[bid];\n\t\t\t\t\t\tif (typeof index === 'number') {\n\t\t\t\t\t\t\tmap[bid] = index;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet id = null;\n\t\t\t\t\tfor (let mid in map) {\n\n\t\t\t\t\t\tif (map[mid] === e) {\n\t\t\t\t\t\t\tid = mid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (id !== null) {\n\t\t\t\t\t\tthis.setEntity(id, entities[e]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addEntity(entities[e]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (blob.project === false) {\n\t\t\t\tthis.__project = false;\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.Layer';\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.width  !== 0) settings.width  = this.width;\n\t\t\tif (this.height !== 0) settings.height = this.height;\n\t\t\tif (this.depth !== 0)  settings.depth  = this.depth;\n\t\t\tif (this.radius !== 0) settings.radius = this.radius;\n\n\n\t\t\tif (this.grid.width !== 0 || this.grid.height !== 0 || this.grid.depth !== 0) {\n\n\t\t\t\tsettings.grid = {};\n\n\t\t\t\tif (this.grid.width !== 0)  settings.grid.width  = this.grid.width;\n\t\t\t\tif (this.grid.height !== 0) settings.grid.height = this.grid.height;\n\t\t\t\tif (this.grid.depth !== 0)  settings.grid.depth  = this.grid.depth;\n\n\t\t\t}\n\n\t\t\tif (this.offset.x !== 0 || this.offset.y !== 0 || this.offset.z !== 0) {\n\n\t\t\t\tsettings.offset = {};\n\n\t\t\t\tif (this.offset.x !== 0) settings.offset.x = this.offset.x;\n\t\t\t\tif (this.offset.y !== 0) settings.offset.y = this.offset.y;\n\t\t\t\tif (this.offset.z !== 0) settings.offset.z = this.offset.z;\n\n\t\t\t}\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0 || this.position.z !== 0) {\n\n\t\t\t\tsettings.position = {};\n\n\t\t\t\tif (this.position.x !== 0) settings.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) settings.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== 0) settings.position.z = this.position.z;\n\n\t\t\t}\n\n\t\t\tif (this.alpha !== 1)                               settings.alpha      = this.alpha;\n\t\t\tif (this.__project !== true)                        blob.project        = this.__project;\n\t\t\tif (this.projection !== Composite.PROJECTION.pixel) settings.projection = this.projection;\n\t\t\tif (this.__relayout !== true)                       settings.relayout   = this.__relayout;\n\t\t\tif (this.visible !== true)                          settings.visible    = this.visible;\n\n\n\t\t\tif (this.entities.length > 0) {\n\t\t\t\tblob.entities = this.entities.map(lychee.serialize);\n\t\t\t}\n\n\n\t\t\tif (blob.entities instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.entities.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\t\t\tlet offset   = this.offset;\n\n\n\t\t\tlet ox = position.x + offsetX + offset.x;\n\t\t\tlet oy = position.y + offsetY + offset.y;\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\tentities[e].render(\n\t\t\t\t\trenderer,\n\t\t\t\t\tox,\n\t\t\t\t\toy\n\t\t\t\t);\n\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\n\t\t\tif (lychee.debug === true) {\n\n\t\t\t\tox = position.x + offsetX;\n\t\t\t\toy = position.y + offsetY;\n\n\n\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\tlet hheight = this.height / 2;\n\n\n\t\t\t\trenderer.drawBox(\n\t\t\t\t\tox - hwidth,\n\t\t\t\t\toy - hheight,\n\t\t\t\t\tox + hwidth,\n\t\t\t\t\toy + hheight,\n\t\t\t\t\t'#ff00ff',\n\t\t\t\t\tfalse,\n\t\t\t\t\t1\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet entities = this.entities;\n\t\t\tfor (let en = 0, enl = entities.length; en < enl; en++) {\n\t\t\t\tentities[en].update(clock, delta);\n\t\t\t}\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let ef = 0, efl = effects.length; ef < efl; ef++) {\n\n\t\t\t\tlet effect = effects[ef];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tefl--;\n\t\t\t\t\tef--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === _Entity.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === _Entity.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = (typeof alpha === 'number' && alpha >= 0 && alpha <= 1) ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = alpha;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\taddEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet index = this.entities.indexOf(entity);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.entities.push(entity);\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntity: function(id, entity) {\n\n\t\t\tid     = typeof id === 'string'            ? id     : null;\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (id !== null && entity !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = entity;\n\n\t\t\t\tlet result = this.addEntity(entity);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetEntity: function(id, position) {\n\n\t\t\tid        = typeof id === 'string'    ? id       : null;\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tlet num = parseInt(id, 10);\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t} else if (isNaN(num) === false) {\n\t\t\t\t\tfound = this.entities[num] || null;\n\t\t\t\t}\n\n\t\t\t} else if (position !== null) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tfor (let e = this.entities.length - 1; e >= 0; e--) {\n\n\t\t\t\t\t\tlet entity = this.entities[e];\n\t\t\t\t\t\tif (entity.visible === false) continue;\n\n\t\t\t\t\t\tif (entity.isAtPosition(position) === true) {\n\t\t\t\t\t\t\tfound = entity;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveEntity: function(entity) {\n\n\t\t\tentity = _validate_entity(entity) === true ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tfor (let e = 0, el = this.entities.length; e < el; e++) {\n\n\t\t\t\t\tif (this.entities[e] === entity) {\n\t\t\t\t\t\tthis.entities.splice(e, 1);\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tel--;\n\t\t\t\t\t\te--;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === entity) {\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === true) {\n\n\t\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetEntities: function(entities) {\n\n\t\t\tentities = entities instanceof Array ? entities : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (entities !== null) {\n\n\t\t\t\tthis.entities = [];\n\n\t\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\t\tlet result = this.addEntity(entities[e]);\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveEntities: function() {\n\n\t\t\tlet entities = this.entities;\n\n\t\t\tfor (let e = 0, el = entities.length; e < el; e++) {\n\n\t\t\t\tthis.removeEntity(entities[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetGrid: function(grid) {\n\n\t\t\tif (grid instanceof Object) {\n\n\t\t\t\tthis.grid.width  = typeof grid.width === 'number'  ? grid.width  : this.grid.width;\n\t\t\t\tthis.grid.height = typeof grid.height === 'number' ? grid.height : this.grid.height;\n\t\t\t\tthis.grid.depth  = typeof grid.depth === 'number'  ? grid.depth  : this.grid.depth;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetOffset: function(offset) {\n\n\t\t\tif (offset instanceof Object) {\n\n\t\t\t\tthis.offset.x = typeof offset.x === 'number' ? offset.x : this.offset.x;\n\t\t\t\tthis.offset.y = typeof offset.y === 'number' ? offset.y : this.offset.y;\n\t\t\t\tthis.offset.z = typeof offset.z === 'number' ? offset.z : this.offset.z;\n\n\t\t\t\tif (this.__relayout === true) {\n\t\t\t\t\tthis.trigger('relayout');\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetProjection: function(projection) {\n\n\t\t\tprojection = lychee.enumof(Composite.PROJECTION, projection) ? projection : null;\n\n\n\t\t\tif (projection !== null) {\n\n\t\t\t\tthis.projection = projection;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetRelayout: function(relayout) {\n\n\t\t\tif (relayout === true || relayout === false) {\n\n\t\t\t\tthis.__relayout = relayout;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVisible: function(visible) {\n\n\t\t\tif (visible === true || visible === false) {\n\n\t\t\t\tthis.visible = visible;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Tunnel":{"constructor":"lychee.Definition","arguments":["lychee.net.Tunnel"],"blob":{"attaches":{},"requires":["lychee.net.socket.HTTP","lychee.net.socket.WS","lychee.codec.BENCODE","lychee.codec.BITON","lychee.codec.JSON","lychee.net.Service"],"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _socket  = lychee.import('lychee.net.socket');\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\tconst _Service = lychee.import('lychee.net.Service');\n\tconst _BENCODE = lychee.import('lychee.codec.BENCODE');\n\tconst _BITON   = lychee.import('lychee.codec.BITON');\n\tconst _JSON    = lychee.import('lychee.codec.JSON');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _plug_service = function(id, service) {\n\n\t\tid = typeof id === 'string' ? id : null;\n\n\t\tif (id === null || service === null) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet found = false;\n\n\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\tthis.__services.waiting.splice(w, 1);\n\t\t\t\tfound = true;\n\t\t\t\twl--;\n\t\t\t\tw--;\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (found === true) {\n\n\t\t\tthis.__services.active.push(service);\n\n\t\t\tservice.trigger('plug');\n\n\t\t\tif (lychee.debug === true) {\n\t\t\t\tconsole.log('lychee.net.Tunnel: Remote plugged in Service (' + id + ')');\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _unplug_service = function(id, service) {\n\n\t\tid = typeof id === 'string' ? id : null;\n\n\t\tif (id === null || service === null) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet found = false;\n\n\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\tthis.__services.waiting.splice(w, 1);\n\t\t\t\tfound = true;\n\t\t\t\twl--;\n\t\t\t\tw--;\n\t\t\t}\n\n\t\t}\n\n\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\tif (this.__services.active[a] === service) {\n\t\t\t\tthis.__services.active.splice(a, 1);\n\t\t\t\tfound = true;\n\t\t\t\tal--;\n\t\t\t\ta--;\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (found === true) {\n\n\t\t\tservice.trigger('unplug');\n\n\t\t\tif (lychee.debug === true) {\n\t\t\t\tconsole.log('lychee.net.Tunnel: Remote unplugged Service (' + id + ')');\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.id        = 'localhost:1337';\n\t\tthis.codec     = lychee.interfaceof(_JSON, settings.codec) ? settings.codec : _JSON;\n\t\tthis.host      = 'localhost';\n\t\tthis.port      = 1337;\n\t\tthis.reconnect = 0;\n\t\tthis.type      = Composite.TYPE.WS;\n\n\n\t\tthis.__isConnected = false;\n\t\tthis.__socket      = null;\n\t\tthis.__services    = {\n\t\t\twaiting: [],\n\t\t\tactive:  []\n\t\t};\n\n\n\t\tthis.setHost(settings.host);\n\t\tthis.setPort(settings.port);\n\t\tthis.setReconnect(settings.reconnect);\n\t\tthis.setType(settings.type);\n\n\n\t\t_Emitter.call(this);\n\n\t\tsettings = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('connect', function() {\n\n\t\t\tthis.__isConnected = true;\n\n\t\t}, this);\n\n\t\tthis.bind('send', function(payload, headers) {\n\n\t\t\tif (this.__socket !== null) {\n\t\t\t\tthis.__socket.send(payload, headers);\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('disconnect', function() {\n\n\t\t\tthis.__isConnected = false;\n\n\n\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\t\t\t\tthis.__services.active[a].trigger('unplug');\n\t\t\t}\n\n\t\t\tthis.__services.active  = [];\n\t\t\tthis.__services.waiting = [];\n\n\n\t\t\tif (this.reconnect > 0) {\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tthis.trigger('connect');\n\t\t\t\t}.bind(this), this.reconnect);\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\tWS:   0,\n\t\tHTTP: 1,\n\t\tTCP:  2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet socket = lychee.deserialize(blob.socket);\n\t\t\tif (socket !== null) {\n\t\t\t\tthis.__socket = socket;\n\t\t\t}\n\n\n\t\t\tif (blob.services instanceof Array) {\n\n\t\t\t\tfor (let s = 0, sl = blob.services.length; s < sl; s++) {\n\t\t\t\t\tthis.addService(lychee.deserialize(blob.services[s]));\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Tunnel';\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.codec !== _JSON)            settings.codec     = lychee.serialize(this.codec);\n\t\t\tif (this.host !== 'localhost')       settings.host      = this.host;\n\t\t\tif (this.port !== 1337)              settings.port      = this.port;\n\t\t\tif (this.reconnect !== 0)            settings.reconnect = this.reconnect;\n\t\t\tif (this.type !== Composite.TYPE.WS) settings.type      = this.type;\n\n\n\t\t\tif (this.__socket !== null) blob.socket = lychee.serialize(this.__socket);\n\n\n\t\t\tif (this.__services.active.length > 0) {\n\n\t\t\t\tblob.services = [];\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tlet service = this.__services.active[a];\n\n\t\t\t\t\tblob.services.push(lychee.serialize(service));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function(connection) {\n\n\t\t\tconnection = typeof connection === 'object' ? connection : null;\n\n\n\t\t\tif (this.__isConnected === false) {\n\n\t\t\t\tlet type = this.type;\n\t\t\t\tif (type === Composite.TYPE.WS) {\n\t\t\t\t\tthis.__socket = new _socket.WS();\n\t\t\t\t} else if (type === Composite.TYPE.HTTP) {\n\t\t\t\t\tthis.__socket = new _socket.HTTP();\n\t\t\t\t} else if (type === Composite.TYPE.TCP) {\n\t\t\t\t\tthis.__socket = new _socket.TCP();\n\t\t\t\t}\n\n\n\t\t\t\tthis.__socket.bind('connect', function() {\n\t\t\t\t\tthis.trigger('connect');\n\t\t\t\t}, this);\n\n\t\t\t\tthis.__socket.bind('receive', function(payload, headers) {\n\t\t\t\t\tthis.receive(payload, headers);\n\t\t\t\t}, this);\n\n\t\t\t\tthis.__socket.bind('disconnect', function() {\n\t\t\t\t\tthis.disconnect();\n\t\t\t\t}, this);\n\n\t\t\t\tthis.__socket.bind('error', function() {\n\t\t\t\t\tthis.setReconnect(0);\n\t\t\t\t\tthis.disconnect();\n\t\t\t\t}, this);\n\n\n\t\t\t\tthis.__socket.connect(this.host, this.port, connection);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tif (this.__isConnected === true) {\n\n\t\t\t\tlet socket = this.__socket;\n\t\t\t\tif (socket !== null) {\n\n\t\t\t\t\tsocket.unbind('connect');\n\t\t\t\t\tsocket.unbind('receive');\n\t\t\t\t\tsocket.unbind('disconnect');\n\t\t\t\t\tsocket.unbind('error');\n\t\t\t\t\tsocket.disconnect();\n\t\t\t\t\tthis.__socket = null;\n\n\t\t\t\t}\n\n\n\t\t\t\tthis.trigger('disconnect');\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsend: function(data, headers) {\n\n\t\t\tdata    = data instanceof Object    ? data    : null;\n\t\t\theaders = headers instanceof Object ? headers : {};\n\n\n\t\t\tif (data === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tif (typeof headers.id     === 'string') headers['@service-id']     = headers.id;\n\t\t\tif (typeof headers.event  === 'string') headers['@service-event']  = headers.event;\n\t\t\tif (typeof headers.method === 'string') headers['@service-method'] = headers.method;\n\n\n\t\t\tdelete headers.id;\n\t\t\tdelete headers.event;\n\t\t\tdelete headers.method;\n\n\n\t\t\tlet payload = null;\n\t\t\tif (data !== null) {\n\t\t\t\tpayload = this.codec.encode(data);\n\t\t\t}\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tthis.trigger('send', [ payload, headers ]);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\treceive: function(payload, headers) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : {};\n\n\n\t\t\tlet id     = headers['@service-id']     || null;\n\t\t\tlet event  = headers['@service-event']  || null;\n\t\t\tlet method = headers['@service-method'] || null;\n\n\t\t\tlet data = null;\n\t\t\tif (payload.length === 0) {\n\t\t\t\tpayload = this.codec.encode({});\n\t\t\t}\n\n\t\t\tif (payload !== null) {\n\t\t\t\tdata = this.codec.decode(payload);\n\t\t\t}\n\n\n\t\t\tlet instance = this.getService(id);\n\t\t\tif (instance !== null && data !== null) {\n\n\t\t\t\tif (method === '@plug' || method === '@unplug') {\n\n\t\t\t\t\tif (method === '@plug') {\n\t\t\t\t\t\t_plug_service.call(this,   id, instance);\n\t\t\t\t\t} else if (method === '@unplug') {\n\t\t\t\t\t\t_unplug_service.call(this, id, instance);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (method !== null) {\n\n\t\t\t\t\tif (typeof instance[method] === 'function') {\n\t\t\t\t\t\tinstance[method](data);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (event !== null) {\n\n\t\t\t\t\tif (typeof instance.trigger === 'function') {\n\t\t\t\t\t\tinstance.trigger(event, [ data ]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.trigger('receive', [ data, headers ]);\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetHost: function(host) {\n\n\t\t\thost = typeof host === 'string' ? host : null;\n\n\n\t\t\tif (host !== null) {\n\n\t\t\t\tthis.id   = (/:/g.test(host) ? '[' + host + ']' : host) + ':' + this.port;\n\t\t\t\tthis.host = host;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetPort: function(port) {\n\n\t\t\tport = typeof port === 'number' ? (port | 0) : null;\n\n\n\t\t\tif (port !== null) {\n\n\t\t\t\tthis.id   = (/:/g.test(this.host) ? '[' + this.host + ']' : this.host) + ':' + port;\n\t\t\t\tthis.port = port;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetReconnect: function(reconnect) {\n\n\t\t\treconnect = typeof reconnect === 'number' ? (reconnect | 0) : null;\n\n\n\t\t\tif (reconnect !== null) {\n\n\t\t\t\tthis.reconnect = reconnect;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddService: function(service) {\n\n\t\t\tservice = lychee.interfaceof(_Service, service) ? service : null;\n\n\n\t\t\tif (service !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tif (this.__services.active[a] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === false) {\n\n\t\t\t\t\tthis.__services.waiting.push(service);\n\n\t\t\t\t\tthis.send({}, {\n\t\t\t\t\t\tid:     service.id,\n\t\t\t\t\t\tmethod: '@plug'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetService: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\t\t\tlet wservice = this.__services.waiting[w];\n\t\t\t\t\tif (wservice.id === id) {\n\t\t\t\t\t\treturn wservice;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tlet aservice = this.__services.active[a];\n\t\t\t\t\tif (aservice.id === id) {\n\t\t\t\t\t\treturn aservice;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tremoveService: function(service) {\n\n\t\t\tservice = lychee.interfaceof(_Service, service) ? service : null;\n\n\n\t\t\tif (service !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tfor (let w = 0, wl = this.__services.waiting.length; w < wl; w++) {\n\n\t\t\t\t\tif (this.__services.waiting[w] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor (let a = 0, al = this.__services.active.length; a < al; a++) {\n\n\t\t\t\t\tif (this.__services.active[a] === service) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tif (found === true) {\n\n\t\t\t\t\tthis.send({}, {\n\t\t\t\t\t\tid:     service.id,\n\t\t\t\t\t\tmethod: '@unplug'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveServices: function() {\n\n\t\t\tthis.__services.waiting.slice(0).forEach(function(service) {\n\t\t\t\t_unplug_service.call(this, service.id, service);\n\t\t\t}.bind(this));\n\n\t\t\tthis.__services.active.slice(0).forEach(function(service) {\n\t\t\t\t_unplug_service.call(this, service.id, service);\n\t\t\t}.bind(this));\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetType: function(type) {\n\n\t\t\ttype = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\n\t\t\tif (type !== null) {\n\n\t\t\t\tlet oldtype = this.type;\n\t\t\t\tif (oldtype !== type) {\n\n\t\t\t\t\tthis.type = type;\n\n\n\t\t\t\t\tif (this.__isConnected === true) {\n\t\t\t\t\t\tthis.disconnect();\n\t\t\t\t\t\tthis.connect();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.client.Debugger":{"constructor":"lychee.Definition","arguments":["lychee.net.client.Debugger"],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _resolve_reference = function(identifier) {\n\n\t\tlet pointer = this;\n\n\t\tlet ns = identifier.split('.');\n\t\tfor (let n = 0, l = ns.length; n < l; n++) {\n\n\t\t\tlet name = ns[n];\n\n\t\t\tif (pointer[name] !== undefined) {\n\t\t\t\tpointer = pointer[name];\n\t\t\t} else {\n\t\t\t\tpointer = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\treturn pointer;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(client) {\n\n\t\t_Service.call(this, 'debugger', client, _Service.TYPE.client);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('define', function(data) {\n\n\t\t\tif (typeof data.construtor === 'string' || typeof data.reference === 'string') {\n\n\t\t\t\tlet environment = (lychee.environment !== null ? lychee.environment        : null);\n\t\t\t\tlet value       = false;\n\t\t\t\tlet definition  = lychee.deserialize(data);\n\n\t\t\t\tif (environment !== null) {\n\t\t\t\t\tvalue = environment.define(definition);\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value === true\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'define-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('execute', function(data) {\n\n\t\t\tif (typeof data.reference === 'string') {\n\n\t\t\t\tlet scope    = (lychee.environment !== null ? lychee.environment.global : global);\n\t\t\t\tlet value    = null;\n\t\t\t\tlet instance = _resolve_reference.call(scope, data.reference);\n\t\t\t\tlet bindargs = [].slice.call(data.arguments, 0).map(function(value) {\n\n\t\t\t\t\tif (typeof value === 'string' && value.charAt(0) === '#') {\n\n\t\t\t\t\t\tif (lychee.debug === true) {\n\t\t\t\t\t\t\tconsole.log('lychee.net.client.Debugger: Injecting \"' + value + '\" from global');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet resolved_injection = _resolve_reference.call(scope, value.substr(1));\n\t\t\t\t\t\tif (resolved_injection !== null) {\n\t\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value;\n\n\t\t\t\t});\n\n\n\t\t\t\tif (typeof instance === 'object') {\n\n\t\t\t\t\tvalue = lychee.serialize(instance);\n\n\t\t\t\t} else if (typeof resolved === 'function') {\n\n\t\t\t\t\tvalue = instance(bindargs);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'execute-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('expose', function(data) {\n\n\t\t\tif (typeof data.reference === 'string') {\n\n\t\t\t\tlet scope       = (lychee.environment !== null ? lychee.environment.global : global);\n\t\t\t\tlet environment = _resolve_reference.call(scope, data.reference);\n\t\t\t\tlet value       = lychee.Debugger.expose(environment);\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'expose-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t\tthis.bind('snapshot', function(data) {\n\n\t\t\tif (typeof data.reference === 'string') {\n\n\t\t\t\tlet scope    = (lychee.environment !== null ? lychee.environment.global : global);\n\t\t\t\tlet instance = _resolve_reference.call(scope, data.reference);\n\t\t\t\tlet value    = lychee.serialize(instance);\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\ttid:   data.receiver,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: 'snapshot-value'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.client.Debugger';\n\t\t\tdata['arguments']   = [ data['arguments'][1] ];\n\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * DEBUGGER API\n\t\t */\n\n\t\treport: function(message, blob) {\n\n\t\t\tmessage = typeof message === 'string' ? message : null;\n\t\t\tblob    = blob instanceof Object      ? blob    : null;\n\n\n\t\t\tif (message !== null) {\n\n\t\t\t\tlet tunnel = this.tunnel;\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\ttunnel.send({\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tblob:    blob\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'error'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tdefine: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (data !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:         tid,\n\t\t\t\t\tconstructor: data.constructor || null,\n\t\t\t\t\treference:   data.reference   || null,\n\t\t\t\t\targuments:   data.arguments   || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'define'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\texecute: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (data !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:       tid,\n\t\t\t\t\treference: data.reference || null,\n\t\t\t\t\targuments: data.arguments || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'execute'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\texpose: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:       tid,\n\t\t\t\t\treference: data.reference || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'expose'\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t},\n\n\t\tsnapshot: function(tid, data) {\n\n\t\t\ttid  = typeof tid === 'string' ? tid  : null;\n\t\t\tdata = data instanceof Object  ? data : null;\n\n\n\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttid:       tid,\n\t\t\t\t\treference: data.reference || null\n\t\t\t\t}, {\n\t\t\t\t\tid:    'debugger',\n\t\t\t\t\tevent: 'snapshot'\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.client.Stash":{"constructor":"lychee.Definition","arguments":["lychee.net.client.Stash"],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(client) {\n\n\t\t_Service.call(this, 'stash', client, _Service.TYPE.client);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('sync', function(data) {\n\n\t\t\tlet main = global.MAIN || null;\n\t\t\tif (main !== null) {\n\n\t\t\t\tlet stash = main.stash || null;\n\t\t\t\tif (stash !== null) {\n\n\t\t\t\t\tstash.deserialize({\n\t\t\t\t\t\tassets: data.assets\n\t\t\t\t\t});\n\n\t\t\t\t\tstash.sync(true);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.client.Stash';\n\t\t\tdata['arguments']   = [ data['arguments'][1] ];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(assets) {\n\n\t\t\tassets = assets instanceof Object ? assets : null;\n\n\n\t\t\tif (assets !== null && this.tunnel !== null) {\n\n\t\t\t\tlet data = {};\n\n\t\t\t\tfor (let id in assets) {\n\t\t\t\t\tdata[id] = lychee.serialize(assets[id]);\n\t\t\t\t}\n\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tassets:    data\n\t\t\t\t}, {\n\t\t\t\t\tid:    'stash',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.client.Storage":{"constructor":"lychee.Definition","arguments":["lychee.net.client.Storage"],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(client) {\n\n\t\t_Service.call(this, 'storage', client, _Service.TYPE.client);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('sync', function(data) {\n\n\t\t\tlet main = global.MAIN || null;\n\t\t\tif (main !== null) {\n\n\t\t\t\tlet storage = main.storage || null;\n\t\t\t\tif (storage !== null) {\n\n\t\t\t\t\tstorage.deserialize({\n\t\t\t\t\t\tobjects: data.objects\n\t\t\t\t\t});\n\n\t\t\t\t\tstorage.sync(true);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.client.Storage';\n\t\t\tdata['arguments']   = [ data['arguments'][1] ];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(objects) {\n\n\t\t\tobjects = objects instanceof Array ? objects : null;\n\n\n\t\t\tif (objects !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tobjects:   objects\n\t\t\t\t}, {\n\t\t\t\t\tid:    'storage',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.Remote":{"constructor":"lychee.Definition","arguments":["lychee.net.Remote"],"blob":{"attaches":{},"requires":["lychee.net.remote.Debugger","lychee.net.remote.Stash","lychee.net.remote.Storage"],"includes":["lychee.net.Tunnel"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Debugger = lychee.import('lychee.net.remote.Debugger');\n\tconst _Stash    = lychee.import('lychee.net.remote.Stash');\n\tconst _Storage  = lychee.import('lychee.net.remote.Storage');\n\tconst _Tunnel   = lychee.import('lychee.net.Tunnel');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\t_Tunnel.call(this, settings);\n\n\t\tsettings = null;\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tthis.bind('connect', function() {\n\t\t\t\tthis.addService(new _Debugger(this));\n\t\t\t}, this);\n\n\t\t}\n\n\n\t\tthis.bind('connect', function() {\n\n\t\t\tthis.addService(new _Stash(this));\n\t\t\tthis.addService(new _Storage(this));\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Tunnel.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Remote';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.entity.Label":{"constructor":"lychee.Definition","arguments":["lychee.ui.entity.Label"],"blob":{"attaches":{"fnt":{"constructor":"Font","arguments":["/libraries/lychee/source/ui/entity/Label.fnt"],"blob":{"buffer":"data:application/json;base64,eyJiYXNlbGluZSI6MCwiY2hhcnNldCI6IiAhXCIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX4iLCJrZXJuaW5nIjowLCJsaW5laGVpZ2h0IjoxNiwibWFwIjpbNSw1LDYsMTIsOSwxMiwxMSw0LDUsNSw4LDEyLDQsOCw0LDcsMTAsOCwxMCw5LDEwLDksMTAsOSwxMCwxMCw1LDUsMTAsMTEsMTAsOCwxMywxMCwxMSwxMiwxMiwxMCw5LDEzLDEyLDUsOSwxMCw5LDE0LDEzLDE0LDEwLDE0LDExLDksMTAsMTIsMTAsMTUsMTAsMTAsMTAsNSw3LDUsMTAsMTAsOSw5LDEwLDksMTAsOSw2LDEwLDEwLDQsNCw5LDQsMTUsMTAsMTAsMTAsMTAsNiw4LDYsMTAsOCwxMyw4LDgsOSw2LDUsNiwxMF0sInNwYWNpbmciOjMsInRleHR1cmUiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQlpVQUFBQVFDQVlBQUFCdWlKRm1BQUFnQUVsRVFWUjRYdTNkQ2Z5dFd6MC9jRmZJa0NreVpPaGVaY3BVTWt0T2d6SmxTSlA1WEVxaEpCVlN1RGREUkNvTmJvUDhJa05FaGtLSWM1V0VTaktraVpOWi9WV0l5bCt1ejN1M25tM3ZmZmF6MW5yMi92M08rWjNPczE2djlmcjk5dk9zN3hxK2EvcXV6L2Y3WGM5RmJ6V0htUU16QjJZT3pCeVlPVEJ6WU9iQXpJR1pBek1IWmc3TUhKZzVNSE5nYnc1Y2RkVlZWMHNtdjVmNDJJc3V1dWhIOTg1d3ptRG13TXlCbVFNekIyWU9IRk1PWEhSTTYzVWsxY29HZjVkay9KaHM3bGNkU1FGenBqTUhaZzdNSEpnNU1ITmc1c0RNZ1prRE13ZG1Ec3djbURsd1FYTWc1ODRQQ1FPZWx2Z3hPWHYrNXdYTmpMbnhNd2RtRHN3Y21EbXdOd2V5cjl3b21YeEc5cFR2Mnp1elE4emdRZ09WL3k2OHV6aWQ4TitIeU1OamwxVUcyL3VuVW85Sy9JSzA5WCsyVlRCcGJwam45OHo3cnpoMkRaZ3JOSE5nNXNETWdaa0RNd2RtRHN3Y21Ea3djMkRtd015Qm1RTXpCMllPekJ5WU9UQnpZT2JBV3dYRCs5eXc0YTdCOFB3OU5tRXZVRG1OZXIrMEJGRDdObW5ZbTJxdFNscnBQa3o2cEgyM0tSd0k3Uk9UL2hkRDkyUjArZjIzK1hQRC9QNS9QZmtrUGVEMFhva2ZuZmpheE45Sy9QYlEvMldqenJmSisrOUpmTHZFSnlmOXR3enBrNmRudjV2NC9YbitsRlk5a3Y3U3BMbEg0aVdKcjA2OFhvdG5xM2tPL0F2TjZ6cktlbHpTUERkcHIyaTA3MWw1L3gxSjk5dXRQRmZhL2N6OC83MmgrYlZlbXJmVWRPa1RZK29Ed290dmJMV3h6SldISmQydEVzMjczMGo4aHRDYUY4MFErdXNsa1g3NjhkRGN2MG1RQktGNWEyVWszam54NHNUVGlROE4vV003NmZYeHA2MmtaZUZ2M1A5eDh2aWtuanhXeHMzbjVmOWZUUHpzMFA1Nml6WjF2MjdTdkRSeDA3TGpxMFAvcEJhOTk4bmowL1BuMnhNL01kSDY5SHVoL1p3YWJXaStNdThmdVNXTlB2dTMwTDl2cSt6azhabEpjNy9FajBwOFk2SjU5cTJoMVo1cUNLMXl2cjdFRDh4ZmE5UjNoUmJ2NXJBakI4TFg5d3dwamU2dEU5OHg4Ym1KM3h5Ky90R09XZTVObGpxOUtKbThJblV3WHJwQ2FMNHNDUThTMzFBSUtBMWZudmh0VTlmazVHVjhXc051bnZoZWlhOUtmRUhpRmNucnFhMEtiYW1MOVVFZTFxbUhKWTgvYmVYaC9aWjhCckkzSkEvOVZnMFYra2V1N3RtMVRKTEhoK2Y5dlJNL0kvRzlFKzNSejAvOHljU2ZTVDVibGJPcmVaWjZuRXphVzJ3cksrL0pIVS9NKzROR1hmVHhhRDRqZVpPRjNqN1Jtdi9xbEVHeDNNTzNNOHBKUForZ1c1TEh5Y091NXdhL3JJZS9rbksrYWJPY3NuZTlKTTkvTnUrL3JiTXRqMGc2MW9DdjJKS2Y5Zk8zOGs2YXJwQTZmR2dTbWgrM1RMVHV2eWFSL0dOc1c5Tzd3c2o0UEIzaWh5U2ZicGY0NUhQOVVwOWhqQjVHZlFhdnZYOU0zbHowZjZDblVXV2Z1bHZTZm0waW1mYVZpYitVYUsreUJtd05vWHR4WGpnM0RNRmFiSTljUFQvY3RpWWpKSS92VHZyM1NabzdiU3NrNzdYcGZmUCtueXIxSUFPOUxtbnVPWktIczhhTDhwNzhjRVpJRVRmSnd5ZHR5Z041YnU0L1BmRmFlV2NOV1lROGY1ZjgrWmZFRDhwejU1ZHRlVXBqdjc5SDB2emNDdTNWOC8rZkpaTGR0c2ttUXhuRzZwY2tmdnptZXBYeWpiTzN6Zk9xRVVuU2JUdGY0S2UxNWFjNzZPMGxQNVA0NHFTOThiWjJGbjU4VnY3YWYyODZsbWJ6ZWVyMkJYbjI4TVNYVGFSekJZVzE1dDZoKzRYZThzN1hkT0dUdGU3WDA5YnErZTlzdGk5MUlxODQ4M2FkZDNhdFc4cTVYV2lkMmQ4OVpWMXIxM3g2NlBibGMraWRnNTdhMnBPU2ppeW1QNnQ3MXo3MUNhMzl6UHF5d0ZqbU1ITmc1c0RaNTBEbTRUVlQ2azhuMnF0dlZxdEIwbmFCeWtrSC8vbm1SSGpUa2VOMis0TEsxMDVGL3o3eHJWUFo2cFVTYWRnK29ES0I2Z3RUeGt1VGowTW1VT3NEZXJvODZZRkVEMHc4bVdqaGZKL0VyMHA4ZWZMNHNiRThRZ2M4Y3pqNTJFUUhOcDN4QTZFaE1CSVNiZGl2emU5dmJkVWphVDgvYVFoMWQwajhIZWszaGI2T1BCYjhDMTBWVkU1Wjc1cDBMMHU4cENPdHcrdm5KNTJOZURRa1Q0TC9GeVU2TlB4c29rMGJPRTl3QjQ1ZWtDRjgrY00wL0J2RGcyYzMrUGNPZVc4TS8ycmlneFAvSXhHQWNmdkU2NGYrOVExNmgxdUF4TDhtVXE3MGdzcVVDd05ZNG9EK0tZbVBUN3h2OHZCdVVraDdMWElzNEQ4bjlJQ3NyaEE2aDA1enp4cHhwOUQyZ01vbmt2YmhTUXY0bWh4UzVtMURwSTNma1FnWXN0WmRKL2s5YjNKbUtuN1ZWUWY1ODhyUVc1eEhROUo5WkY0YUQxK1hhTDZZTy9kSlZKK1BDTDIrcjlGVFhIMDVQaVgrZWVKbkp6NG04VzZoL1lsZDZqN1RMUHJ2R3FWUGZqNS9IZmJ4RjFqMWtlR3JQZXlzaHRTSFVzYTR0SjlaQTdycUVMbzF3REcvald1S0tpREVKeVFmUUhVekZFSGpCNU5RSk1RQU90VEZIRGRldnp0NVdldEh3MlpkSk15ejYrU1BPc3FERVBQanJjcHN5NmRGcy9yK0VPakpDQlIrMW1hQXlOOFVYcHdvN2JnczdXZ3FkVnIxeVBzakE1VUhmcFJ4UlFHK0U2Z2Nla0NRdHBJMXFrcjdWbnRiZlJoNk1nU3dIdERtLzJVbzY3ZHhlWkIzaE9KcUtIVUJ1TmxuUHowMGE5NW9lVDhKVkM1eW8veCtKQkVBU1Jha2VBRnNBUm9mM3lQN3FmU1dPUXY0cCtqOHFjVHY2ZG1Ma3dlWjlZY1RnV3BrU2ZPVjhvTnN1VmQ5U2gyNVVscER6SHN5UW92ZjlsVUE1bDBUL3lUeGd4THZyazFUWk1LMEM0aHFiek0zdWtKb0RnTlVKZ3N4Qm5tL0xXUEZ3ZTRmRXEzTGY3V3RVcW5EMitZNVVCK0F1MXh6OHh3b2IrKy9kSFg5ekhOS2RRWW81TEhSa0hSazhZY2tMbVg5UExzc3Z5a2VQeVgwbzhxdHBIdWJwS0VVZkVUU0xRSEZzaVk0djhqem43dVl2SklvOUIrVG44NHRueFo2TWttdC91cEpKcTRxU2d2LzdIa2ZOYVZPb2Z1NDBGQjYrdHNWUWtQT1p2aEJVZmFwWFVUbmNhS3kxbDF3b0hMYWJUMzg2MFRuazhVNSt5akR2bndPL1NlbmZ2K1V1cXB6YlU2UkZmKzVJOTNPeW9UVVpRYVZqM0t3SElPOGl4eHl4NHlqWTJYWmVneFljMnlxa0Q1eUJubUg5QkVab2hxU3RndFVsa25Ta2pkL09mSDlrL2YvYitXOXovdDlRV1hXRy8rUVNqYnpTYU4rS0dudm04ZzZvOG13b1ZHaG95Rm5jWEJOQWxWK3N3UWd0SFJOaktTL011bC9NdWtCTTkyaENHaW5RMEFZSk1DN0UrdWJrcyt6eW9IRFFkUjlKbFVMN2RLaGhHRFhiamhzN3hRRy9pVVBWaDJqSWVudW1KZTNUenBXMXRXUXRJQVdGaXA0T3pyUWtvNWx5WGNtRXNRZFZnblRRRVVXWEpQQXllVDFCNkV4d00vcmtIWUFTbzB0UUdWTG9jTHkxQ0ZqVFJCT0hxd2tIWnBIclUvSytBRlNBbk1KRnhRWnZhQXlLK1BuSmYzUzJqZGxxc3VYVEJXdVE4ZWl4QUY3S3FETXltYnhvWkpFQjFDQWRnK29ERmkxQVZZdGk3Y05vdFRWdWdSYzBNNkZFbWlma1B3QXhkcHczZVRYQWxxc2NUZElPZ3FrWlVnZWxFTHF3N3RoTkNRZGE2YlBUYnJmSHhMbG1UV0lBc3dCZUxCUTNhZEpNMjA0RUw2eVJIMXdlQXJjYllha2YrY2tZcDFuYmFYVXRQWTdaRHZFMjdDN1EvSnk2TmVYTFBKWjBIZmRpMVVFdzIzV3BiK1NmSjZSZkI3YXFrVHlZR1ZuUHdPKzRjRmF5SHVBeVp2c3Q3Vzh4dXFDWnFXTVQwdytmN0ZyUHEyMmxMSW1XL1lPK2FhZURuYldpQk1qdkxoYXp4N2ZVNCtVZGF4QjVkU1BSWi94UUpuWDNOZHIvZC9xdDlCUzJwTmx6SnZmM3h6LzVJUThCNEQ5VDk0QmNxdWgxQVhJeWRyejFPWWVtZmZkb0hMU0FwNG9nRytaZk5SamMzNlFnWjZUeUNyMzBaMTEyelpuQVlnVUZoL1JtQitBZnZPYnZNbkRZcXcrQU9HbWRXSmxEZUZKcDgzTlBUZDVVTHg4WmRMdUJkNGtuM01DS21OZ3ltWTF6VnFXOG5jWjh0d2F6MXI2UktOZmpCR1dobVN6UlFqdEMvUEgzczE3ODZ0WG5sTUlBRFh4dUJxU2gzeFpTZDhyLzM5dy9qY25QelcvNWQyaTVaMUZjZnFoU2Y4dm9hZkFJR2MrSWIvVllWSUlQWU1JaW5qZm91blpXN3BBNWNJck11RUxrbTlWL2wydGNPcXpDNmhzRHZ1ZWp2cno2S2thZ1V4aTBERk1YTmE2Q3hGVTVsSHl3UFF2QmRtUmgrUEc1MzNxRTlvWlZEN3lFZE5YUVBvaVEvand2L3RWOXYwWlZPN3Jobk9TS24xRW5pSlhObThQU05wdVVMbnN0d3dqYnBxOHR5cktENnZCVFRDNFZsQWFSVFA0ajZra3dlVlFRL0lta0FGb1dQbzVLQXl1Yk8rUi8xbWhzTnA4ZnNxbWhSNE55WWN3L3RLa084UEZzbFhoMEFMbEFNS3NmeCtYUEI2Ulp6ZkkveXk0YnB6ZlhQNmFvUWhDNmdFbys5M1EvUmVpUEQvSUg2NWN5amlVa0R5Qjk3U2ZEK3JKTU9uL09PbGNLWEFHdUxCSm43UjR6YTBmbU1KcW9XcDF1YTM4NU1HbG1hTGd2QTVwQjR2Uzl5TDR0eHFTdEE0dGY1aTBMTHlYSWMveGtuVWhhNlBSa0hSWFQ1bzM1aS8zcDI1UWVZVC9KL09jVXNZNDdnb3AxMEhGWVJXZ1BHbEJDcTBEMXp1RzdtVCtaMFhqR29nZVVCbHZhTlc0MTA0S2hhL0daL2UxQWczK3MrQjZTZkpUcDJvb2MrU3kwcThMcjRKeXNMTldXTkJIcndSSU90Y0NVZGk4VTlLdFhmdVJkemFFdTdSNGwzVGE3S0RMYXFsVlYwb0tCK0IzVHZybXRUcWJtYVVzYnRnT3lWOWtmTGJLMi9kOW1VZkFycWVsdk9aMUJJMCt0UWF4RVBtSzVQV2JyYnFsYkZjbkFjQllmSm1Id0JES0pNOEJTdzlJUG9EYVpraGV5cWJNWTRYdUl6N21STldDYmNpMENJYmJBQ3B6NnRlU0Q0dmJha2dlejBpQzM5bDMzeG1yeTBwZFdWUmE3eW15UmtNcm40NzI3QU1xNHh0US83dGE1YlRldDlxUjk4Y2RWR2JOeDZQQzJ0bjhtSEdydlkwKzUrVkdXVS9CWVgybGRCL2tJczljZWNZcjVPNTUzclF1TEhXaDZHZXdBSGpsZ1hWcVpTeE9BWlhOajkvZTNLOVgyNVB5N05rTUZjNndkTjFzZDJYT1dqdWVuWElvOTJ2end3SGo2VW4zL1dPSlNuMkFkTmRPdWpVcjdRbjE0VjN3U2FIbmxWWU5LWTh5amVmZVFTdHRvMjNuRWxUbVpVanA5WVViZld2OFVLeTRCcWJXTDg0VW41eDBDMCsvOE1TWXBzdzJYbjh6ejVmZUFubEhzWGFmbmowaWFSa3NrSlVvdlBUNW40ZXU2UkU1VkRUMGxLU3U5cmhML2ljL0FWUnZsTjlOQTVndFk4VmV4MU9Pc3FGblRaZ0NLcE1mWEVOb3ZuZUZ0R2NTcUp6MDhyWTNuOGovbEZQMis2YkJUVmRsampCUjZrcm10djR4d0hGT0o2ZXg2RC9kS2phMDFqcHJCcThoeGczdm51amFIbXRwOHdvMitaZnlHYTk4UXFKeEE1aS9QUFNVYWRVUVd2T0MxNEt6T25uWEZUTU1jRDQ0OU0zckwwTHZhaFQ3TVdNbWU4S0IzN1YxTFRSa0tWNVJGUCt1My9uTHBOOTZEZFZRK2RCUW9qNGcwZFdVenZpVU5wY25rcU9hMkVqaE0vbUJ4VDF2RWRjVDhYQmdPRU94MCtKVGwyWHhVRTd5ckNvTU45UGxOMk1VNXk5blRQVWFEVW5iQlNxWE1sekg0YnpBMEl4eEJZL2RMMDNFVDRvclYrRDhXeUlEUW5oRUR4L2t5YURHbUNNTEd5ZGRmSlI1NnNYb2llZWg4ZXBzWUw2WTl6M2pWVC9BWjNqRldzdWR3NmJPbDJITXUzSmxHUFBPQ2p3eHFtTitoYWYyRDlkVjh2RGp4YlExSlAzSDV3VUZHV01uL1FDUGNvWVlQWU9GQnA3R2k0YVNFSi9KLy9DbzBSQWEreUNsdDc1Wmhqd25YemliMTY2WFlvRDJuMG16aG8rVWNVWkJ1ZFdETWU5NVRyTFVYWjRaOG95U1d4M0lpTXVyemZLY2NsQmVCOXNha2ZkdUpkQVh0MHVhVTlMa0dZOHY2NnJyYzdkNmlDY04yWk5ud0diZDdZV3VwYkNmbmhGQ1p5N0EwMVlEYk5UNnk0Q25hbEJXNm1lOHdtZDZ4dTFVVUptc1JWbE9Sam15MEZ3NGF5V0hpZHdCZ2NvV2t5TUpLY09DYjFGY2dFdWx3OTNEMTN1dnFrUDdxVVFIQlhjQmQ3a0hqd3dhZzhOQXZyU24wMWZ6U0wwSjdJQmVncGtGVndDWTI3RGZtUHdzWkh1SGxHT0JjVVhDNktLMFVTK0xxWW5wNzJoSXZxeHBYSFVCaUdKeDZuNnNOV3ZNbnNvbm43Y1VVQmtJLzdYaHdSbVdUSnQ4U0p1NWg3SWlXdDZUSjAyZXN5cTNjWEl2YklhazN3dFVEcjN4WnZ4eVVlMVNPcFI2T2tCYU1CMTBIclM1eVl4VlBPVjljZDRaOTZ4c1hwL2ZVMEJsQXRTSlJFTGlJSnlhdnozM2wxdVFDWHZ1SkNac1d0ZzljNmVlYTBDNlErcE0wTEFaY05FRytEWkRhQWh5ckNZb2k3alRBNzBvYmh3U3F5RzB5cmhWMGhMVWxpSFBIVW9mbGVmR3dHaElPdXVJYXpaWVZyZkt3bHRqRDdEUkJkS1dNVVFZSWZ5dzJtYWx1emF1dHhVYU9sNE90ZnNNdGRrOHFiV05jS0ZjcnRiNDhHT2hHZGJTVm5OWGVXbS9jcFVJcGVndGtrZkwwOEM2YnlQK2xxUjlZdHJDY3RBaGdoQm8vWFp0eEsvbTNkZjBWS0xNZXhZMWwrUi9DbE1XbVRmdDJWT1NmdHYxRnc0UFhOYmRKOXNTWUZtSVVsZ1lJeXoxZGc2YmRkbk1LTzhwSWExdlBnbzdHbHI1dENxNEszM29XR1JUakg1MDZramcyaXUwNnBIM3h4WlVUdDBJNE1ZNGkrMHVvYlBWM2thZlczZmNjWHl0NUdOOTViR3p1SFlodjhraWVHVy9jTTh2R2E0YVZ1dVMvNEhMRkxqbWd3T1VQTHRBNWFTajhIRlFZK2s1ZXNWVDB0bFRHRFpZUDZveXdCaWY4cHhsdGNNZ2NIbHJXS2tQUUdiVVRYcWxQcXlacXdlU0xXdUl0cERyck9PdXAycmV1NWM4N0cvQVMzc2RBTGJyK3lhYmpVdys1eEpVdG43clk5L0ZXTlEvOVhGUUIwaTRzN2wxVlpWK2M2NWdYQkRTeFZuRk55TnVsLy8xMWEzTnBmeXZITDk1QkhZWllvUUdpT3orWTU1ZXJtaXFYcEcyeXRmUTh0UWlMemgwa3BkY0hkaVVCN2IwRFlEWUFkczg2cjJlYVFxb2JCK1c3OGNtL3lyb05kUXRiWnNLS2xNRWt4T2VVdWFJOGFhUFhyYlozdVAwTzNVbHQ1SkxySTFBSE5mTmtCSElVZFZRMWpyem1Zd2s0ak42Y29JclVGcmVycFJLRk9WQUZlc21MMWEwRkRCYjd5QmY2UitHRitZQmtKRU1xNzhvbHo4c2tRemRrazhXWHAySlg1NjBMMHBieUY1a05aYjd6aEtqSVdrcERjajQ1TE5tU0hvQXNuYVJaOGxDNnFyZGdNQW1ObEw0akxlVWd2ZFd4NUlmNVo0MVplMUtwODBLRmZxbVJma3U2VUpqendTTWZsNXJmMUt2cEo4Q0tqTllNU1lvRHB4WEFJamt5dXNsOHJpemYxT0dPSU1aTTlWdmE1VDIyWU9jUjNiaG8zTzBjVDZNVjNtUlBkWGx5MUorMWRpamxMOVlWMG8rVStmTDJKam5aZEpVcEpUeWpTRktkdDd3MVhObTBsc3I3US9taGJNSEhNYjNRMXJubUpOSkIxVHM5ZkxmQjFUR1QzeGZYcmVRZXVPSFBGMmJ1bVkwbFdlTGtEUUFjMFo0NkJabjBqdzd5QjhLSWtvSzEwTjRSdUZrRFpmWDZEeExPbU9EZ3NwZVRYRmtMUElFSHBYWnloNEQ2Mkl3c05oMzgreWQ4Z2ZmR1pOV3gvTktXNndoWkNyZ2V2VmJCaXMwMm5TYnBPL3hTcG9LS2dPOGZhK2hDVzRQOWRubGIzUGhyR1VhUmh2UVFHV0hzeU1KS1lPbTY2OVN4Z0pNeVc4SERRdEYxOEduMEFCYWJFZ08vVnk1YU1jbmZhQXA1ZUtWeFpJV3M5dGRxNVJ2ZzdYQUFXTnBpQllUcWt5V3c3WlVKa1M1NzQ4dzBBeXBBM0QrNTVPK2RYK21UWU53Ky96UTZHOHUvcE40V05wODNvUEtaWEg4amJTZlJVa3pKTDJGd21SZTI5enluRVllVU5pYno4Nmdjc3E2T0dYcFl3dWpSYXNMUkJ3YUYzcUhiWXZZY0w5dlZXbVI5SVJJQ3pNTjNlSXdYT1p1cjZXeXNtaFZXVnlvcXcrc3NjS2t4V3RaRUxFQ0pmUVFVQnlRalZjV2JBQkpZTnJvaDRRMk96TjFabkh3cDZHNXJOblJiMjRqQUZ5ZFdiOHVRTXRFZ2pIcnYrWjhDVDBCaFpCQXMyeXRZMjNDSW9DZ3oxVzNDaXIzMUhHWE5La1hnSjdBVDFIQVBSZVkzTDBHNzFMbUdFMlpmK3JDNHNpaEdhalJkVWdzNjdoNVFJQmxZZDA4NUllR2NvQndlSWNpOUpqSGFBbnQrcHk3TkdHREFOTU1TVS9ZNW1YRHNnSzlNZmFxL0xZL1ZFUFNBcFVkMGdiQkUraGdmL3UrMFBQc2FkR3pwR0ExLzI1SkR4VGJPWlM2MUQ1TXgzckVoK2tJZ0tPaDVPTjZsODIrZUkvUU5xM3JSdWovSnJTallGM2grNkh4b3VTbmI3YTFZMmc3d2ZUT3FkZEJCejhtZmFodnlDKzhBQ1pNdVZONXFLODFrc1Uyc0xBcnRQcS8wVWJyNGcrbnZPc25Id0FLQ3hXS2Evc0dvZmZpUkd1Zk9say9xMkd6THZsdGYrSWhzN2c2STc5N1FlWEZsVzZKWjNpTGJGWWdlYkw2Y3doc0tlUTNGVUY0RGZoZ3JYUC8ybjZXTXFiVWg4TDBYcDMxV1IybjFoQ2dLazhZYTN0WEtIc0NqeTM3RlV1aXk0ZTl2aXVETi9mTE9RT1Z5N2pRWGxiZ0N3K1AxTWM0OUpHdjVkVVZZMjBwZXdsckxVRCtDL09iQXBtaTVISDVIempGdStuQitkK0I4dEw4Ynozc0NxSHhMUmRubFo4SVhkZUJkRFhqMEFQL0xrdDhTdWhQZGhXNmtpajB6bllPejZ6bW1rcmpnVFIwM2FCeTRUZEFDbURZZFRWSDh1OEdsWk9XaGJYKy9aQmhIOGt6M2hoK2QxL0JPSlYzUjVFKzlTWi8yeC9mTlhXbjlCb05aYTM3NzZTNzdVcS9PTDhDZElCUEMrWGR0aEJhYXhOcndLOUx1cTR6NUVvWnd6ckNvM0VKWENUUHdkSVEwRG9LS2ljZGV2T0pWZjNTSXpMUFhSSEdpSWZNTWdxY0pWMDNxRnphQ1l3aXR5MnRDL09jbkczL2JHSWpoYy8yTEVycHBkSW56OVVkS0Y1VjVCVDZRd2VWVXpaRkVORHNCMU1INjN3enBDNVRRR1Y3dERZUG5rV0FRQW9FQ2tteTZTSWtUM01QdHJCOE5qTG1qRE5XM3ZKOHd3cDlrNDhwd3hrUkdPc3FwczN6TmFVdDNJVXlZOVI3WjgvNXN0ZVlMM3dhMnYvaHd6bzExbUdwSzhDYjNNNXpaTkkxUHFFOUdicXpBaXFYZGpFU1l1bThNQVJMK2QrYlAyVDZyWmErRy8ydVA1OFpHcmdUeGFQekh0bG1jWFZxbmp2TFUraFRDbFZEMHRxL1lCQndGcmNXTE01ZHRWRG1BME9IeFRWdytRMDdkSDNsaVJidFNqc284bmkwTWFwYmp1dHQ5TW1mb29iaExFVU5qS0o1NzNGb3BvTEtjQVMzTDhCUFI2M01TM3ZKblhBV2YzbWtMU3pMVXlZYzlWL3plL1E2NGViQzJXQThBQVdvck9PUEpLUVJ3QmtmTXpsVkpwVER0SUhaWlBwbWhVTFBVbFBIMFZCeWc2cFp6cTJSaDlZQUlZdzRJRXdLb2FVRkJhYXRXVm5tdVU3emxXU1Q3VkJDOHJTaGNMMnJBbTlEWVVrUDRQaWhwQWNBSG5wSS9yUzJBTUVoQU5wV1B4WUNwS2VaUHBTUThyZ3krc0RQYXJoSnlsaXovTnluc0pRQitDUGNjYU5vaHFRSERockRtNWJLQURyajRrZ3RsVk0rbHcrV3lRNU82akVKVUY1dFlNbkxRZU1HWXcwdjg0eTFsTFl0RDZtRkQxMmc4cmE4UTA4NXcxSzZCVkpaTUIzMjE0RHYwRHY0UGpQUFI5MklOOW9LbEhMSEVhR2tDNEJMR1FkSjc0b1NoeGVMTU9DS1Zhdk5oV3N4d0hzMEpEMHRPNURTeGd2SUJWdzQ2T28vaC82dUt4WnFaVXg5bHpvUm5Ba0loQjhXMTEyOG1Gck8xUFNwRjVET1lkVDZRWG14QUhrYi9OVVArTWthcGJyUkQvbWtIT0M1Y2Z2VS9HOHo1UnFsVHhjaHo3cEI1YVExZHQxSHl2cHJBY3JuR1pjNytkSzZ0NFNQTTY1NkNEMnJGSUFHQVg3dGlwMU5YaVN0UGQ4QnlBZW11alR1WS94TVh0VnJKMHE3ZXU2TTNmbjZpc0svbmVqTFhNTnZmWEdHQjFQZVUxUndZU2ZJczV5b2Z1U3FneC9IMlZMWnZzd2poYkxreXVvaytyOXh2eFBmUzUvWisrNmFzcmg1bXdQV0Ywb1IrL2ZmNS9sbGVjWVREcy9mTHIrcjh0NG03L09iQndDd2dHenp5UHp1QlpYSnN2OWV4c1NvOVhyeUE3NjhPbkhydmVTci9DdDFJNDhOYmFBb01iWlkzaHpVZUIzYW9UNlUrS05lZHFVK1pHT3lUdlVxc3kyOGNxQ244Q1RmZGxta2JyU1BCUkQzWCtzZ1MvZnVkU1YxT2RlZ3NyWFhQYnMzVEYwYzdBQVUzR1dCTE0wUUdqSUdBT2ZoaVpSMTNHci9OczhwUEkzdlcrWi9Cekx1K0YxeWZsbWpsZSs4NEJESDBuZ3FnS0F0akZjK0xyUk5xNmZOaHFZT3l2NzMwRTRDdEVNM0ZWUUd0UFBpYTE1eG80N0pmd3FvYkU5MXZscFl0eFY2NndMbGk0UDd3b3ZoT0lheTlwbFROMHRVWjhFK1R4WTlYYXR6V2V1ZWxYVGtuR1hJYys3djNMY1hzdW0ya0RRTHo3VkVWNkpOT2llRWxyenNuRVdadDZUTmM4QWJRSno3ZWcxVXZsSFNtRXZiMGxDY2YyRG9SejNUVXM0VVVCa3YzZWNORTFqbEVVWG02VHh2WWlPRnozK1NwTUNhMVR5QTk5K1o1ejBXc29jTktwdFA5aGNLTFFybXJwQzJUQUdWOGUyeUllUFFzbEMyamw4anoxZEJZWHZlQzFmbjM4aVlzemV2NVNsZDhtM3lNV20wa1pmZ05UZnpMdXU1dmR3YVNMYlpHdmFjTDN1TitkSk83Zi9yMUxIcUJiRENiK2RneHBid0JKNWNWUS9QRmJxVCtmOXNnc3F1UmdUODNqbzhkcTUxN2lGZnRqeTdIcGgwMXBCN2hJNUNTajcyRmV1QzY2WmVrZWVVVm8vTy84M3Y0U1F0QlNuUEhlczlXWCtoREttRjBGREkzUzlwRjE2VytVMm00aW45NUJadFNhL2VsSGR1V2FDa2E1Vm4zU0VUd2lVMzhhdXR0S25UVkZBWkZxRWRydktGZ1k2RzVNMTRqWEhGUXhJUEVsbVBNMzV5eG1iY2RtcU11TGx3TmdwbVFRSlVwa1U5dEZBV0tRY3d3YUZPNDJ4U0JIbU04WnZHRWpCUTFkcHVxMVR5NXg2Sk1jQ1NaaWlDRW8wWDF5TkNQaXNFMmprRDlXdVNqL3BzRFdVeTBaS3hkRnR6cDh3N2dLNlAzUjAwSzlHWklIbXlxdnV2NU9tdXFHWkllcHNCTjcydXU3YWFHVFlTcEx5M0JFdGxRdnBYaFdjMnZXWkltMDNJbmU5VUhnb29FNzM3VHVXa043K05WZG9wV3JiTiszNmFkZDlNa0R3dHNsY21yMEhRUFNPUHBLRzRzZWx0dXRteERnVm92YUozN3ExbW5ueHBHbW12M2JrMENyNGxIUXVCSDBrYUNwWmx5SE9iMVh2bStaMTdHcDcwbEU0c1NzMnByaEFhSUlqNXRIbDlCWXRwVm5mZGVhMzB1N1hHWW42dDBCT1N6bW9vNDRoVnZjMmRtenlYWnhhb1RTdmZsVGE0K3FObThjUWx0ZXZ3bS9yWWIxakgwVjRiVDVRbHZ4VDZIcXRXNjZJeDBHMnBsUElJSXpjUHpRdnkvNzZnTXJjMTdsaXJCMXJ6bE9EenBTa0RPRHdhVXY1V0lDL1AzVTlKczE1VnVNaTRyRWRBRGxhR080ZXh1cXowT1MyL3I0NVU1MXNybjFZRjk2RVByWG41bkpxUVpjOUtHZ2ZpbG5hL0JiSWZLcWhjNUpMcnAxN1cya1hJczhVMUJubm11cUpxMk9SYmZsTStHcDhFNzZhNy9aNThaMmtDQUYxWTB5VXZCNlU3SlpMSldPejR5Qmd3SHhETERiR2xqTnVtYkdIVndpZ0JZR1hPc1NKdGVucWtYTXBIaDl6N2p6RXdhWUNSd0Nyam9ncSs3TU9ud3B2UitpUnZTaldXMHZvYnVISEpMdlZKUGc0eXI1bXlMbTd5Sm5uZ0I4VVlDN0d1RUpwZFFHWEtCMjdWQ3l2MDFaRDhCa1hFdS9Uc2xVa1A4Q0svQTJNb2NTa2hBRTVkb2N3WjFsSmtDK3Z2NG03OFBBZTBBK2pWaDJ6dGp1OWVlWkZDbVF3RlpETW56UlZYUkV3eXBDbnJGbVhFcUhKa1d5TkRaeDRhK3l3SEoxMHZWZFlrM21SQWdHWkllbUFEc01EaGV4UndIREpLK201UXVWbjRNVTJRTnBLdEtXYklHa0NqVnhZK0FVTmNPM2k2VnZXa0JWTDVXT2xEVjlQbE9jTUV4akNqbG9KSncxZ0V3R2orVEFXVnViZVQ0UUJDUzR2aU1zZDZRR1Y5eTRoRDJWVlgvcEZ4T3dWVVp2ME1hTndFd0QzblBkekVSZ3FmendDRjgzenJ0UUdiZFI2ajN6ZGQ2Q202akordlR6UHNIYzJRdWt3QmxYbDI4REJZaE5BQ2xaK2JaNEQvWmNqemcvejRzenhmVTI3MHRxK0hqMG5qWE1Fd2JhM3NVaTk0RVh5STVmdW9WMlhwaHpOa2c4NzVzdGVZTC9VMFgzM0RvY3RibzlBQTBjazhMRnYxSFN2eDZ2a243VG1aZEh1QnlzbUQ4UUU1MkQ3ZmtvY1puUUtTalEvS0twYnpycGVxaHJJR2tXbnN4eXp0ZllmczhVWFdBZEE2MThQUzFLRjVIZzRkK1k5OFl6d0FwVTkzMUlIc3FReHlLZndPbUh4SmFFY3Qzb2M4VTU0eDRRcXRPeVM5NjdHNlF0bmJ5S3ZYNmRsM2szNHFxSXh2enAzMjU5WlZLV2NTUWpFQUFBNGFTVVJCVk5ZTmx1RXZUam5PMitSbU9KTHZHVlcvVDlkY09GdmNTSUhjQkx2QmhWWitxKytUdDRuRDlYeHhVTTV2Z2p5dC9SU2hsV1oyVFJoTFBpZVNEd0h3NGxaOWtsWWE3dXpjRFY2VzN3VG4xK2YvKytkLzdzb3NNNnB1ejBsbllnR3hsNEFCdnVYWjZVUjNpVll0UzFwMTNPQ1pqWlUxNGFwMThOWXNVZ2NnbnpvQVdTWnY0bFBxTmFSTm1lYzFxSno2T3pUNEVCcmhveXVFQnZqRm5SazR1QXg1RG5oOFFwNTNYYWVTOUpPdXYwaDZBSUZGa1l2WFpPdlMwTE5jV3J1RE9NOGNjTDQ0ejV2M0EyOHlKN1FzdHJzc2xaT1c4THRXNXp4ak5jTUNvTXI3cEhPM0ZvczNvTVdxeFFRQXlmM0JBSVpxS0J1YkJaNWxTSFBqV2huZnJNbG9OTjEzdGRyWEFLVm41TG5EWjNkSVBSeTYwTEtJNk5Ka2QyZStROExVaCt1Yk1lQWdiYVBsVG5tMkZGSzB1UTdieHJTK2VWaks3dExTci9RUHBXVEkrajZ5aWk1dGR2aXdmajh0L3dQdGJMakFzQ3V0bXdsVExKV05EenhiQTdmSzNIWmdyQjdHazI0TVZMNUY4cldXOUlES1BtWmlUL3VzcEQvRHVqdGxVSnl5Q3FJNUh3MWpkU2s4SThqeGZpSEVWWlVGdFh4Nmh1Zys5S0ZkQ0VxSkxFN1BVTHJsUGJBZm9NbDF0eVZFbjIxUW1XTEZ1QVErTFVMcTY1bTd2N25QVjhNMnZ1VVpJZGdCc2FsdzJKUHYxbUJ5eC9DdERFSzhnN0FEb3ZWN2FJOXJHVzYyNnhoS0hRR1E1RWJ1ajY0ZTZ3R1ZLVTVQSmJwN2I5djhjS2Y3WUxIUll5bXpzMFYzNlZOOXlYcmNmRjJ6b0UzN1dCa2J2MlE1SUVMeld5TWovVTZ1SVllNmM3WEhzdWJ0azI1TnNadDg3VS82cWlsN3J2VHZMcUR5aWREYmU5eDd2V1p0bWpxUXlmSEJ0eEM2UW1oWUdWT0FNMkJoV2RkbFVWejZ4c0dYWEVPeDZkcU1wUlZvOHFYY3BrZ0YwTHAzdVFuU2hjYWhuYkVLeGZTejg5c1pUVDYrSXpOVmR0QS9rMERsbEFjQWNPM0cxckhmWW1qb0oxa3FGeDdpdnlzT1dVVlZRL0svRUVCbFBPVEZzRkJRRkI2ZHlGK0E2eVY1ZnJyR3BQQUlTSFcxMVhsWXhoR3drM1hmcU90eTJmdFo2N3VteVZXSzNTRzByT041UzN4bWFKZFhQNVE5bG1WaHovVVg5bHBYUjB6MnlFczVVMEJsKzQyMWc3Sm42Wm1UUEp3YmZpSFBtdGhJNGZPeEE1VlQ5U3RTdDF1bUhRZUpETythRnZsSlB3VlVYbXR6V1RQT0ZhaE1LUWhmZ1htc0FlaXAxM0Q5UlZYeFcvcFJsL05pSE9hYi91K1pMM3VOK1RLM3pkZW14ZnEyaVppNnUvN0QrWVJuYnZXNm1xUzFML1BLNlRxN0o3MXpwL3ZvbHpKT252SE81dW5iQkpWTDIxdzFTSzRnVS8xQjhsb2FRTlFXbHBURHU1OHhpdjJUVFBLYVBGUHZ3WExXbFZPdXFxbUcwUEJFY0VZa1V6SktzMGFRVVpwNFYyanZYZXBOTm5oNWFLcGVvS1c5MTlET1JGZlFMajFrV3ZVYzNxZE1kVFdXbXdyb3BKMEtLaHNucmhWcDV0MWIzMjNwbWd0bm8rTk5hTUlicTQ0bWdqKzFvbUhhaWRBQW9SWUg3ZnhtWmViU2ExYkRYU0UwTmd4Q2tudDlhQjVZSWZpZlpxcDZCMlZvSWZRT0Q5eXpXSnVxZzBPSit4b2ZWQll0cm5JMm90R1FkTzVqVVhjSHFGT0pyQmNJaU53NkRZeERDeW5MNFlJMUoyM0gxc3ZRaDhLU2xnc3E0UkZJYzFaQ3l0d0pWQTZkeFlXQ29jc0NlMnBqa3IvRDJadVNmL1hqVlVuSEdzaUJxbmwvNlFxZmg0WGZHTEtvRXZZZHdQQ2ZwVm5US2t4ZVpleE5zVlJtS2NPU2ZoY0J6UmpGQzVwQ1FpakJCSkJvVWVmQ0F0U2JGRkwvTGxBNTZXelV3RGZ1SXpZMEZocmNTV2k4WFFIUnV2L2J2T1hPNjhBS0hLR3R0a0hSc0JHeVJqMExoZ2FsRHR3L1dUQjJYWld4UXNjTHdtYmljT3ZxRC9QUjVuUXlrUVZndGV5VUM4UUNmQkxzSFNvV2xyV0pOdzF0MHlzajlCUngydGgwWVMvcnF3M01oMG9taGRDeURIRHZKSXRmWTNqVEtuMVNmajJKVTZZeFFkdnFZQVJzbWh5U0J4REFnUXZJMUJWQ0EyUzRKRFRtcTNsNDgveHhIZExGZmlZQ1lZMVo0MlgwanEvUUFhVE5HNWFYYXhaZ2VRZXNCNm9SZ0VkZDBKTnVtMFVtemJoNVFxTnZyRFZEOHRIbkR2T3NJN2dwQXBLTUhSYlA3aHh6aGRLb20yemh3MXBka2lkNUFrOEk4NFRQZXlhUDBmc2JoMHB1YTFPekFTc0pEb0hldnF5UDdja1V2L2p2TGpGQ3VIbnNiczdqYUttc3Y4ZzBybUpoRmM1YWxYZUZEN0UyQWFpUnNVUmhCMXluTEo5MGpjTEVQcnNpNlYrWk1zeWowVkRtL04yU3JtcnhNVFlHOHB4U3pweWowSFdnYW9MS0toTTZRTFN4YSsvam1XRzlBUGdaMjJRQTk4dzFsWk1scjcxQTVaSUh3d1U4QTE2NlR1RjBxWSs4N1hIa2J3b0djN2thS3J5eWhwQ3ZXNTRGRGs0T0tPUm9jaGtnaUZYNFFhSTVYL1cyV0sxYzZqSVpWQzc4NElwSmdXWlBOMTVaZCtvem5rQzNUeDI2cjNOTEhZRDJRR3A3R3V2Y3BzWHNSaHNvM2xsQnVZZVc0bm9Sa3EreGZXbWl3M1RWOEdTRlJoK1FrZTJ0UXo1Y3JJRStydFpZODNaY3JjZm0vMlR0UE9zR2xZdmM1YnpERXZHeVd0NWo3NUxITHFBeXhaNzUxSFRYVC80WEFxaE1GbkJtNVIzMW5MVFovbU91T1d1VElVODMraDI0WkQ0NmE3QldCcXhZcThqUXhuZlZDQ3psR2F0a0E1NXA4aUxiVVZvRFppaTJSaTBpUTN1L3BMRW1VVzZTWjh3dGF5NUxSVVlxMWJrVmVvWWpMS3F0UWVSbk1nVXZPZnZSVXRtNHJmMmg3UWFWMFNlOXRjUGVyNzZBRnZ4OWJLTHJFcHJZU09pM2dvRjVmazR0bFZOMSs0VDJrUWxjWTZJdnFpRnBBYkxQUzlxMXF6dzJpYmExT2MvT21hVnlhZWR3MVlEeDZvdzlmS2pQZVJHSVZyWFdMbTFpQkRGY0VlbThQbVcrakkxNVkvKzZIV08rRzFST1hTaytuUWw5UStVbGhmZXNZaWtobjFQcjVLUzlkdDdEaG55OHNiay9KajJaR0Yvc3F6QUtleGxseFUwU3plV3FrVVhwRy9zQnZqcDM4ZFovVldzc0ZqcHR2RlVpR1hHcHBFNmQxTisxWTY3QnJPSUFKUjlyRCtPRk94WlowRDc2cFB3bVIxVkQwdk0yc3JkYkMzeFB6UFZXb3lIcHBTTkgvRWZTVHJvMmFzZzBlZWhEbHNUVnZpeHRtd29xazdWWXFvOWE3YmQ0MHZPK3VYQTJtR2d4WWFYV3BiWG9xZEJxbWpDWWFUL3Q1dUx1MnZ4MllISWZ5TlNQaVRnazI1Z01iSVB5SVBHQnlhY0toSmRGMlFlVWxnQmlubkgvWm9XbzdRQWlpMWJWb3F2VW5SWk1QWUNYaEQwTGlTL1ZUcllnYmZFeGRTU1kwbnl0V1V0dTBpVWRBZGpIY3BhQ2NDdnZmZDhUZEZNZTBLODdoQVpvNDFvQllOa2tnYisza0pUaElQUzY1TS8xYnpRa0hTc1NidXFUcnBJSW5RTVFBTWVpYk40NTZONjkxWjdRT2NnT2xrT0FLMkV4Ym10OExBdW9kS3owdDJubDNFdmVFaTVaWkxHeXNURTRjTkdpK2NnbERlYmtrRHAxZ2NveUxwc2x6U0MzVkZiOWFOMEgzVFgzUXcrSUJRamJrUEROWnNLZG8ybFZHMXBhVlhPQ1FERFpDeVAwdmp4OG4wU3UzSzlOUEpYb2ZxWW1rQmxhQWhJUUE2aGx6QU1KQ0JCTlFMbndUVit4cEIvR3ltZy9wU3dicnZYdDhzbWRXUWlNczlBM0xiQjJ6WCtWTG1VQmc1dFhYTlRLU2g0RWJuZS9PVWgwaGRBQTcyekU5d2xkMHpKeExOTlNOc1VWejRVelF0NFQ5TGpCalNwTmswYTlqWW5CKzhiY0J1b0Ftc3lQYmhmcDVHVjhBbzRkR0kwM2lpUHJHa3ZxNXA2d3BTN2FSR2c4bGNpTnZHdU5ITWxuNEk5RExBdXQwVkRvZC9xdzNaQnA4Z0JXT0dRU21CZmZpa2pFQTRjTHdoaHJpV05scWF6dXFUY3JaWW8rOWNkN0lDalpwamtueC9pVzUrUXQ0S25EOWFpTVZPazMrNmoxdDlablFNRXJrNjdxOHBreVdMaTV5cWg2ejF4dERPU2RzYzFhL3ZMazB3VXFGOTRDMkNscHlJN3lZSVYzQ3IrVFQvVmV3TldHSDhiNExQV2hQTEt2T0d5UlE4bU85alhnRWJtV1RPbkF1Tk00VFQyQlYvWjQ5ODFXd2N1a0JYVHloTEkvTzN5UmdSOGN1aWFvdmNHYlhVRmwreHVRaVJKWFA1R3BIYTRma0RvOGU3V01udi9USHUxMmxWL1ZVMlJiWHFHMVg3dW00cHFoWHhweTVEbGd6K0dRNHJaSHVXWWRabW5PQW50TmFacTgzSWNMSUtiMDZ3cWhtUW9xa3owQU1BQUV3TXhtY0hmcGJXcUZwOHhkUUdYeU1HdERIelR5ZHpTVWRmcUtwTFBldmNXR3NtWlFGcEs3elMzZVVNNE0xdVRURFI0dFFLcEVJQ21ESjBvZ01ydVBoVE5XYUlhVWJ5dzZyd0xHN0FIMjhzVzNqUnBsR3plQVNhQXdjTTY4c3EveWpBTE1OTTl2S2R2NkJxZ0RSQ3ZiV3F2c3BmWHp0anFFYmlxb2JOeFpUOGxqRERrWUxWeVd5Rktaa3FnYVV0NXhCNVVwMnNpdGExN1NJN3hqS01GZzQ2RnArNmdoemJZMjU5azVCWlcxSjNVd1RvR2dyRm5KeEpSajkwMWJtZ0JhYVJNakhBYUhyRitOMjJHK1ZOZWpVdmJxbUtmQUlXc1k4K29BU0cwcFVxYUF5dmE5d1VpSkRBQmdwWkJiWGtkU0c3UnBLNENZd1lGemlQMStOQ1N0NjIwcFdhd0Y5Z1F5bXoyZmZNR3JzZ2RVeHB2VGlYK1U5RTNMNHFFeUtkdlpSTi81cU55cXBiU3prYldRNTAvTGFQSm1TV2MvWmZTMEFMT1RMME10OG9IcnM5YThzTGN4SXVrcFpxNmV0RTNEcTZUMXdXa0dmTTc4bTlpcXNkanNvK1RoREFnd2IySXNTVHNWVklaWGFuZlhIbEFiRzdWM2U0SEt1eFo2cnVqU0NTWTNpNk5EdDZvK1YyMGFtUWdtSkpDVVZudnI0YklJWjQvSis2YWI3TGx1VytwS2tHWUJZOUtlczVCNkVOSjhES3Y3enIxelZ0bTU0SmtERFE1a1BMTkVkNjNQb0xTWWVUYkNnZkRLQVljNzZOTVRnUWgvRWI0MVAvZ3dNM1Rtd015Qm1RTm5nd05abzdJa3RkMDZ6MFpkNWpJdVRBN3NBaXJqVk9nb3hueWdzM1gvNmxteFZFNTlXTERXckRaNTUwNVdRRnlZbytMOGFYWDYzWGVUZmpSOXU3eDY1RnpYUG5XaVdIMTQ2bFQ3SnNtNXJ1WjVXLzZZY21EZkJpVmZTajNnYTFPUnNtOVpNLzNoY3lEOUJ4QWZyb3hZKzBiUzRaZjI1aHhUSnRDY0FRTkZkTXZvdFJ0VUx2c3l3NlAzUG1vWjhVSURsYm1VdWV1a2VaL0tVUTJhT2QrWkF6TUhaZzdNSERqL09KQ05tZVdINno1WXhQaVdRUGU5bmVkZmErY2F6eHlZT1RCellPYkF6SUYrRG1TUFpQSElvT1hGMlI5djNFL1pUcG04N2J1dVpmQWhOUmJ5YzVnNXNETUhNcDU0SlBIRzVBWEpBNDdYajJ0R0hwWHh0YmhDNGx5SE1wOVlQL0plbUkwL2pxQkRabEQ1Q0poNkhtZVo4Y0E3M0ZVWGJpamdLZWw2cHJNU1VqYlBsRWNuOGlSbklUNGFlaTJWazg3MXU2eTdlYXBVdlQ0UG81SC9DMFl2N1dyTHRqa3lBQUFBQUVsRlRrU3VRbUNDIn0="}}},"includes":["lychee.ui.Entity"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Entity = lychee.import('lychee.ui.Entity');\n\tconst _FONT   = attachments[\"fnt\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.font  = _FONT;\n\t\tthis.value = '';\n\n\n\t\tthis.setFont(settings.font);\n\t\tthis.setValue(settings.value);\n\n\t\tdelete settings.font;\n\t\tdelete settings.value;\n\n\n\t\tsettings.width  = typeof settings.width === 'number'  ? settings.width  : this.width;\n\t\tsettings.height = typeof settings.height === 'number' ? settings.height : this.height;\n\t\tsettings.shape  = _Entity.SHAPE.rectangle;\n\n\n\t\t_Entity.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet font = lychee.deserialize(blob.font);\n\t\t\tif (font !== null) {\n\t\t\t\tthis.setFont(font);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Entity.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.entity.Label';\n\n\t\t\tlet settings = data['arguments'][0];\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.value !== '') settings.value = this.value;\n\n\n\t\t\tif (this.font !== null) blob.font = lychee.serialize(this.font);\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\n\t\t\tlet x = position.x + offsetX;\n\t\t\tlet y = position.y + offsetY;\n\n\n\t\t\tlet font  = this.font;\n\t\t\tlet value = this.value;\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\n\t\t\tif (font !== null) {\n\n\t\t\t\tlet cur = font.measure(value);\n\t\t\t\tlet max = this.width;\n\n\t\t\t\tif (cur.realwidth <= max) {\n\n\t\t\t\t\trenderer.drawText(\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tfont,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet len = (max / cur.realwidth * value.length) | 0;\n\t\t\t\t\tlet str = value.substr(0, len);\n\n\t\t\t\t\trenderer.drawText(\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tstr,\n\t\t\t\t\t\tfont,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetFont: function(font) {\n\n\t\t\tfont = font instanceof Font ? font : null;\n\n\n\t\t\tif (font !== null) {\n\n\t\t\t\tthis.font = font;\n\n\t\t\t\t// refresh the layout\n\t\t\t\tif (this.value !== '') {\n\t\t\t\t\tthis.setValue(this.value);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetValue: function(value) {\n\n\t\t\tvalue = typeof value === 'string' ? value : null;\n\n\n\t\t\tif (value !== null) {\n\n\t\t\t\tlet font = this.font;\n\t\t\t\tif (font !== null) {\n\n\t\t\t\t\tlet dim = font.measure(value);\n\n\t\t\t\t\tthis.width  = dim.realwidth;\n\t\t\t\t\tthis.height = dim.realheight;\n\n\t\t\t\t}\n\n\n\t\t\t\tthis.value = value;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.Entity":{"constructor":"lychee.Definition","arguments":["lychee.ui.Entity"],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter = lychee.import('lychee.event.Emitter');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof settings.width  === 'number' ? settings.width  : 0;\n\t\tthis.height = typeof settings.height === 'number' ? settings.height : 0;\n\t\tthis.depth  = typeof settings.depth === 'number'  ? settings.depth  : 0;\n\t\tthis.radius = typeof settings.radius === 'number' ? settings.radius : 0;\n\n\t\tthis.alpha     = 1;\n\t\tthis.collision = Composite.COLLISION.none;\n\t\tthis.effects   = [];\n\t\tthis.shape     = Composite.SHAPE.rectangle;\n\t\tthis.state     = 'default';\n\t\tthis.position  = { x: 0, y: 0, z: 0 };\n\t\tthis.visible   = true;\n\n\t\tthis.__states  = { 'default': null, 'active': null };\n\n\n\t\tif (settings.states instanceof Object) {\n\n\t\t\tthis.__states = { 'default': null, 'active': null };\n\n\t\t\tfor (let id in settings.states) {\n\n\t\t\t\tif (settings.states.hasOwnProperty(id)) {\n\t\t\t\t\tthis.__states[id] = settings.states[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tthis.setAlpha(settings.alpha);\n\t\tthis.setShape(settings.shape);\n\t\tthis.setState(settings.state);\n\t\tthis.setPosition(settings.position);\n\t\tthis.setVisible(settings.visible);\n\n\n\t\t_Emitter.call(this);\n\n\t\tsettings = null;\n\n\t};\n\n\n\t// Same ENUM values as lychee.app.Entity\n\tComposite.COLLISION = {\n\t\tnone: 0,\n\t\tA:    1,\n\t\tB:    2,\n\t\tC:    3,\n\t\tD:    4\n\t};\n\n\n\t// Same ENUM values as lychee.app.Entity\n\tComposite.SHAPE = {\n\t\tcircle:    0,\n\t\trectangle: 1,\n\t\tsphere:    2,\n\t\tcuboid:    3\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.Entity';\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.width  !== 0) settings.width  = this.width;\n\t\t\tif (this.height !== 0) settings.height = this.height;\n\t\t\tif (this.depth !== 0)  settings.depth  = this.depth;\n\t\t\tif (this.radius !== 0) settings.radius = this.radius;\n\n\t\t\tif (this.alpha !== 1)                          settings.alpha   = this.alpha;\n\t\t\tif (this.shape !== Composite.SHAPE.rectangle)  settings.shape   = this.shape;\n\t\t\tif (this.state !== 'default')                  settings.state   = this.state;\n\t\t\tif (Object.keys(this.__states).length > 0)     settings.states  = this.__states;\n\t\t\tif (this.visible !== true)                     settings.visible = this.visible;\n\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0) {\n\n\t\t\t\tsettings.position = {};\n\n\t\t\t\tif (this.position.x !== 0) settings.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) settings.position.y = this.position.y;\n\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = settings;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\t\t\t\teffects[e].render(renderer, offsetX, offsetY);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\tlet effect = effects[e];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tel--;\n\t\t\t\t\te--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === Composite.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tcollidesWith: function(entity) {\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = Math.min(Math.max(alpha, 0), 1);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetShape: function(shape) {\n\n\t\t\tshape = lychee.enumof(Composite.SHAPE, shape) ? shape : null;\n\n\n\t\t\tif (shape !== null) {\n\n\t\t\t\tthis.shape = shape;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetStateMap: function() {\n\t\t\treturn this.__states[this.state];\n\t\t},\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__states[id] !== undefined) {\n\n\t\t\t\tthis.state = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVisible: function(visible) {\n\n\t\t\tif (visible === true || visible === false) {\n\n\t\t\t\tthis.visible = visible;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.entity.Goal":{"constructor":"lychee.Definition","arguments":["game.entity.Goal"],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy/source/entity/Goal.json"],"blob":{"buffer":"data:application/json;base64,ewoJIndpZHRoIjogNDAsCgkiaGVpZ2h0IjogMjU2LAoJImNvbGxpc2lvbiI6IDEsCgkic2hhcGUiOiAxLAoJInN0YXRlIjogImRlZmF1bHQiLAoJInN0YXRlcyI6IHsKCQkiZGVmYXVsdCI6IHsKCQkJImFuaW1hdGlvbiI6IGZhbHNlCgkJfQoJfSwKCSJtYXAiOiB7CgkJImRlZmF1bHQiOiBbCgkJCXsKCQkJCSJ4IjogMCwKCQkJCSJ5IjogMCwKCQkJCSJ3IjogNDAsCgkJCQkiaCI6IDI1NgoJCQl9CgkJXQoJfQp9"}},"png":{"constructor":"Texture","arguments":["/projects/flappy/source/entity/Goal.png"],"blob":{"buffer":"data:image/png;base64,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"}}},"includes":["lychee.app.Sprite"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Sprite  = lychee.import('lychee.app.Sprite');\n\tconst _CONFIG  = attachments[\"json\"].buffer;\n\tconst _TEXTURE = attachments[\"png\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, _CONFIG, data);\n\n\n\t\tsettings.texture  = _TEXTURE;\n\t\tsettings.position = {\n\t\t\tx: -4096,\n\t\t\ty: 0\n\t\t};\n\t\tsettings.velocity = {\n\t\t\tx: -256\n\t\t};\n\n\n\t\t_Sprite.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Sprite.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.entity.Goal';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcollidesWith: function(plane) {\n\n\t\t\tlet px = plane.position.x;\n\t\t\tlet py = plane.position.y;\n\t\t\tlet pw = plane.width;\n\t\t\tlet ph = plane.height;\n\n\t\t\tlet x1 = this.position.x - this.width / 2;\n\t\t\tlet x2 = this.position.x + this.width / 2;\n\n\t\t\t// XXX: Let planes go 8px into the boxes (40px bb w/h)\n\t\t\tlet y1 = this.position.y - (this.height - 32 * 2) / 2;\n\t\t\tlet y2 = this.position.y + (this.height - 32 * 2) / 2;\n\n\n\t\t\tif (px + pw / 2 > x1 && px - pw / 2 < x2) {\n\n\t\t\t\tif (py - ph / 2 > y1 && py + ph / 2 < y2) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Sprite":{"constructor":"lychee.Definition","arguments":["lychee.app.Sprite"],"blob":{"attaches":{},"includes":["lychee.app.Entity"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Entity = lychee.import('lychee.app.Entity');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.frame   = 0;\n\t\tthis.texture = null;\n\n\t\tthis.__animation = {\n\t\t\tactive:   false,\n\t\t\tstart:    null,\n\t\t\tframes:   0,\n\t\t\tduration: 0,\n\t\t\tloop:     false\n\t\t};\n\t\tthis.__map = {};\n\n\n\t\tthis.setAnimation(settings.animation);\n\t\tthis.setTexture(settings.texture);\n\t\tthis.setMap(settings.map);\n\n\t\tdelete settings.texture;\n\t\tdelete settings.map;\n\n\n\t\t_Entity.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet texture = lychee.deserialize(blob.texture);\n\t\t\tif (texture !== null) {\n\t\t\t\tthis.setTexture(texture);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Entity.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.app.Sprite';\n\n\t\t\tlet settings = data['arguments'][0];\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.__animation.active === true) {\n\n\t\t\t\tsettings.animation = {};\n\n\t\t\t\tif (this.__animation.duration !== 1000) settings.animation.duration = this.__animation.duration;\n\t\t\t\tif (this.frame !== 0)                   settings.animation.frame    = this.frame;\n\t\t\t\tif (this.__animation.frames !== 25)     settings.animation.frames   = this.__animation.frames;\n\t\t\t\tif (this.__animation.loop !== false)    settings.animation.loop     = true;\n\n\t\t\t}\n\n\t\t\tif (Object.keys(this.__map).length > 0) {\n\n\t\t\t\tsettings.map = {};\n\n\n\t\t\t\tfor (let stateId in this.__map) {\n\n\t\t\t\t\tsettings.map[stateId] = [];\n\n\n\t\t\t\t\tlet frames = this.__map[stateId];\n\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\tlet frame  = frames[f];\n\t\t\t\t\t\tlet sframe = {};\n\n\t\t\t\t\t\tif (frame.x !== 0) sframe.x = frame.x;\n\t\t\t\t\t\tif (frame.y !== 0) sframe.y = frame.y;\n\t\t\t\t\t\tif (frame.w !== 0) sframe.w = frame.w;\n\t\t\t\t\t\tif (frame.h !== 0) sframe.h = frame.h;\n\n\n\t\t\t\t\t\tsettings.map[stateId].push(sframe);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.texture !== null) blob.texture = lychee.serialize(this.texture);\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet texture = this.texture;\n\t\t\tif (texture !== null) {\n\n\t\t\t\tlet alpha    = this.alpha;\n\t\t\t\tlet position = this.position;\n\n\t\t\t\tlet x1 = 0;\n\t\t\t\tlet y1 = 0;\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t\t}\n\n\n\t\t\t\tlet map = this.getMap();\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tx1 = position.x + offsetX - map.w / 2;\n\t\t\t\t\ty1 = position.y + offsetY - map.h / 2;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture,\n\t\t\t\t\t\tmap\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet hw = (this.width / 2)  || this.radius;\n\t\t\t\t\tlet hh = (this.height / 2) || this.radius;\n\n\t\t\t\t\tx1 = position.x + offsetX - hw;\n\t\t\t\t\ty1 = position.y + offsetY - hh;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t_Entity.prototype.render.call(this, renderer, offsetX, offsetY);\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\t_Entity.prototype.update.call(this, clock, delta);\n\n\n\t\t\tlet animation = this.__animation;\n\n\t\t\t// 1. Animation (Interpolation)\n\t\t\tif (animation.active === true) {\n\n\t\t\t\tif (animation.start === null) {\n\t\t\t\t\tanimation.start = clock;\n\t\t\t\t}\n\n\t\t\t\tif (animation.start !== null) {\n\n\t\t\t\t\tlet t = (clock - animation.start) / animation.duration;\n\t\t\t\t\tif (t <= 1) {\n\n\t\t\t\t\t\tthis.frame = Math.max(0, Math.ceil(t * animation.frames) - 1);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (animation.loop === true) {\n\t\t\t\t\t\t\tanimation.start = clock;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.frame = animation.frames - 1;\n\t\t\t\t\t\t\tanimation.active = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetAnimation: function(settings) {\n\n\t\t\tsettings = settings instanceof Object ? settings : null;\n\n\n\t\t\tif (settings !== null) {\n\n\t\t\t\tlet duration = typeof settings.duration === 'number' ? settings.duration : 1000;\n\t\t\t\tlet frame    = typeof settings.frame === 'number'    ? settings.frame    : 0;\n\t\t\t\tlet frames   = typeof settings.frames === 'number'   ? settings.frames   : 25;\n\t\t\t\tlet loop     = settings.loop === true;\n\n\n\t\t\t\tlet animation = this.__animation;\n\n\t\t\t\tanimation.start    = null;\n\t\t\t\tanimation.active   = true;\n\t\t\t\tanimation.duration = duration;\n\t\t\t\tanimation.frames   = frames;\n\t\t\t\tanimation.loop     = loop;\n\n\t\t\t\tthis.frame = frame;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tclearAnimation: function() {\n\n\t\t\tthis.__animation.active = false;\n\t\t\tthis.frame = 0;\n\n\t\t},\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet result = _Entity.prototype.setState.call(this, id);\n\t\t\tif (result === true) {\n\n\t\t\t\tlet map = this.__map[this.state] || null;\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tif (map instanceof Array) {\n\n\t\t\t\t\t\tlet statemap = this.getStateMap();\n\t\t\t\t\t\tif (statemap !== null && statemap instanceof Object) {\n\n\t\t\t\t\t\t\tthis.clearAnimation();\n\n\t\t\t\t\t\t\tif (statemap.animation === true) {\n\n\t\t\t\t\t\t\t\tthis.setAnimation({\n\t\t\t\t\t\t\t\t\tduration: statemap.duration || 1000,\n\t\t\t\t\t\t\t\t\tframe:    0,\n\t\t\t\t\t\t\t\t\tframes:   map.length,\n\t\t\t\t\t\t\t\t\tloop:     statemap.loop === true\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tmap = map[0];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (map.width !== undefined && typeof map.width === 'number') {\n\t\t\t\t\t\tthis.width = map.width;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.height !== undefined && typeof map.height === 'number') {\n\t\t\t\t\t\tthis.height = map.height;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.radius !== undefined && typeof map.radius === 'number') {\n\t\t\t\t\t\tthis.radius = map.radius;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tsetTexture: function(texture) {\n\n\t\t\ttexture = texture instanceof Texture ? texture : null;\n\n\n\t\t\tthis.texture = texture;\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tgetMap: function() {\n\n\t\t\tlet state = this.state;\n\t\t\tlet frame = this.frame;\n\n\t\t\tif (this.__map[state] instanceof Array && this.__map[state][frame] !== undefined) {\n\t\t\t\treturn this.__map[state][frame];\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tsetMap: function(map) {\n\n\t\t\tmap = map instanceof Object ? map : null;\n\n\n\t\t\tlet valid = false;\n\n\t\t\tif (map !== null) {\n\n\t\t\t\tfor (let stateId in map) {\n\n\t\t\t\t\tlet frames = map[stateId];\n\t\t\t\t\tif (frames instanceof Array) {\n\n\t\t\t\t\t\tthis.__map[stateId] = [];\n\n\n\t\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\t\tlet frame = frames[f];\n\t\t\t\t\t\t\tif (frame instanceof Object) {\n\n\t\t\t\t\t\t\t\tframe.x = typeof frame.x === 'number' ? frame.x : 0;\n\t\t\t\t\t\t\t\tframe.y = typeof frame.y === 'number' ? frame.y : 0;\n\t\t\t\t\t\t\t\tframe.w = typeof frame.w === 'number' ? frame.w : 0;\n\t\t\t\t\t\t\t\tframe.h = typeof frame.h === 'number' ? frame.h : 0;\n\n\n\t\t\t\t\t\t\t\tthis.__map[stateId].push(frame);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tvalid = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn valid;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.entity.Plane":{"constructor":"lychee.Definition","arguments":["game.entity.Plane"],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy/source/entity/Plane.json"],"blob":{"buffer":"data:application/json;base64,ewoJIndpZHRoIjogNDAsCgkiaGVpZ2h0IjogMzIsCgkiY29sbGlzaW9uIjogMSwKCSJzaGFwZSI6IDEsCgkic3RhdGUiOiAiZGVmYXVsdCIsCgkic3RhdGVzIjogewoJCSJkZWZhdWx0IjogewoJCQkiYW5pbWF0aW9uIjogZmFsc2UKCQl9Cgl9LAoJIm1hcCI6IHsKCQkiZGVmYXVsdCI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAwLAoJCQkJInciOiA0MCwKCQkJCSJoIjogMzIKCQkJfQoJCV0KCX0KfQ=="}},"png":{"constructor":"Texture","arguments":["/projects/flappy/source/entity/Plane.png"],"blob":{"buffer":"data:image/png;base64,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"}}},"includes":["lychee.app.Sprite"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Sprite  = lychee.import('lychee.app.Sprite');\n\tconst _CONFIG  = attachments[\"json\"].buffer;\n\tconst _TEXTURE = attachments[\"png\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, _CONFIG, data);\n\n\n\t\tthis.alive = true;\n\n\t\tthis.__canflap = true;\n\t\tthis.__timeout = null;\n\n\n\t\tsettings.texture = _TEXTURE;\n\t\tsettings.position = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\t\tsettings.velocity = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\n\t\t_Sprite.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Sprite.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.entity.Plane';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tflap: function() {\n\n\t\t\tif (this.__canflap === true) {\n\n\t\t\t\tthis.velocity.y = -256;\n\n\t\t\t\tthis.__canflap  = false;\n\t\t\t\tthis.__timeout  = null;\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tif (this.__timeout === null) {\n\t\t\t\tthis.__timeout = clock + 250;\n\t\t\t} else if (clock > this.__timeout) {\n\t\t\t\tthis.__canflap = true;\n\t\t\t}\n\n\t\t\tif (this.alive === true) {\n\n\t\t\t\t_Sprite.prototype.update.call(this, clock, delta);\n\n\t\t\t\tthis.velocity.y += (delta / 1000) * 256 * 3;\n\n\t\t\t} else {\n\n\t\t\t\tlet effects = this.effects;\n\t\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\t\tlet effect = effects[e];\n\t\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\t\tel--;\n\t\t\t\t\t\te--;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.alive === true) {\n\n\t\t\t\t_Sprite.prototype.render.call(this, renderer, offsetX, offsetY);\n\n\t\t\t} else {\n\n\t\t\t\tlet effects = this.effects;\n\t\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\t\t\t\t\teffects[e].render(renderer, offsetX, offsetY);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.ui.sprite.Background":{"constructor":"lychee.Definition","arguments":["game.ui.sprite.Background"],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy/source/ui/sprite/Background.json"],"blob":{"buffer":"data:application/json;base64,ewoJIndpZHRoIjogMTAyNCwKCSJoZWlnaHQiOiA1MTIsCgkic3RhdGVzIjogewoJCSJkZWZhdWx0IjogewoJCQkiYW5pbWF0aW9uIjogZmFsc2UKCQl9Cgl9LAoJIm1hcCI6IHsKCQkiZGVmYXVsdCI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAwLAoJCQkJInciOiAxMDI0LAoJCQkJImgiOiA1MTIKCQkJfQoJCV0KCX0KfQ=="}},"png":{"constructor":"Texture","arguments":["/projects/flappy/source/ui/sprite/Background.png"],"blob":{"buffer":"data:image/png;base64,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"}}},"includes":["lychee.ui.sprite.Background"],"exports":"function (lychee, global, attachments) {\n\n\tconst _TEXTURE    = attachments[\"png\"];\n\tconst _CONFIG     = attachments[\"json\"].buffer;\n\tconst _Background = lychee.import('lychee.ui.sprite.Background');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tsettings.color   = '#050a0d';\n\t\tsettings.texture = _TEXTURE;\n\t\tsettings.map     = _CONFIG.map;\n\t\tsettings.states  = _CONFIG.states;\n\t\tsettings.state   = 'default';\n\t\tsettings.width   = _CONFIG.width;\n\t\tsettings.height  = _CONFIG.height;\n\n\n\t\t_Background.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Background.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'game.ui.sprite.Background';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.sprite.Background":{"constructor":"lychee.Definition","arguments":["lychee.ui.sprite.Background"],"blob":{"attaches":{},"includes":["lychee.ui.Sprite"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Sprite = lychee.import('lychee.ui.Sprite');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _render_buffer = function(renderer) {\n\n\t\tif (this.__buffer !== null) {\n\t\t\tthis.__buffer.resize(this.width, this.height);\n\t\t} else {\n\t\t\tthis.__buffer = renderer.createBuffer(this.width, this.height);\n\t\t}\n\n\n\t\trenderer.clear(this.__buffer);\n\t\trenderer.setBuffer(this.__buffer);\n\t\trenderer.setAlpha(1.0);\n\n\n\t\tlet color = this.color;\n\t\tif (color !== null) {\n\n\t\t\trenderer.drawBox(\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tthis.width,\n\t\t\t\tthis.height,\n\t\t\t\tcolor,\n\t\t\t\ttrue\n\t\t\t);\n\n\t\t}\n\n\n\t\tlet texture = this.texture;\n\t\tlet map     = this.getMap();\n\t\tif (texture !== null && map !== null) {\n\n\t\t\tif (map.w !== 0 && map.h !== 0 && (map.w <= this.width || map.h <= this.height)) {\n\n\t\t\t\tlet px = this.origin.x - map.w;\n\t\t\t\tlet py = this.origin.y - map.h;\n\n\n\t\t\t\twhile (px < this.width) {\n\n\t\t\t\t\tpy = this.origin.y - map.h;\n\n\t\t\t\t\twhile (py < this.height) {\n\n\t\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\t\tpx,\n\t\t\t\t\t\t\tpy,\n\t\t\t\t\t\t\ttexture,\n\t\t\t\t\t\t\tmap\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tpy += map.h;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tpx += map.w;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\ttexture,\n\t\t\t\t\tmap\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\trenderer.setBuffer(null);\n\t\tthis.__isDirty = false;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.color  = null;\n\t\tthis.origin = { x: 0, y: 0 };\n\n\t\tthis.__buffer  = null;\n\t\tthis.__isDirty = true;\n\n\n\t\tthis.setColor(settings.color);\n\n\n\t\tdelete settings.color;\n\n\n\t\tsettings.width  = typeof settings.width === 'number'  ? settings.width  : 512;\n\t\tsettings.height = typeof settings.height === 'number' ? settings.height : 512;\n\t\tsettings.shape  = lychee.ui.Entity.SHAPE.rectangle;\n\n\n\t\t_Sprite.call(this, settings);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('reshape', function(orientation, rotation, width, height) {\n\n\t\t\tif (typeof width === 'number' && typeof height === 'number') {\n\n\t\t\t\tthis.width     = width;\n\t\t\t\tthis.height    = height;\n\t\t\t\tthis.__isDirty = true;\n\n\t\t\t}\n\n\t\t}, this);\n\n\n\t\tthis.setOrigin(settings.origin);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Sprite.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.sprite.Background';\n\n\t\t\tlet settings = data['arguments'][0];\n\n\n\t\t\tif (this.color !== null) settings.color = this.color;\n\n\n\t\t\tif (this.origin.x !== 0 || this.origin.y !== 0) {\n\n\t\t\t\tsettings.origin = {};\n\n\t\t\t\tif (this.origin.x !== 0) settings.origin.x = this.origin.x;\n\t\t\t\tif (this.origin.y !== 0) settings.origin.y = this.origin.y;\n\n\t\t\t}\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet alpha    = this.alpha;\n\t\t\tlet position = this.position;\n\t\t\tlet x        = position.x + offsetX;\n\t\t\tlet y        = position.y + offsetY;\n\t\t\tlet hwidth   = this.width  / 2;\n\t\t\tlet hheight  = this.height / 2;\n\n\n\t\t\tif (this.__isDirty === true) {\n\t\t\t\t_render_buffer.call(this, renderer);\n\t\t\t}\n\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t}\n\n\t\t\tif (this.__buffer !== null) {\n\n\t\t\t\trenderer.drawBuffer(\n\t\t\t\t\tx - hwidth,\n\t\t\t\t\ty - hheight,\n\t\t\t\t\tthis.__buffer\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif (alpha !== 1) {\n\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetColor: function(color) {\n\n\t\t\tcolor = /(#[AaBbCcDdEeFf0-9]{6})/g.test(color) ? color : null;\n\n\n\t\t\tif (color !== null) {\n\n\t\t\t\tthis.color     = color;\n\t\t\t\tthis.__isDirty = true;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetOrigin: function(origin) {\n\n\t\t\torigin = origin instanceof Object ? origin : null;\n\n\n\t\t\tif (origin !== null) {\n\n\t\t\t\tthis.origin.x = typeof origin.x === 'number' ? origin.x : this.origin.x;\n\t\t\t\tthis.origin.y = typeof origin.y === 'number' ? origin.y : this.origin.y;\n\n\t\t\t\tlet map = this.getMap();\n\t\t\t\tif (map !== null) {\n\t\t\t\t\tthis.origin.x %= map.w;\n\t\t\t\t\tthis.origin.y %= map.h;\n\t\t\t\t}\n\n\t\t\t\tthis.__isDirty = true;\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.Agent":{"constructor":"lychee.Definition","arguments":["lychee.ai.Agent"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _validate_brain = function(brain) {\n\n\t\tif (brain instanceof Object) {\n\n\t\t\tif (typeof brain.update === 'function' && typeof brain.setControls === 'function' && typeof brain.setSensors === 'function') {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn false;\n\n\t};\n\n\tconst _train_brain = function() {\n\n\t\tlet brain = this.brain;\n\t\tif (brain !== null) {\n\n\t\t\tlet trainings = this.trainings;\n\n\t\t\tfor (let t = 0, tl = trainings.length; t < tl; t++) {\n\n\t\t\t\tlet training   = trainings[t];\n\t\t\t\tlet iterations = training.iterations || 1;\n\n\t\t\t\tfor (let i = 0; i < iterations; i++) {\n\t\t\t\t\tbrain.learn(training.inputs, training.outputs);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.alive     = true;\n\t\tthis.brain     = null;\n\t\tthis.fitness   = 0;\n\t\tthis.trainings = [];\n\n\n\t\tthis.setAlive(settings.alive);\n\t\tthis.setBrain(settings.brain);\n\t\tthis.setFitness(settings.fitness);\n\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet brain = lychee.deserialize(blob.brain);\n\t\t\tif (brain !== null) {\n\t\t\t\tthis.setBrain(brain);\n\t\t\t}\n\n\t\t\tif (blob.trainings instanceof Array) {\n\t\t\t\tthis.trainings = blob.trainings.map(lychee.deserialize);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = {};\n\n\n\t\t\tif (this.fitness !== 0) settings.fitness = this.fitness;\n\n\n\t\t\tif (this.brain !== null)       blob.brain     = lychee.serialize(this.brain);\n\t\t\tif (this.trainings.length > 0) blob.trainings = this.trainings.map(lychee.serialize);\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.ai.Agent',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet brain = this.brain;\n\t\t\tif (brain !== null) {\n\t\t\t\tbrain.update(clock, delta);\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcrossover: function(agent) {\n\n\t\t\tagent = agent instanceof Composite ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\t// XXX: This is implemented by AI Agents\n\n\t\t\t\tlet zw_agent = lychee.deserialize(lychee.serialize(this));\n\t\t\t\tlet zz_agent = lychee.deserialize(lychee.serialize(agent));\n\n\t\t\t\treturn [ zw_agent, zz_agent ];\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\treward: function(diff, training) {\n\n\t\t\tdiff     = typeof diff === 'number'   ? Math.abs(diff | 0) : 1;\n\t\t\ttraining = training instanceof Object ? training           : null;\n\n\n\t\t\tthis.fitness += diff;\n\n\n\t\t\tif (training !== null) {\n\n\t\t\t\ttraining.iterations = diff;\n\t\t\t\tthis.trainings.push(training);\n\t\t\t\t_train_brain.call(this);\n\n\t\t\t}\n\n\t\t},\n\n\t\tpunish: function(diff, training) {\n\n\t\t\tdiff     = typeof diff === 'number'   ? Math.abs(diff | 0) : 1;\n\t\t\ttraining = training instanceof Object ? training           : null;\n\n\n\t\t\tthis.fitness -= diff;\n\n\n\t\t\tif (training !== null) {\n\n\t\t\t\ttraining.iterations = diff;\n\t\t\t\tthis.trainings.push(training);\n\t\t\t\t_train_brain.call(this);\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetAlive: function(alive) {\n\n\t\t\tif (alive === true || alive === false) {\n\n\t\t\t\tthis.alive = alive;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetBrain: function(brain) {\n\n\t\t\tbrain = _validate_brain(brain) === true ? brain : null;\n\n\n\t\t\tif (brain !== null) {\n\n\t\t\t\tthis.brain = brain;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetFitness: function(fitness) {\n\n\t\t\tfitness = typeof fitness === 'number' ? (fitness | 0) : null;\n\n\n\t\t\tif (fitness !== null) {\n\n\t\t\t\tthis.fitness = fitness;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.bnn.Agent":{"constructor":"lychee.Definition","arguments":["lychee.ai.bnn.Agent"],"blob":{"attaches":{},"requires":["lychee.ai.bnn.Brain"],"includes":["lychee.ai.Agent"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Agent = lychee.import('lychee.ai.Agent');\n\tconst _Brain = lychee.import('lychee.ai.bnn.Brain');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tsettings.brain = settings.brain || new _Brain();\n\n\t\t_Agent.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Agent.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ai.bnn.Agent';\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.enn.Agent":{"constructor":"lychee.Definition","arguments":["lychee.ai.enn.Agent"],"blob":{"attaches":{},"requires":["lychee.ai.Genome","lychee.ai.enn.Brain"],"includes":["lychee.ai.Agent"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Agent          = lychee.import('lychee.ai.Agent');\n\tconst _Genome         = lychee.import('lychee.ai.Genome');\n\tconst _Brain          = lychee.import('lychee.ai.enn.Brain');\n\tconst _MUTATION_RANGE = 0.25;\n\tconst _MUTATION_RATE  = 0.1;\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.genome = null;\n\n\n\t\tsettings.brain  = settings.brain  || new _Brain();\n\t\tsettings.genome = settings.genome || new _Genome();\n\n\t\t_Agent.call(this, settings);\n\n\n\t\tthis.setGenome(settings.genome);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Agent.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ai.enn.Agent';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcrossover: function(agent) {\n\n\t\t\tagent = lychee.interfaceof(Composite, agent) ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\tlet zw_brain  = this.brain;\n\t\t\t\tlet zw_genome = this.genome;\n\t\t\t\tlet zz_brain  = agent.brain;\n\t\t\t\tlet zz_genome = agent.genome;\n\n\n\t\t\t\tif (zw_brain !== null && zz_brain !== null) {\n\t\t\t\t\tzw_genome.setGene('weights', zw_brain.getWeights());\n\t\t\t\t\tzz_genome.setGene('weights', zz_brain.getWeights());\n\t\t\t\t}\n\n\n\t\t\t\tlet zw_dna = zw_genome.getGene('weights');\n\t\t\t\tlet zz_dna = zz_genome.getGene('weights');\n\n\t\t\t\tif (zw_dna.length === zz_dna.length) {\n\n\t\t\t\t\tlet zw0_dna   = [];\n\t\t\t\t\tlet zw1_dna   = [];\n\t\t\t\t\tlet dna_split = (Math.random() * zw_dna.length) | 0;\n\n\n\t\t\t\t\tfor (let d = 0, dl = zw_dna.length; d < dl; d++) {\n\n\t\t\t\t\t\tif (d <= dna_split) {\n\t\t\t\t\t\t\tzw0_dna.push(zw_dna[d]);\n\t\t\t\t\t\t\tzw1_dna.push(zz_dna[d]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tzw0_dna.push(zz_dna[d]);\n\t\t\t\t\t\t\tzw1_dna.push(zw_dna[d]);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif (Math.random() <= _MUTATION_RATE) {\n\t\t\t\t\t\t\tzw0_dna[d] += (Math.random() * _MUTATION_RANGE * 2) - _MUTATION_RANGE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Math.random() <= _MUTATION_RATE) {\n\t\t\t\t\t\t\tzw1_dna[d] += (Math.random() * _MUTATION_RANGE * 2) - _MUTATION_RANGE;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tlet zw0_brain = null;\n\t\t\t\t\tlet zw1_brain = null;\n\n\t\t\t\t\tif (zw_brain !== null && zz_brain !== null) {\n\n\t\t\t\t\t\tzw0_brain = lychee.deserialize(lychee.serialize(zw_brain));\n\t\t\t\t\t\tzw0_brain.setWeights(zw0_dna);\n\n\t\t\t\t\t\tzw1_brain = lychee.deserialize(lychee.serialize(zz_brain));\n\t\t\t\t\t\tzw1_brain.setWeights(zw1_dna);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tlet zw0_genome = lychee.deserialize(lychee.serialize(zw_genome));\n\t\t\t\t\tlet zw1_genome = lychee.deserialize(lychee.serialize(zz_genome));\n\n\t\t\t\t\tzw0_genome.setGene('weights', zw0_dna);\n\t\t\t\t\tzw1_genome.setGene('weights', zw1_dna);\n\n\t\t\t\t\tlet zw0_baby = new Composite({ brain: zw0_brain, genome: zw0_genome });\n\t\t\t\t\tlet zw1_baby = new Composite({ brain: zw1_brain, genome: zw1_genome });\n\n\n\t\t\t\t\treturn [ zw0_baby, zw1_baby ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tsetGenome: function(genome) {\n\n\t\t\tgenome = genome instanceof _Genome ? genome : null;\n\n\n\t\t\tif (genome !== null) {\n\n\t\t\t\tthis.genome = genome;\n\n\n\t\t\t\tlet brain = this.brain;\n\t\t\t\tif (brain !== null) {\n\n\t\t\t\t\tlet gene = genome.getGene('weights');\n\t\t\t\t\tif (gene !== null && gene.length > 0) {\n\n\t\t\t\t\t\tbrain.setWeights(gene);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgenome.setGene('weights', brain.getWeights());\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.neat.Agent":{"constructor":"lychee.Definition","arguments":["lychee.ai.neat.Agent"],"blob":{"attaches":{},"requires":["lychee.ai.neat.Genome"],"includes":["lychee.ai.Agent"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Agent            = lychee.import('lychee.ai.Agent');\n\tconst _Genome           = lychee.import('lychee.ai.neat.Genome');\n\tconst _Brain            = lychee.import('lychee.ai.neat.Brain');\n\tconst _MUTATION_BIAS    = 0.40;\n\tconst _MUTATION_LINK    = 0.50;\n\tconst _MUTATION_NODE    = 0.50;\n\tconst _MUTATION_ENABLE  = 0.30;\n\tconst _MUTATION_DISABLE = 0.40;\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tsettings.brain = settings.brain || new _Brain();\n\n\t\t_Agent.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Agent.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ai.neat.Agent';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tcrossover: function(agent) {\n\n\t\t\tagent = lychee.interfaceof(Composite, agent) ? agent : null;\n\n\n\t\t\tif (agent !== null) {\n\n\t\t\t\tlet zw_brain = null;\n\t\t\t\tlet zz_brain = null;\n\n\t\t\t\tif (agent.fitness > this.fitness) {\n\t\t\t\t\tzw_brain = this.brain;\n\t\t\t\t\tzz_brain = agent.brain;\n\t\t\t\t} else {\n\t\t\t\t\tzw_brain = agent.brain;\n\t\t\t\t\tzz_brain = this.brain;\n\t\t\t\t}\n\n\n\t\t\t\tlet zw_genes    = zw_brain.getGenes();\n\t\t\t\tlet zz_genes    = zz_brain.getGenes();\n\t\t\t\tlet zw0_genes   = [];\n\t\t\t\tlet innovations = {};\n\n\n\t\t\t\tfor (let z = 0, zl = zw_genes.length; z < zl; z++) {\n\n\t\t\t\t\tlet gene2 = zw_genes[z];\n\t\t\t\t\tinnovations[gene2.innovation] = gene2;\n\n\t\t\t\t}\n\n\t\t\t\tfor (let z = 0, zl = zz_genes.length; z < zl; z++) {\n\n\t\t\t\t\tlet gene1 = zz_genes[z];\n\t\t\t\t\tlet gene2 = innovations[gene1.innovation] || null;\n\t\t\t\t\tlet rand2 = Math.random();\n\n\t\t\t\t\tif (gene2 !== null && gene2.enabled === true && rand2 > 0.5) {\n\t\t\t\t\t\tzw0_genes.push(Object.assign({}, gene2));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tzw0_genes.push(Object.assign({}, gene1));\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tlet zw0_agent = new Composite({\n\t\t\t\t\tbrain: new _Brain({\n\t\t\t\t\t\tgenes: zw0_genes\n\t\t\t\t\t})\n\t\t\t\t});\n\n\n\t\t\t\treturn zw0_agent;\n\n\n\t\t\t}\n\n\t\t},\n\n\t\tmutate: function() {\n\n\t\t\tfor (let mid in this.__mutation) {\n\n\t\t\t\tif (Math.random() > 0.5) {\n\t\t\t\t\tthis.__mutation[mid] *= 0.95;\n\t\t\t\t} else {\n\t\t\t\t\tthis.__mutation[mid] *= 1.05263;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (Math.random() > 0.25) {\n\t\t\t\t// TODO: pointMutate(genome);\n\t\t\t}\n\n\t\t\tif (Math.random() > _MUTATION_LINK) {\n\t\t\t\t// TODO: linkMutate(genome, false);\n\t\t\t}\n\n\t\t\tif (Math.random() > _MUTATION_BIAS) {\n\t\t\t\t// TODO: linkMutate(genome, true);\n\t\t\t}\n\n\n\t\t\tif (Math.random() > _MUTATION_NODE) {\n\t\t\t\t// TODO: nodeMutate(genome);\n\t\t\t}\n\n\t\t\tif (Math.random() > _MUTATION_ENABLE) {\n\t\t\t\t// TODO: Find an enabled gene and disable it\n\t\t\t}\n\n\t\t\tif (Math.random() > _MUTATION_DISABLE) {\n\t\t\t\t// TODO: Find a disabled gene and enable it\n\t\t\t}\n\n\t\t},\n\n\t\treward: function(diff, training) {\n\n\t\t\tdiff     = typeof diff === 'number'   ? Math.abs(diff | 0) : 1;\n\t\t\ttraining = training instanceof Object ? training           : null;\n\n\n\t\t\tthis.fitness += diff;\n\n\t\t\tif (training !== null) {\n\t\t\t\t// XXX: No Reinforcement Learning\n\t\t\t}\n\n\t\t},\n\n\t\tpunish: function(diff, training) {\n\n\t\t\tdiff     = typeof diff === 'number'   ? Math.abs(diff | 0) : 1;\n\t\t\ttraining = training instanceof Object ? training           : null;\n\n\n\t\t\tthis.fitness -= diff;\n\n\t\t\tif (training !== null) {\n\t\t\t\t// XXX: No Reinforcement Learning\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.app.Entity":{"constructor":"lychee.Definition","arguments":["lychee.app.Entity"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _sphere_sphere = function(a, b) {\n\n\t\tlet dx  = Math.sqrt(Math.pow(b.position.x - a.position.x, 2));\n\t\tlet dy  = Math.sqrt(Math.pow(b.position.y - a.position.y, 2));\n\t\tlet dz  = Math.sqrt(Math.pow(b.position.z - a.position.z, 2));\n\n\t\tlet rxy = 0;\n\t\tlet rxz = 0;\n\n\t\tif (a.shape === Composite.SHAPE.sphere) {\n\t\t\trxy += a.radius;\n\t\t\trxz += a.radius;\n\t\t}\n\n\t\tif (b.shape === Composite.SHAPE.sphere) {\n\t\t\trxy += b.radius;\n\t\t\trxz += b.radius;\n\t\t}\n\n\t\treturn ((dx + dy) <= rxy && (dx + dz) <= rxz);\n\n\t};\n\n\tconst _sphere_cuboid = function(a, b) {\n\n\t\tlet r  = a.radius;\n\t\tlet hw = b.width  / 2;\n\t\tlet hh = b.height / 2;\n\t\tlet hd = b.depth  / 2;\n\n\t\tlet ax = a.position.x;\n\t\tlet ay = a.position.y;\n\t\tlet az = a.position.z;\n\n\t\tlet bx = b.position.x;\n\t\tlet by = b.position.y;\n\t\tlet bz = b.position.z;\n\n\t\tlet colx = (ax + r >= bx - hw) && (ax - r <= bx + hw);\n\t\tlet coly = (ay + r >= by - hh) && (ay - r <= by + hh);\n\n\t\tif (a.shape === Composite.SHAPE.circle) {\n\t\t\tr = 0;\n\t\t}\n\n\t\tlet colz = (az + r >= bz - hd) && (az - r <= bz + hd);\n\n\t\treturn (colx && coly && colz);\n\n\t};\n\n\tconst _cuboid_cuboid = function(a, b) {\n\n\t\tlet dx = Math.abs(b.position.x - a.position.x);\n\t\tlet dy = Math.abs(b.position.y - a.position.y);\n\t\tlet dz = Math.abs(b.position.z - a.position.z);\n\n\t\tlet hw = (a.width  + b.width)  / 2;\n\t\tlet hh = (a.height + b.height) / 2;\n\t\tlet hd = (a.depth  + b.depth)  / 2;\n\n\t\treturn (dx <= hw && dy <= hh && dz <= hd);\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.width  = typeof settings.width === 'number'  ? settings.width  : 0;\n\t\tthis.height = typeof settings.height === 'number' ? settings.height : 0;\n\t\tthis.depth  = typeof settings.depth === 'number'  ? settings.depth  : 0;\n\t\tthis.radius = typeof settings.radius === 'number' ? settings.radius : 0;\n\n\t\tthis.alpha     = 1;\n\t\tthis.collision = Composite.COLLISION.none;\n\t\tthis.effects   = [];\n\t\tthis.shape     = Composite.SHAPE.rectangle;\n\t\tthis.state     = 'default';\n\t\tthis.position  = { x: 0, y: 0, z: 0 };\n\t\tthis.velocity  = { x: 0, y: 0, z: 0 };\n\n\t\tthis.__states  = { 'default': null };\n\n\n\t\tif (settings.states instanceof Object) {\n\n\t\t\tthis.__states = { 'default': null };\n\n\t\t\tfor (let id in settings.states) {\n\n\t\t\t\tif (settings.states.hasOwnProperty(id)) {\n\t\t\t\t\tthis.__states[id] = settings.states[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tthis.setAlpha(settings.alpha);\n\t\tthis.setCollision(settings.collision);\n\t\tthis.setShape(settings.shape);\n\t\tthis.setState(settings.state);\n\t\tthis.setPosition(settings.position);\n\t\tthis.setVelocity(settings.velocity);\n\n\n\t\tsettings = null;\n\n\t};\n\n\n\t// Same ENUM values as lychee.ui.Entity\n\tComposite.COLLISION = {\n\t\tnone: 0,\n\t\tA:    1,\n\t\tB:    2,\n\t\tC:    3,\n\t\tD:    4\n\t};\n\n\n\t// Same ENUM values as lychee.ui.Entity\n\tComposite.SHAPE = {\n\t\tcircle:    0,\n\t\trectangle: 1,\n\t\tsphere:    2,\n\t\tcuboid:    3\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = {};\n\n\n\t\t\tif (this.width  !== 0) settings.width  = this.width;\n\t\t\tif (this.height !== 0) settings.height = this.height;\n\t\t\tif (this.depth  !== 0) settings.depth  = this.depth;\n\t\t\tif (this.radius !== 0) settings.radius = this.radius;\n\n\t\t\tif (this.alpha !== 1)                            settings.alpha     = this.alpha;\n\t\t\tif (this.collision !== Composite.COLLISION.none) settings.collision = this.collision;\n\t\t\tif (this.shape !== Composite.SHAPE.rectangle)    settings.shape     = this.shape;\n\t\t\tif (this.state !== 'default')                    settings.state     = this.state;\n\t\t\tif (Object.keys(this.__states).length > 1)       settings.states    = this.__states;\n\n\n\t\t\tif (this.position.x !== 0 || this.position.y !== 0 || this.position.z !== 0) {\n\n\t\t\t\tsettings.position = {};\n\n\t\t\t\tif (this.position.x !== 0) settings.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== 0) settings.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== 0) settings.position.z = this.position.z;\n\n\t\t\t}\n\n\n\t\t\tif (this.velocity.x !== 0 || this.velocity.y !== 0 || this.velocity.z !== 0) {\n\n\t\t\t\tsettings.velocity = {};\n\n\t\t\t\tif (this.velocity.x !== 0) settings.velocity.x = this.velocity.x;\n\t\t\t\tif (this.velocity.y !== 0) settings.velocity.y = this.velocity.y;\n\t\t\t\tif (this.velocity.z !== 0) settings.velocity.z = this.velocity.z;\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.app.Entity',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\t\t\t\teffects[e].render(renderer, offsetX, offsetY);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet velocity = this.velocity;\n\n\t\t\tif (velocity.x !== 0 || velocity.y !== 0 || velocity.z !== 0) {\n\n\t\t\t\tlet x = this.position.x;\n\t\t\t\tlet y = this.position.y;\n\t\t\t\tlet z = this.position.z;\n\n\n\t\t\t\tlet vt = delta / 1000;\n\n\t\t\t\tif (velocity.x !== 0) {\n\t\t\t\t\tx += velocity.x * vt;\n\t\t\t\t}\n\n\t\t\t\tif (velocity.y !== 0) {\n\t\t\t\t\ty += velocity.y * vt;\n\t\t\t\t}\n\n\t\t\t\tif (velocity.z !== 0) {\n\t\t\t\t\tz += velocity.z * vt;\n\t\t\t\t}\n\n\n\t\t\t\tthis.position.x = x;\n\t\t\t\tthis.position.y = y;\n\t\t\t\tthis.position.z = z;\n\n\t\t\t}\n\n\n\t\t\tlet effects = this.effects;\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\tlet effect = effects[e];\n\t\t\t\tif (effect.update(this, clock, delta) === false) {\n\t\t\t\t\tthis.removeEffect(effect);\n\t\t\t\t\tel--;\n\t\t\t\t\te--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tisAtPosition: function(position) {\n\n\t\t\tif (position instanceof Object) {\n\n\t\t\t\tif (typeof position.x === 'number' && typeof position.y === 'number') {\n\n\t\t\t\t\tlet ax = position.x;\n\t\t\t\t\tlet ay = position.y;\n\t\t\t\t\tlet az = position.z;\n\t\t\t\t\tlet bx = this.position.x;\n\t\t\t\t\tlet by = this.position.y;\n\t\t\t\t\tlet bz = this.position.z;\n\n\n\t\t\t\t\tlet shape = this.shape;\n\t\t\t\t\tif (shape === Composite.SHAPE.circle) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.sphere) {\n\n\t\t\t\t\t\tlet dist = Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2) + Math.pow(az - bz, 2));\n\t\t\t\t\t\tif (dist < this.radius) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.rectangle) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\n\n\t\t\t\t\t\treturn colX && colY;\n\n\t\t\t\t\t} else if (shape === Composite.SHAPE.cuboid) {\n\n\t\t\t\t\t\tlet hwidth  = this.width  / 2;\n\t\t\t\t\t\tlet hheight = this.height / 2;\n\t\t\t\t\t\tlet hdepth  = this.depth  / 2;\n\t\t\t\t\t\tlet colX    = (ax >= bx - hwidth)  && (ax <= bx + hwidth);\n\t\t\t\t\t\tlet colY    = (ay >= by - hheight) && (ay <= by + hheight);\n\t\t\t\t\t\tlet colZ    = (az >= bz - hdepth)  && (az <= bz + hdepth);\n\n\n\t\t\t\t\t\treturn colX && colY && colZ;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tcollidesWith: function(entity) {\n\n\t\t\tentity = lychee.interfaceof(lychee.app.Entity, entity) ? entity : null;\n\n\n\t\t\tif (entity !== null) {\n\n\t\t\t\tlet none = Composite.COLLISION.none;\n\t\t\t\tif (this.collision !== entity.collision || this.collision === none || entity.collision === none) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\n\t\t\t\tlet circle    = Composite.SHAPE.circle;\n\t\t\t\tlet sphere    = Composite.SHAPE.sphere;\n\t\t\t\tlet rectangle = Composite.SHAPE.rectangle;\n\t\t\t\tlet cuboid    = Composite.SHAPE.cuboid;\n\n\t\t\t\tlet shapeA    = this.shape;\n\t\t\t\tlet shapeB    = entity.shape;\n\n\t\t\t\tlet issphereA = shapeA === circle    || shapeA === sphere;\n\t\t\t\tlet issphereB = shapeB === circle    || shapeB === sphere;\n\t\t\t\tlet iscuboidA = shapeA === rectangle || shapeA === cuboid;\n\t\t\t\tlet iscuboidB = shapeB === rectangle || shapeB === cuboid;\n\n\t\t\t\tif (issphereA && issphereB) {\n\t\t\t\t\treturn _sphere_sphere(this, entity);\n\t\t\t\t} else if (iscuboidA && iscuboidB) {\n\t\t\t\t\treturn _cuboid_cuboid(this, entity);\n\t\t\t\t} else if (issphereA && iscuboidB) {\n\t\t\t\t\treturn _sphere_cuboid(this, entity);\n\t\t\t\t} else if (iscuboidA && issphereB) {\n\t\t\t\t\treturn _sphere_cuboid(entity, this);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetAlpha: function(alpha) {\n\n\t\t\talpha = typeof alpha === 'number' ? alpha : null;\n\n\n\t\t\tif (alpha !== null) {\n\n\t\t\t\tthis.alpha = Math.min(Math.max(alpha, 0), 1);\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetCollision: function(collision) {\n\n\t\t\tcollision = lychee.enumof(Composite.COLLISION, collision) ? collision : null;\n\n\n\t\t\tif (collision !== null) {\n\n\t\t\t\tthis.collision = collision;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taddEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.effects.push(effect);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffect: function(effect) {\n\n\t\t\teffect = effect instanceof Object && typeof effect.update === 'function' ? effect : null;\n\n\n\t\t\tif (effect !== null) {\n\n\t\t\t\tlet index = this.effects.indexOf(effect);\n\t\t\t\tif (index !== -1) {\n\n\t\t\t\t\tthis.effects.splice(index, 1);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tremoveEffects: function() {\n\n\t\t\tlet effects = this.effects;\n\n\t\t\tfor (let e = 0, el = effects.length; e < el; e++) {\n\n\t\t\t\teffects[e].update(this, Infinity, 0);\n\t\t\t\tthis.removeEffect(effects[e]);\n\n\t\t\t\tel--;\n\t\t\t\te--;\n\n\t\t\t}\n\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tsetPosition: function(position) {\n\n\t\t\tposition = position instanceof Object ? position : null;\n\n\n\t\t\tif (position !== null) {\n\n\t\t\t\tthis.position.x = typeof position.x === 'number' ? position.x : this.position.x;\n\t\t\t\tthis.position.y = typeof position.y === 'number' ? position.y : this.position.y;\n\t\t\t\tthis.position.z = typeof position.z === 'number' ? position.z : this.position.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetShape: function(shape) {\n\n\t\t\tshape = lychee.enumof(Composite.SHAPE, shape) ? shape : null;\n\n\n\t\t\tif (shape !== null) {\n\n\t\t\t\tthis.shape = shape;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetStateMap: function() {\n\t\t\treturn this.__states[this.state];\n\t\t},\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tif (id !== null && this.__states[id] !== undefined) {\n\n\t\t\t\tthis.state = id;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetVelocity: function(velocity) {\n\n\t\t\tvelocity = velocity instanceof Object ? velocity : null;\n\n\n\t\t\tif (velocity !== null) {\n\n\t\t\t\tthis.velocity.x = typeof velocity.x === 'number' ? velocity.x : this.velocity.x;\n\t\t\t\tthis.velocity.y = typeof velocity.y === 'number' ? velocity.y : this.velocity.y;\n\t\t\t\tthis.velocity.z = typeof velocity.z === 'number' ? velocity.z : this.velocity.z;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.socket.WS":{"constructor":"lychee.Definition","arguments":["lychee.net.socket.WS"],"blob":{"attaches":{},"tags":{"platform":"html"},"requires":["lychee.codec.JSON","lychee.net.protocol.WS"],"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\tif (typeof global.WebSocket !== 'undefined') {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter   = lychee.import('lychee.event.Emitter');\n\tconst _JSON      = lychee.import('lychee.codec.JSON');\n\tconst _Protocol  = lychee.import('lychee.net.protocol.WS');\n\tconst _WebSocket = global.WebSocket;\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _connect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection !== socket) {\n\n\t\t\tsocket.onmessage = function(event) {\n\n\t\t\t\tlet blob = null;\n\t\t\t\tlet view = null;\n\n\t\t\t\tif (typeof event.data === 'string') {\n\n\t\t\t\t\tblob = new Buffer(event.data, 'utf8');\n\n\t\t\t\t} else if (event.data instanceof ArrayBuffer) {\n\n\t\t\t\t\tblob = new Buffer(event.data.byteLength);\n\t\t\t\t\tview = new Uint8Array(event.data);\n\n\t\t\t\t\tfor (let v = 0, vl = blob.length; v < vl; v++) {\n\t\t\t\t\t\tblob[v] = view[v];\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tlet temp = _JSON.decode(blob);\n\t\t\t\tif (temp === null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\t// XXX: HTML WebSocket doesn't support Buffer data\n\t\t\t\t// let chunks = protocol.receive(blob);\n\t\t\t\tlet chunks = [ temp ];\n\t\t\t\tif (chunks.length > 0) {\n\n\t\t\t\t\tfor (let c = 0, cl = chunks.length; c < cl; c++) {\n\n\t\t\t\t\t\tlet chunk = chunks[c];\n\t\t\t\t\t\tif (chunk.payload[0] === 136) {\n\n\t\t\t\t\t\t\tthat.send(chunk.payload, chunk.headers, true);\n\t\t\t\t\t\t\tthat.disconnect();\n\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthat.trigger('receive', [ chunk.payload, chunk.headers ]);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tsocket.onerror = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tsocket.ontimeout = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tsocket.onclose = function() {\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\n\t\t\tthat.__connection = socket;\n\t\t\tthat.__protocol   = protocol;\n\n\n\t\t\tsocket.onopen = function() {\n\t\t\t\tthat.trigger('connect');\n\t\t\t};\n\n\t\t}\n\n\t};\n\n\tconst _disconnect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection === socket) {\n\n\t\t\tsocket.onmessage = function() {};\n\t\t\tsocket.onerror   = function() {};\n\t\t\tsocket.ontimeout = function() {};\n\t\t\tsocket.onclose   = function() {};\n\n\t\t\tsocket.close();\n\t\t\tprotocol.close();\n\n\n\t\t\tthat.__connection = null;\n\t\t\tthat.__protocol   = null;\n\n\t\t\tthat.trigger('disconnect');\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function() {\n\n\t\tthis.__connection = null;\n\t\tthis.__protocol   = null;\n\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.socket.WS';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function(host, port, connection) {\n\n\t\t\thost       = typeof host === 'string'       ? host       : null;\n\t\t\tport       = typeof port === 'number'       ? (port | 0) : null;\n\t\t\tconnection = typeof connection === 'object' ? connection : null;\n\n\n\t\t\tlet that     = this;\n\t\t\tlet url      = /:/g.test(host) ? ('ws://[' + host + ']:' + port) : ('ws://' + host + ':' + port);\n\t\t\tlet protocol = null;\n\n\n\t\t\tif (host !== null && port !== null) {\n\n\t\t\t\tif (connection !== null) {\n\n\t\t\t\t\tprotocol   = new _Protocol(_Protocol.TYPE.remote);\n\t\t\t\t\tconnection = null;\n\n\t\t\t\t\t// TODO: Remote Socket API\n\n\t\t\t\t\t// _connect_socket.call(that, connection, protocol);\n\t\t\t\t\t// connection.resume();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprotocol   = new _Protocol(_Protocol.TYPE.client);\n\t\t\t\t\tconnection = new _WebSocket(url, [ 'lycheejs' ]);\n\n\n\t\t\t\t\t_connect_socket.call(that, connection, protocol);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : {};\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tlet connection = this.__connection;\n\t\t\t\tlet protocol   = this.__protocol;\n\n\t\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t\t// XXX: HTML WebSocket does not support Buffer data\n\t\t\t\t\t// let chunk = protocol.send(payload, headers, binary);\n\t\t\t\t\t// let enc   = binary === true ? 'binary' : 'utf8';\n\n\n\t\t\t\t\tlet chunk = _JSON.encode({\n\t\t\t\t\t\theaders: headers,\n\t\t\t\t\t\tpayload: payload\n\t\t\t\t\t});\n\n\t\t\t\t\tif (chunk !== null) {\n\n\t\t\t\t\t\tif (binary === true) {\n\n\t\t\t\t\t\t\tlet blob = new ArrayBuffer(chunk.length);\n\t\t\t\t\t\t\tlet view = new Uint8Array(blob);\n\n\t\t\t\t\t\t\tfor (let c = 0, cl = chunk.length; c < cl; c++) {\n\t\t\t\t\t\t\t\tview[c] = chunk[c];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconnection.send(blob);\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconnection.send(chunk.toString('utf8'));\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tlet connection = this.__connection;\n\t\t\tlet protocol   = this.__protocol;\n\n\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t_disconnect_socket.call(this, connection, protocol);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.codec.BITON":{"constructor":"lychee.Definition","arguments":["lychee.codec.BITON"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _CHAR_TABLE = new Array(256);\n\tconst _MASK_TABLE = new Array(9);\n\tconst _POW_TABLE  = new Array(9);\n\tconst _RPOW_TABLE = new Array(9);\n\n\t(function() {\n\n\t\tfor (let c = 0; c < 256; c++) {\n\t\t\t_CHAR_TABLE[c] = String.fromCharCode(c);\n\t\t}\n\n\t\tfor (let m = 0; m < 9; m++) {\n\t\t\t_POW_TABLE[m]  = Math.pow(2, m) - 1;\n\t\t\t_MASK_TABLE[m] = ~(_POW_TABLE[m] ^ 0xff);\n\t\t\t_RPOW_TABLE[m] = Math.pow(10, m);\n\t\t}\n\n\t})();\n\n\n\tconst _CHARS_ESCAPABLE = /[\\\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_META      = {\n\t\t'\\b': '\\\\b',\n\t\t'\\t': '\\\\t',\n\t\t'\\n': '\\\\n',\n\t\t'\\f': '\\\\f',\n\t\t'\\r': '',    // FUCK YOU, Microsoft!\n\t\t'\"':  '\\\\\"',\n\t\t'\\\\': '\\\\\\\\'\n\t};\n\n\tconst _sanitize_string = function(str) {\n\n\t\tlet san  = str;\n\t\tlet keys = Object.keys(_CHARS_META);\n\t\tlet vals = Object.values(_CHARS_META);\n\n\n\t\tkeys.forEach(function(key, i) {\n\t\t\tsan = san.replace(key, vals[i]);\n\t\t});\n\n\n\t\tif (_CHARS_ESCAPABLE.test(san)) {\n\n\t\t\tsan = san.replace(_CHARS_ESCAPABLE, function(chr) {\n\t\t\t\treturn '\\\\u' + (chr.charCodeAt(0).toString(16)).slice(-4);\n\t\t\t});\n\n\t\t}\n\n\t\treturn san;\n\n\t};\n\n\tconst _desanitize_string = function(san) {\n\n\t\tlet str  = san;\n\t\tlet keys = Object.keys(_CHARS_META);\n\t\tlet vals = Object.values(_CHARS_META);\n\n\n\t\tvals.forEach(function(val, i) {\n\n\t\t\tif (val !== '') {\n\t\t\t\tstr = str.replace(val, keys[i]);\n\t\t\t}\n\n\t\t});\n\n\n\t\treturn str;\n\n\t};\n\n\tconst _resolve_constructor = function(identifier, scope) {\n\n\t\tlet pointer = scope;\n\n\t\tlet ns = identifier.split('.');\n\t\tfor (let n = 0, l = ns.length; n < l; n++) {\n\n\t\t\tlet name = ns[n];\n\n\t\t\tif (pointer[name] !== undefined) {\n\t\t\t\tpointer = pointer[name];\n\t\t\t} else {\n\t\t\t\tpointer = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn pointer;\n\n\t};\n\n\n\n\tconst _Stream = function(buffer, mode) {\n\n\t\tthis.__buffer    = typeof buffer === 'string' ? buffer : '';\n\t\tthis.__mode      = typeof mode === 'number'   ? mode   : 0;\n\n\t\tthis.__pointer   = 0;\n\t\tthis.__value     = 0;\n\t\tthis.__remaining = 8;\n\t\tthis.__index     = 0;\n\n\t\tif (this.__mode === _Stream.MODE.read) {\n\t\t\tthis.__value = this.__buffer.charCodeAt(this.__index);\n\t\t}\n\n\t};\n\n\n\t_Stream.MODE = {\n\t\tread:  0,\n\t\twrite: 1\n\t};\n\n\n\t_Stream.prototype = {\n\n\t\ttoString: function() {\n\n\t\t\tif (this.__mode === _Stream.MODE.write) {\n\n\t\t\t\tif (this.__value > 0) {\n\t\t\t\t\tthis.__buffer += _CHAR_TABLE[this.__value];\n\t\t\t\t\tthis.__value   = 0;\n\t\t\t\t}\n\n\n\t\t\t\t// 0: Boolean or Null or EOS\n\t\t\t\tthis.write(0, 3);\n\t\t\t\t// 00: EOS\n\t\t\t\tthis.write(0, 2);\n\n\t\t\t}\n\n\t\t\treturn this.__buffer;\n\n\t\t},\n\n\t\tpointer: function() {\n\t\t\treturn this.__pointer;\n\t\t},\n\n\t\tlength: function() {\n\t\t\treturn this.__buffer.length * 8;\n\t\t},\n\n\t\tread: function(bits) {\n\n\t\t\tlet overflow = bits - this.__remaining;\n\t\t\tlet captured = this.__remaining < bits ? this.__remaining : bits;\n\t\t\tlet shift    = this.__remaining - captured;\n\n\n\t\t\tlet buffer = (this.__value & _MASK_TABLE[this.__remaining]) >> shift;\n\n\n\t\t\tthis.__pointer   += captured;\n\t\t\tthis.__remaining -= captured;\n\n\n\t\t\tif (this.__remaining === 0) {\n\n\t\t\t\tthis.__value     = this.__buffer.charCodeAt(++this.__index);\n\t\t\t\tthis.__remaining = 8;\n\n\t\t\t\tif (overflow > 0) {\n\t\t\t\t\tbuffer = buffer << overflow | ((this.__value & _MASK_TABLE[this.__remaining]) >> (8 - overflow));\n\t\t\t\t\tthis.__remaining -= overflow;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\treadRAW: function(bytes) {\n\n\t\t\tif (this.__remaining !== 8) {\n\n\t\t\t\tthis.__index++;\n\t\t\t\tthis.__value     = 0;\n\t\t\t\tthis.__remaining = 8;\n\n\t\t\t}\n\n\n\t\t\tlet buffer = '';\n\n\t\t\tif (this.__remaining === 8) {\n\n\t\t\t\tbuffer       += this.__buffer.substr(this.__index, bytes);\n\t\t\t\tthis.__index += bytes;\n\t\t\t\tthis.__value  = this.__buffer.charCodeAt(this.__index);\n\n\t\t\t}\n\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\twrite: function(buffer, bits) {\n\n\t\t\tlet overflow = bits - this.__remaining;\n\t\t\tlet captured = this.__remaining < bits ? this.__remaining : bits;\n\t\t\tlet shift    = this.__remaining - captured;\n\n\n\t\t\tif (overflow > 0) {\n\t\t\t\tthis.__value += buffer >> overflow << shift;\n\t\t\t} else {\n\t\t\t\tthis.__value += buffer << shift;\n\t\t\t}\n\n\n\t\t\tthis.__pointer   += captured;\n\t\t\tthis.__remaining -= captured;\n\n\n\t\t\tif (this.__remaining === 0) {\n\n\t\t\t\tthis.__buffer    += _CHAR_TABLE[this.__value];\n\t\t\t\tthis.__remaining  = 8;\n\t\t\t\tthis.__value      = 0;\n\n\t\t\t\tif (overflow > 0) {\n\t\t\t\t\tthis.__value     += (buffer & _POW_TABLE[overflow]) << (8 - overflow);\n\t\t\t\t\tthis.__remaining -= overflow;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\twriteRAW: function(buffer) {\n\n\t\t\tif (this.__remaining !== 8) {\n\n\t\t\t\tthis.__buffer    += _CHAR_TABLE[this.__value];\n\t\t\t\tthis.__value      = 0;\n\t\t\t\tthis.__remaining  = 8;\n\n\t\t\t}\n\n\t\t\tif (this.__remaining === 8) {\n\n\t\t\t\tthis.__buffer  += buffer;\n\t\t\t\tthis.__pointer += buffer.length * 8;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * ENCODER and DECODER\n\t */\n\n\tconst _encode = function(stream, data) {\n\n\t\t// 0: Boolean or Null or EOS\n\t\tif (typeof data === 'boolean' || data === null) {\n\n\t\t\tstream.write(0, 3);\n\n\t\t\tif (data === null) {\n\t\t\t\tstream.write(1, 2);\n\t\t\t} else if (data === false) {\n\t\t\t\tstream.write(2, 2);\n\t\t\t} else if (data === true) {\n\t\t\t\tstream.write(3, 2);\n\t\t\t}\n\n\n\t\t// 1: Integer, 2: Float\n\t\t} else if (typeof data === 'number') {\n\n\t\t\tlet type = 1;\n\t\t\tif (data < 268435456 && data !== (data | 0)) {\n\t\t\t\ttype = 2;\n\t\t\t}\n\n\n\t\t\tstream.write(type, 3);\n\n\n\t\t\t// Negative value\n\t\t\tlet sign = 0;\n\t\t\tif (data < 0) {\n\t\t\t\tdata = -data;\n\t\t\t\tsign = 1;\n\t\t\t}\n\n\n\t\t\t// Float only: Calculate the integer value and remember the shift\n\t\t\tlet shift = 0;\n\n\t\t\tif (type === 2) {\n\n\t\t\t\tlet step = 10;\n\t\t\t\tlet m    = data;\n\t\t\t\tlet tmp  = 0;\n\n\n\t\t\t\t// Calculate the exponent and shift\n\t\t\t\tdo {\n\n\t\t\t\t\tm     = data * step;\n\t\t\t\t\tstep *= 10;\n\t\t\t\t\ttmp   = m | 0;\n\t\t\t\t\tshift++;\n\n\t\t\t\t} while (m - tmp > 1 / step && shift < 8 && m < 214748364);\n\n\n\t\t\t\tstep = tmp / 10;\n\n\t\t\t\t// Recorrect shift if we are > 0.5\n\t\t\t\t// and shift is too high\n\t\t\t\tif (step === (step | 0)) {\n\t\t\t\t\ttmp = step;\n\t\t\t\t\tshift--;\n\t\t\t\t}\n\n\t\t\t\tdata = tmp;\n\n\t\t\t}\n\n\n\n\t\t\tif (data < 2) {\n\n\t\t\t\tstream.write(0, 4);\n\t\t\t\tstream.write(data, 1);\n\n\t\t\t} else if (data < 16) {\n\n\t\t\t\tstream.write(1, 4);\n\t\t\t\tstream.write(data, 4);\n\n\t\t\t} else if (data < 256) {\n\n\t\t\t\tstream.write(2, 4);\n\t\t\t\tstream.write(data, 8);\n\n\t\t\t} else if (data < 4096) {\n\n\t\t\t\tstream.write(3, 4);\n\t\t\t\tstream.write(data >>  8 & 0xff, 4);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 65536) {\n\n\t\t\t\tstream.write(4, 4);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 1048576) {\n\n\t\t\t\tstream.write(5, 4);\n\t\t\t\tstream.write(data >> 16 & 0xff, 4);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 16777216) {\n\n\t\t\t\tstream.write(6, 4);\n\t\t\t\tstream.write(data >> 16 & 0xff, 8);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else if (data < 268435456) {\n\n\t\t\t\tstream.write(7, 4);\n\t\t\t\tstream.write(data >> 24 & 0xff, 8);\n\t\t\t\tstream.write(data >> 16 & 0xff, 8);\n\t\t\t\tstream.write(data >>  8 & 0xff, 8);\n\t\t\t\tstream.write(data       & 0xff, 8);\n\n\t\t\t} else {\n\n\t\t\t\tstream.write(8, 4);\n\n\t\t\t\t_encode(stream, data.toString());\n\n\t\t\t}\n\n\n\n\t\t\tstream.write(sign, 1);\n\n\n\t\t\t// Float only: Remember the shift for precision\n\t\t\tif (type === 2) {\n\t\t\t\tstream.write(shift, 4);\n\t\t\t}\n\n\n\t\t// 3: String\n\t\t} else if (typeof data === 'string') {\n\n\t\t\tdata = _sanitize_string(data);\n\n\n\t\t\tstream.write(3, 3);\n\n\n\t\t\tlet l = data.length;\n\n\t\t\t// Write Size Field\n\t\t\tif (l > 65535) {\n\n\t\t\t\tstream.write(31, 5);\n\n\t\t\t\tstream.write(l >> 24 & 0xff, 8);\n\t\t\t\tstream.write(l >> 16 & 0xff, 8);\n\t\t\t\tstream.write(l >>  8 & 0xff, 8);\n\t\t\t\tstream.write(l       & 0xff, 8);\n\n\t\t\t} else if (l > 255) {\n\n\t\t\t\tstream.write(30, 5);\n\n\t\t\t\tstream.write(l >>  8 & 0xff, 8);\n\t\t\t\tstream.write(l       & 0xff, 8);\n\n\t\t\t} else if (l > 28) {\n\n\t\t\t\tstream.write(29, 5);\n\n\t\t\t\tstream.write(l, 8);\n\n\t\t\t} else {\n\n\t\t\t\tstream.write(l, 5);\n\n\t\t\t}\n\n\n\t\t\tstream.writeRAW(data);\n\n\n\t\t// 4: Start of Array\n\t\t} else if (data instanceof Array) {\n\n\t\t\tstream.write(4, 3);\n\n\t\t\tfor (let d = 0, dl = data.length; d < dl; d++) {\n\t\t\t\tstream.write(0, 3);\n\t\t\t\t_encode(stream, data[d]);\n\t\t\t}\n\n\t\t\t// Write EOO marker\n\t\t\tstream.write(7, 3);\n\n\n\t\t// 5: Start of Object\n\t\t} else if (data instanceof Object && typeof data.serialize !== 'function') {\n\n\t\t\tstream.write(5, 3);\n\n\t\t\tfor (let prop in data) {\n\n\t\t\t\tif (data.hasOwnProperty(prop)) {\n\t\t\t\t\tstream.write(0, 3);\n\t\t\t\t\t_encode(stream, prop);\n\t\t\t\t\t_encode(stream, data[prop]);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Write EOO marker\n\t\t\tstream.write(7, 3);\n\n\n\t\t// 6: Custom High-Level Implementation\n\t\t} else if (data instanceof Object && typeof data.serialize === 'function') {\n\n\t\t\tstream.write(6, 3);\n\n\t\t\tlet blob = lychee.serialize(data);\n\n\t\t\t_encode(stream, blob);\n\n\t\t\t// Write EOO marker\n\t\t\tstream.write(7, 3);\n\n\t\t}\n\n\t};\n\n\tconst _decode = function(stream) {\n\n\t\tlet value  = undefined;\n\t\tlet tmp    = 0;\n\t\tlet errors = 0;\n\t\tlet check  = 0;\n\n\t\tif (stream.pointer() < stream.length()) {\n\n\t\t\tlet type = stream.read(3);\n\n\n\t\t\t// 0: Boolean or Null (or EOS)\n\t\t\tif (type === 0) {\n\n\t\t\t\ttmp = stream.read(2);\n\n\t\t\t\tif (tmp === 1) {\n\t\t\t\t\tvalue = null;\n\t\t\t\t} else if (tmp === 2) {\n\t\t\t\t\tvalue = false;\n\t\t\t\t} else if (tmp === 3) {\n\t\t\t\t\tvalue = true;\n\t\t\t\t}\n\n\n\t\t\t// 1: Integer, 2: Float\n\t\t\t} else if (type === 1 || type === 2) {\n\n\t\t\t\ttmp = stream.read(4);\n\n\n\t\t\t\tif (tmp === 0) {\n\n\t\t\t\t\tvalue = stream.read(1);\n\n\t\t\t\t} else if (tmp === 1) {\n\n\t\t\t\t\tvalue = stream.read(4);\n\n\t\t\t\t} else if (tmp === 2) {\n\n\t\t\t\t\tvalue = stream.read(8);\n\n\t\t\t\t} else if (tmp === 3) {\n\n\t\t\t\t\tvalue = (stream.read(4) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 4) {\n\n\t\t\t\t\tvalue = (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 5) {\n\n\t\t\t\t\tvalue = (stream.read(4) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 6) {\n\n\t\t\t\t\tvalue = (stream.read(8) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 7) {\n\n\t\t\t\t\tvalue = (stream.read(8) << 24) + (stream.read(8) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (tmp === 8) {\n\n\t\t\t\t\tlet str = _decode(stream);\n\n\t\t\t\t\tvalue = parseInt(str, 10);\n\n\t\t\t\t}\n\n\n\t\t\t\t// Negative value\n\t\t\t\tlet sign = stream.read(1);\n\t\t\t\tif (sign === 1) {\n\t\t\t\t\tvalue = -1 * value;\n\t\t\t\t}\n\n\n\t\t\t\t// Float only: Shift it back by the precision\n\t\t\t\tif (type === 2) {\n\t\t\t\t\tlet shift = stream.read(4);\n\t\t\t\t\tvalue /= _RPOW_TABLE[shift];\n\t\t\t\t}\n\n\n\t\t\t// 3: String\n\t\t\t} else if (type === 3) {\n\n\t\t\t\tlet size = stream.read(5);\n\n\t\t\t\tif (size === 31) {\n\n\t\t\t\t\tsize = (stream.read(8) << 24) + (stream.read(8) << 16) + (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (size === 30) {\n\n\t\t\t\t\tsize = (stream.read(8) <<  8) + stream.read(8);\n\n\t\t\t\t} else if (size === 29) {\n\n\t\t\t\t\tsize = stream.read(8);\n\n\t\t\t\t}\n\n\n\t\t\t\tvalue = _desanitize_string(stream.readRAW(size));\n\n\n\t\t\t// 4: Array\n\t\t\t} else if (type === 4) {\n\n\t\t\t\tvalue = [];\n\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tcheck = stream.read(3);\n\n\t\t\t\t\tif (check === 0) {\n\t\t\t\t\t\tvalue.push(_decode(stream));\n\t\t\t\t\t} else if (check === 7) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t// 5: Object\n\t\t\t} else if (type === 5) {\n\n\t\t\t\tvalue = {};\n\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tcheck = stream.read(3);\n\n\t\t\t\t\tif (check === 0) {\n\t\t\t\t\t\tvalue[_decode(stream)] = _decode(stream);\n\t\t\t\t\t} else if (check === 7) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t// 6: Custom High-Level Implementation\n\t\t\t} else if (type === 6) {\n\n\t\t\t\tlet blob = _decode(stream);\n\n\t\t\t\tvalue = lychee.deserialize(blob);\n\t\t\t\tcheck = stream.read(3);\n\n\t\t\t\tif (check !== 7) {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn value;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Module = {\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'reference': 'lychee.codec.BITON',\n\t\t\t\t'blob':      null\n\t\t\t};\n\n\t\t},\n\n\t\tencode: function(data) {\n\n\t\t\tdata = data instanceof Object ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream('', _Stream.MODE.write);\n\n\t\t\t\t_encode(stream, data);\n\n\t\t\t\treturn new Buffer(stream.toString(), 'utf8');\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tdecode: function(data) {\n\n\t\t\tdata = data instanceof Buffer ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream(data.toString('utf8'), _Stream.MODE.read);\n\t\t\t\tlet object = _decode(stream);\n\t\t\t\tif (object !== undefined) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Module;\n\n}"}},"lychee.net.Service":{"constructor":"lychee.Definition","arguments":["lychee.net.Service"],"blob":{"attaches":{},"includes":["lychee.event.Emitter"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter  = lychee.import('lychee.event.Emitter');\n\tconst _SERVICES = [];\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _plug_broadcast = function() {\n\n\t\tlet id = this.id;\n\t\tif (id !== null) {\n\n\t\t\tlet cache = _SERVICES[id] || null;\n\t\t\tif (cache === null) {\n\t\t\t\tcache = _SERVICES[id] = [];\n\t\t\t}\n\n\n\t\t\tlet found = false;\n\n\t\t\tfor (let c = 0, cl = cache.length; c < cl; c++) {\n\n\t\t\t\tif (cache[c] === this) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (found === false) {\n\t\t\t\tcache.push(this);\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tconst _unplug_broadcast = function() {\n\n\t\tthis.setMulticast([]);\n\n\n\t\tlet id = this.id;\n\t\tif (id !== null) {\n\n\t\t\tlet cache = _SERVICES[id] || null;\n\t\t\tif (cache !== null) {\n\n\t\t\t\tfor (let c = 0, cl = cache.length; c < cl; c++) {\n\n\t\t\t\t\tif (cache[c] === this) {\n\t\t\t\t\t\tcache.splice(c, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(id, tunnel, type) {\n\n\t\tthis.id     = typeof id === 'string'                        ? id     : null;\n\t\tthis.tunnel = lychee.interfaceof(lychee.net.Tunnel, tunnel) ? tunnel : null;\n\t\tthis.type   = lychee.enumof(Composite.TYPE, type)           ? type   : null;\n\n\t\tthis.__multicast = [];\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tif (this.id === null) {\n\t\t\t\tconsole.error('lychee.net.Service: Invalid (string) id. It has to be kept in sync with the lychee.net.Client and lychee.net.Remote instance.');\n\t\t\t}\n\n\t\t\tif (this.tunnel === null) {\n\t\t\t\tconsole.error('lychee.net.Service: Invalid (lychee.net.Tunnel) tunnel.');\n\t\t\t}\n\n\t\t\tif (this.type === null) {\n\t\t\t\tconsole.error('lychee.net.Service: Invalid (lychee.net.Service.TYPE) type.');\n\t\t\t}\n\n\t\t}\n\n\n\t\t_Emitter.call(this);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tif (this.type === Composite.TYPE.remote) {\n\n\t\t\tthis.bind('plug',   _plug_broadcast,   this);\n\t\t\tthis.bind('unplug', _unplug_broadcast, this);\n\n\t\t}\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\t// 'default': 0, (deactivated)\n\t\t'client': 1,\n\t\t'remote': 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.Service';\n\n\t\t\tlet id     = null;\n\t\t\tlet tunnel = null;\n\t\t\tlet type   = null;\n\t\t\tlet blob   = (data['blob'] || {});\n\n\n\t\t\tif (this.id !== null)   id   = this.id;\n\t\t\tif (this.type !== null) type = this.type;\n\n\t\t\tif (this.type === Composite.TYPE.client) {\n\t\t\t\ttunnel = '#MAIN.client';\n\t\t\t} else {\n\t\t\t\ttunnel = null;\n\t\t\t}\n\n\n\t\t\tdata['arguments'][0] = id;\n\t\t\tdata['arguments'][1] = tunnel;\n\t\t\tdata['arguments'][2] = type;\n\t\t\tdata['blob']         = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * SERVICE API\n\t\t */\n\n\t\tmulticast: function(data, service) {\n\n\t\t\tdata    = data instanceof Object    ? data    : null;\n\t\t\tservice = service instanceof Object ? service : null;\n\n\n\t\t\tif (data === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.client) {\n\n\t\t\t\tif (service === null) {\n\n\t\t\t\t\tservice = {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'multicast'\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\tdata:    data,\n\t\t\t\t\t\tservice: service\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:     this.id,\n\t\t\t\t\t\tmethod: 'multicast'\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.remote) {\n\n\t\t\t\tif (data.service !== null) {\n\n\t\t\t\t\tfor (let m = 0, ml = this.__multicast.length; m < ml; m++) {\n\n\t\t\t\t\t\tlet tunnel = this.__multicast[m];\n\t\t\t\t\t\tif (tunnel !== this.tunnel) {\n\n\t\t\t\t\t\t\tdata.data.tid = this.tunnel.host + ':' + this.tunnel.port;\n\n\t\t\t\t\t\t\ttunnel.send(\n\t\t\t\t\t\t\t\tdata.data,\n\t\t\t\t\t\t\t\tdata.service\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tbroadcast: function(data, service) {\n\n\t\t\tdata    = data instanceof Object    ? data    : null;\n\t\t\tservice = service instanceof Object ? service : null;\n\n\n\t\t\tif (data === null || this.id === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\n\t\t\tlet type = this.type;\n\t\t\tif (type === Composite.TYPE.client) {\n\n\t\t\t\tif (service === null) {\n\n\t\t\t\t\tservice = {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'broadcast'\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\n\t\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\t\tthis.tunnel.send({\n\t\t\t\t\t\tdata:    data,\n\t\t\t\t\t\tservice: service\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:     this.id,\n\t\t\t\t\t\tmethod: 'broadcast'\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else if (type === Composite.TYPE.remote) {\n\n\t\t\t\tif (data.service !== null) {\n\n\t\t\t\t\tlet broadcast = _SERVICES[this.id] || null;\n\t\t\t\t\tif (broadcast !== null) {\n\n\t\t\t\t\t\tfor (let b = 0, bl = broadcast.length; b < bl; b++) {\n\n\t\t\t\t\t\t\tlet tunnel = broadcast[b].tunnel;\n\t\t\t\t\t\t\tif (tunnel !== this.tunnel) {\n\n\t\t\t\t\t\t\t\tdata.data.tid = this.tunnel.host + ':' + this.tunnel.port;\n\n\t\t\t\t\t\t\t\ttunnel.send(\n\t\t\t\t\t\t\t\t\tdata.data,\n\t\t\t\t\t\t\t\t\tdata.service\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\taccept: function(message, blob) {\n\n\t\t\tmessage = typeof message === 'string' ? message : null;\n\t\t\tblob    = blob instanceof Object      ? blob    : null;\n\n\n\t\t\tif (message !== null) {\n\n\t\t\t\tlet tunnel = this.tunnel;\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\ttunnel.send({\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tblob:    blob\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'success'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\treject: function(message, blob) {\n\n\t\t\tmessage = typeof message === 'string' ? message : null;\n\t\t\tblob    = blob instanceof Object      ? blob    : null;\n\n\n\t\t\tif (message !== null) {\n\n\t\t\t\tlet tunnel = this.tunnel;\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\ttunnel.send({\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tblob:    blob\n\t\t\t\t\t}, {\n\t\t\t\t\t\tid:    this.id,\n\t\t\t\t\t\tevent: 'error'\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetMulticast: function(multicast) {\n\n\t\t\tmulticast = multicast instanceof Array ? multicast : null;\n\n\n\t\t\tif (multicast !== null) {\n\n\t\t\t\tthis.__multicast = multicast.filter(function(instance) {\n\t\t\t\t\treturn lychee.interfaceof(lychee.net.Tunnel, instance);\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.codec.BENCODE":{"constructor":"lychee.Definition","arguments":["lychee.codec.BENCODE"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _CHARS_DANGEROUS = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_ESCAPABLE = /[\\\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\tconst _CHARS_META      = {\n\t\t'\\b': '\\\\b',\n\t\t'\\t': '\\\\t',\n\t\t'\\n': '\\\\n',\n\t\t'\\f': '\\\\f',\n\t\t'\\r': '',    // FUCK YOU, Microsoft!\n\t\t'\"':  '\\\\\"',\n\t\t'\\\\': '\\\\\\\\'\n\t};\n\n\tconst _sanitize_string = function(str) {\n\n\t\tlet san = str;\n\n\n\t\tif (_CHARS_ESCAPABLE.test(san)) {\n\n\t\t\tsan = san.replace(_CHARS_ESCAPABLE, function(char) {\n\n\t\t\t\tlet val = _CHARS_META[char];\n\t\t\t\tif (typeof val === 'string') {\n\t\t\t\t\treturn val;\n\t\t\t\t} else {\n\t\t\t\t\treturn '\\\\u' + (char.charCodeAt(0).toString(16)).slice(-4);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t\treturn san;\n\n\t};\n\n\tconst _Stream = function(buffer, mode) {\n\n\t\tthis.__buffer = typeof buffer === 'string' ? buffer : '';\n\t\tthis.__mode   = typeof mode === 'number'   ? mode   : 0;\n\n\t\tthis.__index  = 0;\n\n\t};\n\n\n\t_Stream.MODE = {\n\t\tread:  0,\n\t\twrite: 1\n\t};\n\n\n\t_Stream.prototype = {\n\n\t\ttoString: function() {\n\t\t\treturn this.__buffer;\n\t\t},\n\n\t\tpointer: function() {\n\t\t\treturn this.__index;\n\t\t},\n\n\t\tlength: function() {\n\t\t\treturn this.__buffer.length;\n\t\t},\n\n\t\tseek: function(array) {\n\n\t\t\tlet bytes = Infinity;\n\n\t\t\tfor (let a = 0, al = array.length; a < al; a++) {\n\n\t\t\t\tlet token = array[a];\n\t\t\t\tlet size  = this.__buffer.indexOf(token, this.__index + 1) - this.__index;\n\t\t\t\tif (size > -1 && size < bytes) {\n\t\t\t\t\tbytes = size;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (bytes === Infinity) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\n\t\t\treturn bytes;\n\n\t\t},\n\n\t\tseekRAW: function(bytes) {\n\t\t\treturn this.__buffer.substr(this.__index, bytes);\n\t\t},\n\n\t\treadRAW: function(bytes) {\n\n\t\t\tlet buffer = '';\n\n\t\t\tbuffer       += this.__buffer.substr(this.__index, bytes);\n\t\t\tthis.__index += bytes;\n\n\t\t\treturn buffer;\n\n\t\t},\n\n\t\twriteRAW: function(buffer) {\n\n\t\t\tthis.__buffer += buffer;\n\t\t\tthis.__index  += buffer.length;\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * ENCODER and DECODER\n\t */\n\n\tconst _encode = function(stream, data) {\n\n\t\t// bne, bfe, bte : null, false, true\n\t\tif (typeof data === 'boolean' || data === null) {\n\n\t\t\tif (data === null) {\n\t\t\t\tstream.writeRAW('bne');\n\t\t\t} else if (data === false) {\n\t\t\t\tstream.writeRAW('bfe');\n\t\t\t} else if (data === true) {\n\t\t\t\tstream.writeRAW('bte');\n\t\t\t}\n\n\n\t\t// i123e : Integer or Float (converted as Integer)\n\t\t} else if (typeof data === 'number') {\n\n\t\t\tlet hi = (data / 0x80000000) << 0;\n\t\t\tlet lo = (data % 0x80000000) << 0;\n\n\t\t\tstream.writeRAW('i');\n\t\t\tstream.writeRAW('' + (hi * 0x80000000 + lo).toString());\n\t\t\tstream.writeRAW('e');\n\n\n\t\t// <length>:<contents> : String\n\t\t} else if (typeof data === 'string') {\n\n\t\t\tdata = _sanitize_string(data);\n\n\n\t\t\tstream.writeRAW(data.length + ':' + data);\n\n\n\t\t// l<contents>e : Array\n\t\t} else if (data instanceof Array) {\n\n\t\t\tstream.writeRAW('l');\n\n\t\t\tfor (let d = 0, dl = data.length; d < dl; d++) {\n\t\t\t\t_encode(stream, data[d]);\n\t\t\t}\n\n\t\t\tstream.writeRAW('e');\n\n\n\t\t// d<contents>e : Object\n\t\t} else if (data instanceof Object && typeof data.serialize !== 'function') {\n\n\t\t\tstream.writeRAW('d');\n\n\t\t\tlet keys = Object.keys(data).sort(function(a, b) {\n\t\t\t\tif (a > b) return  1;\n\t\t\t\tif (a < b) return -1;\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\t\tfor (let k = 0, kl = keys.length; k < kl; k++) {\n\n\t\t\t\tlet key = keys[k];\n\n\t\t\t\t_encode(stream, key);\n\t\t\t\t_encode(stream, data[key]);\n\n\t\t\t}\n\n\t\t\tstream.writeRAW('e');\n\n\n\t\t// s<contents>e : Custom High-Level Implementation\n\t\t} else if (data instanceof Object && typeof data.serialize === 'function') {\n\n\t\t\tstream.writeRAW('s');\n\n\t\t\tlet blob = lychee.serialize(data);\n\n\t\t\t_encode(stream, blob);\n\n\t\t\tstream.writeRAW('e');\n\n\t\t}\n\n\t};\n\n\tconst _is_decodable_value = function(str) {\n\n\t\tlet head = str.charAt(0);\n\t\tif (/([bilds]+)/g.test(head)) {\n\t\t\treturn true;\n\t\t} else if (!isNaN(parseInt(head, 10))) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n\tconst _decode = function(stream) {\n\n\t\tlet value  = undefined;\n\t\tlet size   = 0;\n\t\tlet tmp    = 0;\n\t\tlet errors = 0;\n\t\tlet check  = null;\n\n\n\t\tif (stream.pointer() < stream.length()) {\n\n\t\t\tlet seek = stream.seekRAW(1);\n\n\n\t\t\t// bne, bfe, bte : null, false, true\n\t\t\tif (seek === 'b') {\n\n\t\t\t\tif (stream.seekRAW(3) === 'bne') {\n\t\t\t\t\tstream.readRAW(3);\n\t\t\t\t\tvalue = null;\n\t\t\t\t} else if (stream.seekRAW(3) === 'bfe') {\n\t\t\t\t\tstream.readRAW(3);\n\t\t\t\t\tvalue = false;\n\t\t\t\t} else if (stream.seekRAW(3) === 'bte') {\n\t\t\t\t\tstream.readRAW(3);\n\t\t\t\t\tvalue = true;\n\t\t\t\t}\n\n\n\t\t\t// i123e : Integer or Float (converted as Integer)\n\t\t\t} else if (seek === 'i') {\n\n\t\t\t\tstream.readRAW(1);\n\n\t\t\t\tsize = stream.seek('e');\n\n\t\t\t\tif (size > 0) {\n\n\t\t\t\t\ttmp   = stream.readRAW(size);\n\t\t\t\t\tvalue = parseInt(tmp, 10);\n\t\t\t\t\tcheck = stream.readRAW(1);\n\n\t\t\t\t}\n\n\n\t\t\t// <length>:<contents> : String\n\t\t\t} else if (!isNaN(parseInt(seek, 10))) {\n\n\t\t\t\tsize = stream.seek(':');\n\n\t\t\t\tif (size > 0) {\n\n\t\t\t\t\tsize  = parseInt(stream.readRAW(size), 10);\n\t\t\t\t\tcheck = stream.readRAW(1);\n\n\t\t\t\t\tif (!isNaN(size) && check === ':') {\n\t\t\t\t\t\tvalue = stream.readRAW(size);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t// l<contents>e : Array\n\t\t\t} else if (seek === 'l') {\n\n\t\t\t\tvalue = [];\n\n\n\t\t\t\tstream.readRAW(1);\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tvalue.push(_decode(stream));\n\n\t\t\t\t\tcheck = stream.seekRAW(1);\n\n\t\t\t\t\tif (check === 'e') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (_is_decodable_value(check) === false) {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstream.readRAW(1);\n\n\n\t\t\t// d<contents>e : Object\n\t\t\t} else if (seek === 'd') {\n\n\t\t\t\tvalue = {};\n\n\n\t\t\t\tstream.readRAW(1);\n\n\t\t\t\twhile (errors === 0) {\n\n\t\t\t\t\tlet object_key   = _decode(stream);\n\t\t\t\t\tlet object_value = _decode(stream);\n\n\t\t\t\t\tcheck = stream.seekRAW(1);\n\n\t\t\t\t\tvalue[object_key] = object_value;\n\n\t\t\t\t\tif (check === 'e') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (isNaN(parseInt(check, 10))) {\n\t\t\t\t\t\terrors++;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tstream.readRAW(1);\n\n\n\t\t\t// s<contents>e : Custom High-Level Implementation\n\t\t\t} else if (seek === 's') {\n\n\t\t\t\tstream.readRAW(1);\n\n\t\t\t\tlet blob = _decode(stream);\n\n\t\t\t\tvalue = lychee.deserialize(blob);\n\t\t\t\tcheck = stream.readRAW(1);\n\n\t\t\t\tif (check !== 'e') {\n\t\t\t\t\tvalue = undefined;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn value;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tconst Module = {\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'reference': 'lychee.codec.BENCODE',\n\t\t\t\t'blob':      null\n\t\t\t};\n\n\t\t},\n\n\t\tencode: function(data) {\n\n\t\t\tdata = data instanceof Object ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream('', _Stream.MODE.write);\n\n\t\t\t\t_encode(stream, data);\n\n\t\t\t\treturn new Buffer(stream.toString(), 'utf8');\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tdecode: function(data) {\n\n\t\t\tdata = data instanceof Buffer ? data : null;\n\n\n\t\t\tif (data !== null) {\n\n\t\t\t\tlet stream = new _Stream(data.toString('utf8'), _Stream.MODE.read);\n\t\t\t\tlet object = _decode(stream);\n\t\t\t\tif (object !== undefined) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Module;\n\n}"}},"lychee.net.remote.Debugger":{"constructor":"lychee.Definition","arguments":["lychee.net.remote.Debugger"],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\tconst _TUNNELS = [];\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _bind_console = function(event) {\n\n\t\tthis.bind(event, function(data) {\n\n\t\t\tif (this.tunnel !== null) {\n\n\t\t\t\tlet receiver = data.tid || null;\n\t\t\t\tif (receiver !== null) {\n\n\t\t\t\t\tlet tunnel = _TUNNELS.find(function(client) {\n\t\t\t\t\t\treturn (client.host + ':' + client.port) === receiver;\n\t\t\t\t\t}) || null;\n\n\t\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\t\ttunnel.send(data, {\n\t\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\t\tevent: 'console'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\tconst _bind_relay = function(event) {\n\n\t\tthis.bind(event, function(data) {\n\n\t\t\tlet sender   = null;\n\t\t\tlet receiver = data.tid || null;\n\n\t\t\tif (this.tunnel !== null) {\n\t\t\t\tsender = this.tunnel.host + ':' + this.tunnel.port;\n\t\t\t}\n\n\n\t\t\tif (sender !== null && receiver !== null) {\n\n\t\t\t\tlet tunnel = _TUNNELS.find(function(client) {\n\t\t\t\t\treturn (client.host + ':' + client.port) === receiver;\n\t\t\t\t}) || null;\n\n\t\t\t\tif (tunnel !== null) {\n\n\t\t\t\t\tdata.receiver = sender;\n\n\t\t\t\t\ttunnel.send(data, {\n\t\t\t\t\t\tid:    'debugger',\n\t\t\t\t\t\tevent: event\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(remote) {\n\n\t\t_Service.call(this, 'debugger', remote, _Service.TYPE.remote);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('plug', function() {\n\n\t\t\t_TUNNELS.push(this.tunnel);\n\n\t\t}, this);\n\n\t\tthis.bind('unplug', function() {\n\n\t\t\tlet index = _TUNNELS.indexOf(this.tunnel);\n\t\t\tif (index !== -1) {\n\t\t\t\t_TUNNELS.splice(index, 1);\n\t\t\t}\n\n\t\t}, this);\n\n\n\t\t// Relay events to proper tunnel (data.tid)\n\t\t_bind_relay.call(this, 'define');\n\t\t_bind_relay.call(this, 'execute');\n\t\t_bind_relay.call(this, 'expose');\n\t\t_bind_relay.call(this, 'snapshot');\n\n\t\t// Relay events to proper tunnel (data.receiver > data.tid)\n\t\t_bind_console.call(this, 'define-value');\n\t\t_bind_console.call(this, 'execute-value');\n\t\t_bind_console.call(this, 'expose-value');\n\t\t_bind_console.call(this, 'snapshot-value');\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.remote.Debugger';\n\t\t\tdata['arguments']   = [];\n\n\n\t\t\treturn data;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.remote.Stash":{"constructor":"lychee.Definition","arguments":["lychee.net.remote.Stash"],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(remote) {\n\n\t\t_Service.call(this, 'stash', remote, _Service.TYPE.remote);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('sync', function(data) {\n\n\t\t\tlet main = global.MAIN || null;\n\t\t\tif (main !== null) {\n\n\t\t\t\tlet stash = main.stash || null;\n\t\t\t\tif (stash !== null) {\n\n\t\t\t\t\tstash.deserialize({\n\t\t\t\t\t\tassets: data.assets\n\t\t\t\t\t});\n\n\t\t\t\t\tstash.sync(true);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.remote.Stash';\n\t\t\tdata['arguments']   = [];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(assets) {\n\n\t\t\tassets = assets instanceof Object ? assets : null;\n\n\n\t\t\tif (assets !== null && this.tunnel !== null) {\n\n\t\t\t\tlet data = {};\n\n\t\t\t\tfor (let id in assets) {\n\t\t\t\t\tdata[id] = lychee.serialize(assets[id]);\n\t\t\t\t}\n\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tassets:    data\n\t\t\t\t}, {\n\t\t\t\t\tid:    'stash',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.socket.HTTP":{"constructor":"lychee.Definition","arguments":["lychee.net.socket.HTTP"],"blob":{"attaches":{},"tags":{"platform":"html"},"requires":["lychee.net.protocol.HTTP"],"includes":["lychee.event.Emitter"],"supports":"function (lychee, global) {\n\n\tif (\n\t\ttypeof global.XMLHttpRequest === 'function'\n\t\t|| typeof global.XMLHttpRequest === 'object'\n\t) {\n\t\treturn true;\n\t}\n\n\n\treturn false;\n\n}","exports":"function (lychee, global, attachments) {\n\n\tconst _Emitter  = lychee.import('lychee.event.Emitter');\n\tconst _Protocol = lychee.import('lychee.net.protocol.HTTP');\n\tconst _XHR      = global.XMLHttpRequest;\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _uppercase = function(str) {\n\n\t\tlet tmp = str.split('-');\n\n\t\tfor (let t = 0, tl = tmp.length; t < tl; t++) {\n\t\t\tlet ch = tmp[t];\n\t\t\ttmp[t] = ch.charAt(0).toUpperCase() + ch.substr(1);\n\t\t}\n\n\t\treturn tmp.join('-');\n\n\t};\n\n\tconst _receive_xhr = function(raw_headers, raw_payload) {\n\n\t\tlet blob = null;\n\t\tlet view = null;\n\n\n\t\tif (typeof raw_payload === 'string') {\n\n\t\t\tblob = new Buffer(raw_payload, 'utf8');\n\n\t\t} else if (raw_payload instanceof ArrayBuffer) {\n\n\t\t\tblob = new Buffer(raw_payload.byteLength);\n\t\t\tview = new Uint8Array(raw_payload);\n\n\t\t\tfor (let v = 0, vl = blob.length; v < vl; v++) {\n\t\t\t\tblob[v] = view[v];\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet headers = {};\n\t\tlet payload = blob;\n\n\t\traw_headers.split('\\r\\n').forEach(function(line) {\n\n\t\t\tlet i1 = line.indexOf(':');\n\t\t\tif (i1 !== -1) {\n\n\t\t\t\tlet key = line.substr(0, i1).trim().toLowerCase();\n\t\t\t\tlet val = line.substr(i1 + 1).trim();\n\n\t\t\t\tif (key.substr(0, 2) === 'x-') {\n\t\t\t\t\theaders['@' + key.substr(2)] = val;\n\t\t\t\t} else if (key.length > 0) {\n\t\t\t\t\theaders[key.toLowerCase()] = val;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\n\t\treturn [{\n\t\t\theaders: headers,\n\t\t\tpayload: payload\n\t\t}];\n\n\t};\n\n\tconst _reconnect_xhr = function(chunk, headers, binary) {\n\n\t\tlet connection = this.__connection;\n\t\tif (connection !== null) {\n\n\t\t\tlet tmp    = chunk.toString('utf8').split('\\n')[0].trim().split(' ');\n\t\t\tlet method = tmp[0];\n\t\t\tlet url    = 'http://' + connection.host + ':' + connection.port + tmp[1];\n\t\t\tlet socket = new _XHR();\n\t\t\tlet that   = this;\n\n\n\t\t\tsocket.open(method, url, true);\n\t\t\tsocket.responseType = binary === true ? 'arraybuffer' : 'text';\n\n\t\t\tsocket.onload = function() {\n\n\t\t\t\tlet chunks = _receive_xhr.call(that, socket.getAllResponseHeaders(), socket.response);\n\t\t\t\tif (chunks.length > 0) {\n\n\t\t\t\t\tfor (let c = 0, cl = chunks.length; c < cl; c++) {\n\n\t\t\t\t\t\tlet chunk = chunks[c];\n\t\t\t\t\t\tif (chunk.payload !== null) {\n\t\t\t\t\t\t\tthat.trigger('receive', [ chunk.payload, chunk.headers ]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tsocket.onerror = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tsocket.ontimeout = function() {\n\t\t\t\tthat.trigger('error');\n\t\t\t\tthat.disconnect();\n\t\t\t};\n\n\t\t\tfor (let key in headers) {\n\n\t\t\t\tif (key.charAt(0) === '@') {\n\t\t\t\t\tsocket.setRequestHeader(_uppercase('x-' + key.substr(1)), headers[key]);\n\t\t\t\t} else {\n\t\t\t\t\tsocket.setRequestHeader(_uppercase(key), headers[key]);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn socket;\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _connect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection !== socket) {\n\n\t\t\t// TODO: connect socket events\n\n\t\t\tthat.__connection = socket;\n\t\t\tthat.__protocol   = protocol;\n\n\t\t\tthat.trigger('connect');\n\n\t\t}\n\n\t};\n\n\tconst _disconnect_socket = function(socket, protocol) {\n\n\t\tlet that = this;\n\t\tif (that.__connection === socket) {\n\n\t\t\t// TODO: disconnect socket events\n\n\t\t\t// socket.destroy();\n\t\t\tprotocol.close();\n\n\n\t\t\tthat.__connection = null;\n\t\t\tthat.__protocol   = null;\n\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tthat.trigger('disconnect');\n\t\t\t}, 0);\n\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function() {\n\n\t\tthis.__connection = null;\n\t\tthis.__protocol   = null;\n\n\n\t\t_Emitter.call(this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Emitter.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.socket.HTTP';\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tconnect: function(host, port, connection) {\n\n\t\t\thost       = typeof host === 'string'       ? host       : null;\n\t\t\tport       = typeof port === 'number'       ? (port | 0) : null;\n\t\t\tconnection = typeof connection === 'object' ? connection : null;\n\n\n\t\t\tlet that     = this;\n\t\t\t// let url      = /:/g.test(host) ? ('http://[' + host + ']:' + port) : ('http://' + host + ':' + port);\n\t\t\tlet protocol = null;\n\n\n\t\t\tif (host !== null && port !== null) {\n\n\t\t\t\tif (connection !== null) {\n\n\t\t\t\t\tprotocol   = new _Protocol(_Protocol.TYPE.remote);\n\t\t\t\t\tconnection = null;\n\n\t\t\t\t\t// TODO: Remote Socket API\n\n\t\t\t\t\t// _connect_socket.call(that, connection, protocol);\n\t\t\t\t\t// connection.resume();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprotocol   = new _Protocol(_Protocol.TYPE.client);\n\t\t\t\t\tconnection = {\n\t\t\t\t\t\thost: host,\n\t\t\t\t\t\tport: port\n\t\t\t\t\t};\n\n\n\t\t\t\t\t_connect_socket.call(that, connection, protocol);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : null;\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tlet connection = this.__connection;\n\t\t\t\tlet protocol   = this.__protocol;\n\n\t\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t\t// XXX: HTML XHR does not support Buffer data\n\t\t\t\t\tlet chunk = protocol.send(payload, headers, binary);\n\t\t\t\t\t// let enc   = binary === true ? 'binary' : 'utf8';\n\n\n\t\t\t\t\t// XXX: Web XHR does not support halfopen Sockets\n\t\t\t\t\tconnection = _reconnect_xhr.call(this, chunk, headers, binary);\n\t\t\t\t\tchunk      = payload;\n\n\n\t\t\t\t\tif (connection !== null && chunk !== null) {\n\n\t\t\t\t\t\tif (binary === true) {\n\n\t\t\t\t\t\t\tlet blob = new ArrayBuffer(chunk.length);\n\t\t\t\t\t\t\tlet view = new Uint8Array(blob);\n\n\t\t\t\t\t\t\tfor (let c = 0, cl = chunk.length; c < cl; c++) {\n\t\t\t\t\t\t\t\tview[c] = chunk[c];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconnection.send(blob);\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconnection.send(chunk.toString('utf8'));\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tdisconnect: function() {\n\n\t\t\tlet connection = this.__connection;\n\t\t\tlet protocol   = this.__protocol;\n\n\t\t\tif (connection !== null && protocol !== null) {\n\n\t\t\t\t_disconnect_socket.call(this, connection, protocol);\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.remote.Storage":{"constructor":"lychee.Definition","arguments":["lychee.net.remote.Storage"],"blob":{"attaches":{},"includes":["lychee.net.Service"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Service = lychee.import('lychee.net.Service');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(remote) {\n\n\t\t_Service.call(this, 'storage', remote, _Service.TYPE.remote);\n\n\n\n\t\t/*\n\t\t * INITIALIZATION\n\t\t */\n\n\t\tthis.bind('sync', function(data) {\n\n\t\t\tlet main = global.MAIN || null;\n\t\t\tif (main !== null) {\n\n\t\t\t\tlet storage = main.storage || null;\n\t\t\t\tif (storage !== null) {\n\n\t\t\t\t\tstorage.deserialize({\n\t\t\t\t\t\tobjects: data.objects\n\t\t\t\t\t});\n\n\t\t\t\t\tstorage.sync(true);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}, this);\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Service.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.net.remote.Storage';\n\t\t\tdata['arguments']   = [];\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsync: function(objects) {\n\n\t\t\tobjects = objects instanceof Array ? objects : null;\n\n\n\t\t\tif (objects !== null && this.tunnel !== null) {\n\n\t\t\t\tthis.tunnel.send({\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tobjects:   objects\n\t\t\t\t}, {\n\t\t\t\t\tid:    'storage',\n\t\t\t\t\tevent: 'sync'\n\t\t\t\t});\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"game.effect.Explosion":{"constructor":"lychee.Definition","arguments":["game.effect.Explosion"],"blob":{"attaches":{"json":{"constructor":"Config","arguments":["/projects/flappy/source/effect/Explosion.json"],"blob":{"buffer":"data:application/json;base64,ewoJIm1hcCI6IHsKCQkiZGVmYXVsdCI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAwLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiA2NCwKCQkJCSJ5IjogMCwKCQkJCSJ3IjogNjQsCgkJCQkiaCI6IDY0CgkJCX0sCgkJCXsKCQkJCSJ4IjogMTI4LAoJCQkJInkiOiAwLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiAxOTIsCgkJCQkieSI6IDAsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDAsCgkJCQkieSI6IDY0LAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiA2NCwKCQkJCSJ5IjogNjQsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDEyOCwKCQkJCSJ5IjogNjQsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDE5MiwKCQkJCSJ5IjogNjQsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9CgkJXSwKCQkiZmlyZSI6IFsKCQkJewoJCQkJIngiOiAwLAoJCQkJInkiOiAxMjgsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDY0LAoJCQkJInkiOiAxMjgsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9LAoJCQl7CgkJCQkieCI6IDEyOCwKCQkJCSJ5IjogMTI4LAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiAxOTIsCgkJCQkieSI6IDEyOCwKCQkJCSJ3IjogNjQsCgkJCQkiaCI6IDY0CgkJCX0sCgkJCXsKCQkJCSJ4IjogMCwKCQkJCSJ5IjogMTkyLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiA2NCwKCQkJCSJ5IjogMTkyLAoJCQkJInciOiA2NCwKCQkJCSJoIjogNjQKCQkJfSwKCQkJewoJCQkJIngiOiAxMjgsCgkJCQkieSI6IDE5MiwKCQkJCSJ3IjogNjQsCgkJCQkiaCI6IDY0CgkJCX0sCgkJCXsKCQkJCSJ4IjogMTkyLAoJCQkJInkiOiAxOTIsCgkJCQkidyI6IDY0LAoJCQkJImgiOiA2NAoJCQl9CgkJXQoJfQp9"}},"png":{"constructor":"Texture","arguments":["/projects/flappy/source/effect/Explosion.png"],"blob":{"buffer":"data:image/png;base64,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"}},"snd":{"constructor":"Sound","arguments":["/projects/flappy/source/effect/Explosion.snd"],"blob":{"buffer":{"ogg":"data:application/ogg;base64,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Y5l93VlmX3eO4Rg6v/Djqaqvm64rDKcsC7/t68az+76yjK7r+6osC78q28Kx677z/L6wLKPs+sJqy8Kw2rYx3L5uLL9wHMtr68ox675RtnV8X3gKw/N0dV15Zl3H9nV040c4fsoAAIABBwCAABPKQKEhKwKAOAEAjySJomRZoihZliiKpui6omi6rqRppqlpnmlammeapmmqsimarixpmmlanmaamqeZpmiarmuapqyKpinLpmrKsmmasuy6sm27rmzbomnKsmmasmyapiy7sqvbruzquqRZpql5nmlqnmeapmrKsmmarqt5nmp6nmiqniiqqmqqqq2qqixbnmeamuippieKqmqqpq2aqirLpqrasmmqtmyqqm27quz6sm3rummqsm2qpi2bqmrbruzqsizbui9pmmlqnmeamueZpmmasmyaqitbnqeaniiqquaJpmqqqiybpqrKlueZqieKquqJnmuaqirLpmraqmmatmyqqi2bpirLrm37vuvKsm6qqmybqmrrpmrKsmzLvu/Kqu6KpinLpqrasmmqsi3bsu/Lsqz7omnKsmmqsm2qqi7Lsm0bs2z7umiasm2qpi2bqirbsi37uizbuu/Krm+rqqzrsi37uu76rnDrujC8smz7qqz6uivbum/rMtv2fUTTlGVTNW3bVFVZdmXZ9mXb9n3RNG1bVVVbNk3VtmVZ9n1Ztm1hNE3ZNlVV1k3VtG1Zlm1htmXhdmXZt2Vb9nXXlXVf133j12Xd5rqy7cuyrfuqq/q27vvCcOuu8AoAABhwAAAIMKEMFBqyEgCIAgAAjGGMMQiNUs45B6FRyjnnIGTOQQghlcw5CCGUkjkHoZSUMucglJJSCKGUlFoLIZSUUmsFAAAUOAAABNigKbE4QKEhKwGAVAAAg+NYlueZomrasmNJnieKqqmqtu1IlueJommqqm1bnieKpqmqruvrmueJommqquvqumiapqmqruu6ui6aoqmqquu6sq6bpqqqriu7suzrpqqqquvKriz7wqq6rivLsm3rwrCqruvKsmzbtm/cuq7rvu/7wpGt67ou/MIxDEcBAOAJDgBABTasjnBSNBZYaMhKACADAIAwBiGDEEIGIYSQUkohpZQSAAAw4AAAEGBCGSg0ZEUAECcAABhDKaSUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJIKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKqaSUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKZVSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUgoAkIpwAJB6MKEMFBqyEgBIBQAAjFFKKcacgxAx5hhj0EkoKWLMOcYclJJS5RyEEFJpLbfKOQghpNRSbZlzUlqLMeYYM+ekpBRbzTmHUlKLseaaa+6ktFZrrjXnWlqrNdecc825tBZrrjnXnHPLMdecc8455xhzzjnnnHPOBQDgNDgAgB7YsDrCSdFYYKEhKwGAVAAAAhmlGHPOOegQUow55xyEECKFGHPOOQghVIw55xx0EEKoGHPMOQghhJA55xyEEEIIIXMOOugghBBCBx2EEEIIoZTOQQghhBBKKCGEEEIIIYQQOgghhBBCCCGEEEIIIYRSSgghhBBCCaGUUAAAYIEDAECADasjnBSNBRYashIAAAIAgByWoFLOhEGOQY8NQcpRMw1CTDnRmWJOajMVU5A5EJ10EhlqQdleMgsAAIAgACDABBAYICj4QgiIMQAAQYjMEAmFVbDAoAwaHOYBwANEhEQAkJigSLu4gC4DXNDFXQdCCEIQglgcQAEJODjhhife8IQbnKBTVOogAAAAAAAMAOABAOCgACIimquwuMDI0Njg6PAIAAAAAAAWAPgAADg+gIiI5iosLjAyNDY4OjwCAAAAAAAAAACAgIAAAAAAAEAAAACAgE9nZ1MABDdBAAAAAAAAOByAbwIAAAAwLNmUYR8VHyAgHx8gICAZIB8dHx4fIx4hHx8fGh4fHx8gHyEfHyAcGR8gIBogHh8dHh4g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","mp3":"data:audio/mp3;base64,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"}}}},"exports":"function (lychee, global, attachments) {\n\n\tconst _CONFIG  = attachments[\"json\"].buffer;\n\tconst _TEXTURE = attachments[\"png\"];\n\tconst _SOUND   = attachments[\"snd\"];\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(settings) {\n\n\t\tthis.delay    = 0;\n\t\tthis.duration = 250;\n\t\tthis.frame    = 7;\n\t\tthis.position = { x: null, y: null, z: null };\n\n\t\tthis.__frame  = 0;\n\t\tthis.__map    = Math.random() > 0.5 ? _CONFIG.map['default'] : _CONFIG.map['fire'];\n\t\tthis.__origin = 0;\n\t\tthis.__start  = null;\n\t\tthis.__sound  = true;\n\n\n\t\t// No data validation garbage allowed for effects\n\n\t\tlet delay    = typeof settings.delay === 'number'    ? (settings.delay | 0)    : null;\n\t\tlet duration = typeof settings.duration === 'number' ? (settings.duration | 0) : null;\n\t\tlet position = settings.position instanceof Object   ? settings.position       : null;\n\n\t\tif (delay !== null) {\n\t\t\tthis.delay = delay;\n\t\t}\n\n\t\tif (duration !== null) {\n\t\t\tthis.duration = duration;\n\t\t}\n\n\t\tif (position !== null) {\n\t\t\tthis.position.x = typeof position.x === 'number' ? (position.x | 0) : null;\n\t\t\tthis.position.y = typeof position.y === 'number' ? (position.y | 0) : null;\n\t\t\tthis.position.z = typeof position.z === 'number' ? (position.z | 0) : null;\n\t\t}\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = {};\n\n\n\t\t\tif (this.delay !== 0)      settings.delay    = this.delay;\n\t\t\tif (this.duration !== 250) settings.duration = this.duration;\n\n\n\t\t\tif (this.position.x !== null || this.position.y !== null || this.position.z !== null) {\n\n\t\t\t\tsettings.position = {};\n\n\t\t\t\tif (this.position.x !== null) settings.position.x = this.position.x;\n\t\t\t\tif (this.position.y !== null) settings.position.y = this.position.y;\n\t\t\t\tif (this.position.z !== null) settings.position.z = this.position.z;\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'game.effect.Explosion',\n\t\t\t\t'arguments':   [ settings ]\n\t\t\t};\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tlet t = (this.__clock - this.__start) / this.duration;\n\t\t\tif (t > 0 && t <= 1) {\n\n\t\t\t\tlet frame    = (this.__frame | 0);\n\t\t\t\tlet map      = this.__map[frame] || null;\n\t\t\t\tlet position = this.position;\n\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tlet x1 = position.x + offsetX - map.w / 2;\n\t\t\t\t\tlet y1 = position.y + offsetY - map.h / 2;\n\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\t_TEXTURE,\n\t\t\t\t\t\tmap\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function(entity, clock, delta) {\n\n\t\t\tthis.__clock = clock;\n\n\n\t\t\tif (this.__start === null) {\n\t\t\t\tthis.__start = clock + this.delay;\n\t\t\t}\n\n\n\t\t\tlet t = (clock - this.__start) / this.duration;\n\t\t\tif (t < 0) {\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (this.__origin === null) {\n\t\t\t\t\tthis.__origin = 0;\n\t\t\t\t}\n\n\t\t\t\tif (this.__sound === true) {\n\t\t\t\t\tthis.__sound = false;\n\t\t\t\t\t_SOUND.play();\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tlet origin = this.__origin;\n\t\t\tlet frame  = this.frame;\n\t\t\tlet f      = origin;\n\n\t\t\tif (t <= 1) {\n\n\t\t\t\tf += t * (frame - origin);\n\n\n\t\t\t\tthis.__frame = f;\n\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.__frame = frame;\n\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ui.Sprite":{"constructor":"lychee.Definition","arguments":["lychee.ui.Sprite"],"blob":{"attaches":{},"includes":["lychee.ui.Entity"],"exports":"function (lychee, global, attachments) {\n\n\tconst _Entity = lychee.import('lychee.ui.Entity');\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.frame   = 0;\n\t\tthis.texture = null;\n\n\t\tthis.__animation = {\n\t\t\tactive:   false,\n\t\t\tstart:    null,\n\t\t\tframes:   0,\n\t\t\tduration: 0,\n\t\t\tloop:     false\n\t\t};\n\t\tthis.__map = {\n\t\t\t'default': null,\n\t\t\t'active':  null\n\t\t};\n\n\n\t\tthis.setAnimation(settings.animation);\n\t\tthis.setTexture(settings.texture);\n\t\tthis.setMap(settings.map);\n\n\t\tdelete settings.texture;\n\t\tdelete settings.map;\n\n\n\t\t_Entity.call(this, settings);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tlet texture = lychee.deserialize(blob.texture);\n\t\t\tif (texture !== null) {\n\t\t\t\tthis.setTexture(texture);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet data = _Entity.prototype.serialize.call(this);\n\t\t\tdata['constructor'] = 'lychee.ui.Sprite';\n\n\t\t\tlet settings = data['arguments'][0];\n\t\t\tlet blob     = (data['blob'] || {});\n\n\n\t\t\tif (this.__animation.active === true) {\n\n\t\t\t\tsettings.animation = {};\n\n\t\t\t\tif (this.__animation.duration !== 1000) settings.animation.duration = this.__animation.duration;\n\t\t\t\tif (this.frame !== 0)                   settings.animation.frame    = this.frame;\n\t\t\t\tif (this.__animation.frames !== 25)     settings.animation.frames   = this.__animation.frames;\n\t\t\t\tif (this.__animation.loop !== false)    settings.animation.loop     = this.__animation.loop;\n\n\t\t\t}\n\n\t\t\tif (Object.keys(this.__map).length > 0) {\n\n\t\t\t\tsettings.map = {};\n\n\n\t\t\t\tfor (let stateId in this.__map) {\n\n\t\t\t\t\tsettings.map[stateId] = [];\n\n\n\t\t\t\t\tlet frames = this.__map[stateId] || null;\n\t\t\t\t\tif (frames !== null) {\n\n\t\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\t\tlet frame  = frames[f];\n\t\t\t\t\t\t\tlet sframe = {};\n\n\t\t\t\t\t\t\tif (frame.x !== 0) sframe.x = frame.x;\n\t\t\t\t\t\t\tif (frame.y !== 0) sframe.y = frame.y;\n\t\t\t\t\t\t\tif (frame.w !== 0) sframe.w = frame.w;\n\t\t\t\t\t\t\tif (frame.h !== 0) sframe.h = frame.h;\n\n\n\t\t\t\t\t\t\tsettings.map[stateId].push(sframe);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (this.texture !== null) blob.texture = lychee.serialize(this.texture);\n\n\n\t\t\tdata['blob'] = Object.keys(blob).length > 0 ? blob : null;\n\n\n\t\t\treturn data;\n\n\t\t},\n\n\t\trender: function(renderer, offsetX, offsetY) {\n\n\t\t\tif (this.visible === false) return;\n\n\n\t\t\tlet texture = this.texture;\n\t\t\tif (texture !== null) {\n\n\t\t\t\tlet alpha    = this.alpha;\n\t\t\t\tlet position = this.position;\n\n\t\t\t\tlet x1 = 0;\n\t\t\t\tlet y1 = 0;\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(alpha);\n\t\t\t\t}\n\n\n\t\t\t\tlet map = this.getMap();\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tx1 = position.x + offsetX - map.w / 2;\n\t\t\t\t\ty1 = position.y + offsetY - map.h / 2;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture,\n\t\t\t\t\t\tmap\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet hw = (this.width  / 2) || this.radius;\n\t\t\t\t\tlet hh = (this.height / 2) || this.radius;\n\n\t\t\t\t\tx1 = position.x + offsetX - hw;\n\t\t\t\t\ty1 = position.y + offsetY - hh;\n\n\t\t\t\t\trenderer.drawSprite(\n\t\t\t\t\t\tx1,\n\t\t\t\t\t\ty1,\n\t\t\t\t\t\ttexture\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\n\t\t\t\tif (alpha !== 1) {\n\t\t\t\t\trenderer.setAlpha(1.0);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t_Entity.prototype.render.call(this, renderer, offsetX, offsetY);\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\t_Entity.prototype.update.call(this, clock, delta);\n\n\n\t\t\tlet animation = this.__animation;\n\n\t\t\t// 1. Animation (Interpolation)\n\t\t\tif (animation.active === true) {\n\n\t\t\t\tif (animation.start !== null) {\n\n\t\t\t\t\tlet t = (clock - animation.start) / animation.duration;\n\t\t\t\t\tif (t <= 1) {\n\n\t\t\t\t\t\tthis.frame = Math.max(0, Math.ceil(t * animation.frames) - 1);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (animation.loop === true) {\n\t\t\t\t\t\t\tanimation.start = clock;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.frame = animation.frames - 1;\n\t\t\t\t\t\t\tanimation.active = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tsetAnimation: function(settings) {\n\n\t\t\tsettings = settings instanceof Object ? settings : null;\n\n\n\t\t\tif (settings !== null) {\n\n\t\t\t\tlet duration = typeof settings.duration === 'number' ? settings.duration : 1000;\n\t\t\t\tlet frame    = typeof settings.frame === 'number'    ? settings.frame    : 0;\n\t\t\t\tlet frames   = typeof settings.frames === 'number'   ? settings.frames   : 25;\n\t\t\t\tlet loop     = settings.loop === true;\n\n\n\t\t\t\tlet animation = this.__animation;\n\n\t\t\t\tanimation.start    = null;\n\t\t\t\tanimation.active   = true;\n\t\t\t\tanimation.duration = duration;\n\t\t\t\tanimation.frames   = frames;\n\t\t\t\tanimation.loop     = loop;\n\n\t\t\t\tthis.frame = frame;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tclearAnimation: function() {\n\n\t\t\tthis.__animation.active = false;\n\t\t\tthis.frame = 0;\n\n\t\t},\n\n\t\tsetState: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet result = _Entity.prototype.setState.call(this, id);\n\t\t\tif (result === true) {\n\n\t\t\t\tlet map = this.__map[this.state] || null;\n\t\t\t\tif (map !== null) {\n\n\t\t\t\t\tif (map instanceof Array) {\n\n\t\t\t\t\t\tlet statemap = this.getStateMap();\n\t\t\t\t\t\tif (statemap !== null && statemap instanceof Object) {\n\n\t\t\t\t\t\t\tthis.clearAnimation();\n\n\t\t\t\t\t\t\tif (statemap.animation === true) {\n\n\t\t\t\t\t\t\t\tthis.setAnimation({\n\t\t\t\t\t\t\t\t\tduration: statemap.duration || 1000,\n\t\t\t\t\t\t\t\t\tframe:    0,\n\t\t\t\t\t\t\t\t\tframes:   map.length,\n\t\t\t\t\t\t\t\t\tloop:     statemap.loop === true\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tmap = map[0];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (map.width !== undefined && typeof map.width === 'number') {\n\t\t\t\t\t\tthis.width = map.width;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.height !== undefined && typeof map.height === 'number') {\n\t\t\t\t\t\tthis.height = map.height;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (map.radius !== undefined && typeof map.radius === 'number') {\n\t\t\t\t\t\tthis.radius = map.radius;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn result;\n\n\t\t},\n\n\t\tsetTexture: function(texture) {\n\n\t\t\ttexture = texture instanceof Texture ? texture : null;\n\n\n\t\t\tthis.texture = texture;\n\n\t\t\treturn true;\n\n\t\t},\n\n\t\tgetMap: function() {\n\n\t\t\tlet state = this.state;\n\t\t\tlet frame = this.frame;\n\n\t\t\tif (this.__map[state] instanceof Array && this.__map[state][frame] !== undefined) {\n\t\t\t\treturn this.__map[state][frame];\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\tsetMap: function(map) {\n\n\t\t\tmap = map instanceof Object ? map : null;\n\n\n\t\t\tlet valid = false;\n\n\t\t\tif (map !== null) {\n\n\t\t\t\tfor (let stateId in map) {\n\n\t\t\t\t\tlet frames = map[stateId];\n\t\t\t\t\tif (frames instanceof Array) {\n\n\t\t\t\t\t\tthis.__map[stateId] = [];\n\n\n\t\t\t\t\t\tfor (let f = 0, fl = frames.length; f < fl; f++) {\n\n\t\t\t\t\t\t\tlet frame = frames[f];\n\t\t\t\t\t\t\tif (frame instanceof Object) {\n\n\t\t\t\t\t\t\t\tframe.x = typeof frame.x === 'number' ? frame.x : 0;\n\t\t\t\t\t\t\t\tframe.y = typeof frame.y === 'number' ? frame.y : 0;\n\t\t\t\t\t\t\t\tframe.w = typeof frame.w === 'number' ? frame.w : 0;\n\t\t\t\t\t\t\t\tframe.h = typeof frame.h === 'number' ? frame.h : 0;\n\n\n\t\t\t\t\t\t\t\tthis.__map[stateId].push(frame);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tvalid = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn valid;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.Genome":{"constructor":"lychee.Definition","arguments":["lychee.ai.Genome"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.genes = [];\n\n\t\tthis.__map = {};\n\n\n\t\tthis.setGenes(settings.genes);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.genes instanceof Array) {\n\n\t\t\t\tlet genes = blob.genes;\n\t\t\t\tlet map   = {};\n\n\n\t\t\t\tif (blob.map instanceof Object) {\n\n\t\t\t\t\tfor (let bid in blob.map) {\n\n\t\t\t\t\t\tlet index = blob.map[bid];\n\t\t\t\t\t\tif (typeof index === 'number') {\n\t\t\t\t\t\t\tmap[bid] = index;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\tfor (let g = 0, gl = genes.length; g < gl; g++) {\n\n\t\t\t\t\tlet id = null;\n\t\t\t\t\tfor (let mid in map) {\n\n\t\t\t\t\t\tif (map[mid] === g) {\n\t\t\t\t\t\t\tid = mid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (id !== null) {\n\t\t\t\t\t\tthis.setGene(id, genes[g]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addGene(genes[g]);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet blob = {};\n\n\n\t\t\tif (this.genes.length > 0) {\n\t\t\t\tblob.genes = this.genes.map(lychee.serialize);\n\t\t\t}\n\n\n\t\t\tif (blob.genes instanceof Array && Object.keys(this.__map).length > 0) {\n\n\t\t\t\tblob.map = Object.map(this.__map, function(val, key) {\n\n\t\t\t\t\tlet index = this.genes.indexOf(val);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn undefined;\n\n\t\t\t\t}, this);\n\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.ai.Genome',\n\t\t\t\t'arguments':   [],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\taddGene: function(gene) {\n\n\t\t\tgene = gene instanceof Object ? gene : null;\n\n\n\t\t\tif (gene !== null) {\n\n\t\t\t\tlet index = this.genes.indexOf(gene);\n\t\t\t\tif (index === -1) {\n\n\t\t\t\t\tthis.genes.push(gene);\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetGene: function(id, gene) {\n\n\t\t\tid   = typeof id === 'string' ? id   : null;\n\t\t\tgene = gene instanceof Object ? gene : null;\n\n\n\t\t\tif (id !== null && gene !== null && this.__map[id] === undefined) {\n\n\t\t\t\tthis.__map[id] = gene;\n\n\t\t\t\tlet result = this.addGene(gene);\n\t\t\t\tif (result === true) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetGene: function(id) {\n\n\t\t\tid = typeof id === 'string' ? id : null;\n\n\n\t\t\tlet found = null;\n\n\n\t\t\tif (id !== null) {\n\n\t\t\t\tif (this.__map[id] !== undefined) {\n\t\t\t\t\tfound = this.__map[id];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn found;\n\n\t\t},\n\n\t\tremoveGene: function(gene) {\n\n\t\t\tgene = gene instanceof Object ? gene : null;\n\n\n\t\t\tif (gene !== null) {\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tlet index = this.genes.indexOf(gene);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.genes.splice(index, 1);\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\n\n\t\t\t\tfor (let id in this.__map) {\n\n\t\t\t\t\tif (this.__map[id] === gene) {\n\n\t\t\t\t\t\tdelete this.__map[id];\n\t\t\t\t\t\tfound = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn found;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetGenes: function(genes) {\n\n\t\t\tgenes = genes instanceof Object ? genes : null;\n\n\n\t\t\tlet all = true;\n\n\t\t\tif (genes !== null) {\n\n\t\t\t\tfor (let g = 0, gl = genes.length; g < gl; g++) {\n\n\t\t\t\t\tlet result = this.addGene(genes[g]);\n\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\tall = false;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn all;\n\n\t\t},\n\n\t\tremoveGenes: function() {\n\n\t\t\tlet genes = this.genes;\n\n\t\t\tfor (let g = 0, gl = genes.length; g < gl; g++) {\n\n\t\t\t\tthis.removeGene(genes[g]);\n\n\t\t\t\tgl--;\n\t\t\t\tg--;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.enn.Brain":{"constructor":"lychee.Definition","arguments":["lychee.ai.enn.Brain"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _random = function() {\n\t\treturn (Math.random() * 2) - 1;\n\t};\n\n\tconst _sigmoid = function(value) {\n\t\treturn (1 / (1 + Math.exp((-1 * value) / 1)));\n\t};\n\n\tconst _init_network = function() {\n\n\t\tlet input_size = this.__sensors_map.reduce(function(a, b) {\n\t\t\treturn a + b;\n\t\t}, 0);\n\n\t\tlet output_size = this.__controls_map.reduce(function(a, b) {\n\t\t\treturn a + b;\n\t\t}, 0);\n\n\n\t\tif (input_size === 0 || output_size === 0) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet layers_size = 3;\n\t\tlet hidden_size = 1;\n\t\tlet weight_size = 0;\n\n\t\tif (input_size > output_size) {\n\t\t\thidden_size = input_size;\n\t\t\tlayers_size = Math.max(input_size - output_size, 3);\n\t\t} else {\n\t\t\thidden_size = output_size;\n\t\t\tlayers_size = Math.max(output_size - input_size, 3);\n\t\t}\n\n\n\t\tfor (let l = 0; l < layers_size; l++) {\n\n\t\t\tlet prev = hidden_size;\n\t\t\tlet size = hidden_size;\n\n\t\t\tif (l === 0) {\n\t\t\t\tprev = 0;\n\t\t\t\tsize = input_size;\n\t\t\t} else if (l === 1) {\n\t\t\t\tprev = input_size;\n\t\t\t\tsize = hidden_size;\n\t\t\t} else if (l === layers_size - 1) {\n\t\t\t\tprev = hidden_size;\n\t\t\t\tsize = output_size;\n\t\t\t}\n\n\n\t\t\tlet layer = new Array(size);\n\n\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\tlet neuron = {\n\t\t\t\t\tvalue:   _random(),\n\t\t\t\t\tweights: []\n\t\t\t\t};\n\n\t\t\t\tfor (let p = 0; p < prev; p++) {\n\t\t\t\t\tneuron.weights.push(_random());\n\t\t\t\t}\n\n\t\t\t\tlayer[n] = neuron;\n\n\t\t\t}\n\n\t\t\tthis.__layers[l]  = layer;\n\t\t\tweight_size      += layer.length;\n\n\t\t}\n\n\n\t\tthis.__size.input  = input_size;\n\t\tthis.__size.hidden = hidden_size;\n\t\tthis.__size.output = output_size;\n\t\tthis.__size.weight = weight_size;\n\n\t\tthis._inputs  = null;\n\t\tthis._outputs = null;\n\n\t\tthis._inputs  = new Array(input_size);\n\t\tthis._outputs = new Array(output_size);\n\n\t};\n\n\tconst _update_network = function(inputs, outputs) {\n\n\t\tlet layers = this.__layers;\n\n\n\t\t// Update Input Layer\n\t\tlet input_layer = layers[0];\n\n\t\tfor (let il = 0, ill = input_layer.length; il < ill; il++) {\n\t\t\tinput_layer[il].value = inputs[il];\n\t\t}\n\n\n\t\t// Update Hidden Layers\n\t\tlet prev_layer = layers[0];\n\n\t\tfor (let l = 1, ll = layers.length; l < ll; l++) {\n\n\t\t\tlet current_layer = layers[l];\n\n\t\t\tfor (let n = 0, nl = current_layer.length; n < nl; n++) {\n\n\t\t\t\tlet neuron = current_layer[n];\n\t\t\t\tlet value  = 0;\n\n\t\t\t\tfor (let p = 0, pl = prev_layer.length; p < pl; p++) {\n\t\t\t\t\tvalue += prev_layer[p].value * neuron.weights[p];\n\t\t\t\t}\n\n\t\t\t\tvalue        += neuron.bias;\n\t\t\t\tneuron.value  = _sigmoid(value);\n\n\t\t\t}\n\n\t\t\tprev_layer = current_layer;\n\n\t\t}\n\n\n\t\t// Update Output Layer\n\t\tlet output_layer = layers[layers.length - 1];\n\n\t\tfor (let o = 0, ol = output_layer.length; o < ol; o++) {\n\t\t\toutputs[o] = output_layer[o].value;\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.controls = [];\n\t\tthis.sensors  = [];\n\n\t\tthis.__controls_map = [];\n\t\tthis.__layers       = [];\n\t\tthis.__sensors_map  = [];\n\n\t\t// cache structures\n\t\tthis._inputs  = [];\n\t\tthis._outputs = [];\n\t\tthis.__size   = {\n\t\t\tinput:  0,\n\t\t\thidden: 0,\n\t\t\toutput: 0,\n\t\t\tweight: 0\n\t\t};\n\n\n\t\tthis.setSensors(settings.sensors);\n\t\tthis.setControls(settings.controls);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.layers instanceof Array) {\n\t\t\t\tthis.__layers = lychee.deserialize(blob.layers);\n\t\t\t}\n\n\t\t\tif (blob.size instanceof Object) {\n\t\t\t\tthis.__size = lychee.deserialize(blob.size);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = {};\n\n\n\t\t\tif (this.controls.length > 0) settings.controls = lychee.serialize(this.controls);\n\t\t\tif (this.sensors.length > 0)  settings.sensors  = lychee.serialize(this.sensors);\n\n\n\t\t\tif (this.__layers.length > 0) {\n\t\t\t\tblob.layers = lychee.serialize(this.__layers);\n\t\t\t}\n\n\t\t\tif (this.__size.input !== 0 || this.__size.output !== 0) {\n\t\t\t\tblob.size = lychee.serialize(this.__size);\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.ai.enn.Brain',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet controls     = this.controls;\n\t\t\tlet controls_map = this.__controls_map;\n\t\t\tlet sensors      = this.sensors;\n\t\t\tlet inputs       = this._inputs;\n\t\t\tlet outputs      = this._outputs;\n\n\n\t\t\t// 1. Transform Policies to Inputs\n\t\t\tfor (let i = 0, s = 0, sl = sensors.length; s < sl; s++) {\n\n\t\t\t\tlet sensor = sensors[s];\n\t\t\t\tlet values = sensor.sensor();\n\n\t\t\t\tfor (let v = 0, vl = values.length; v < vl; v++) {\n\t\t\t\t\tinputs[i++] = values[v];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// 2. Update Network\n\t\t\t_update_network.call(this, inputs, outputs);\n\n\n\t\t\t// 3. Transform Outputs to Policies\n\t\t\tlet offset = 0;\n\n\t\t\tfor (let c = 0, cl = controls_map.length; c < cl; c++) {\n\n\t\t\t\tlet control = controls[c];\n\t\t\t\tlet length  = controls_map[c];\n\t\t\t\tlet values  = [].slice.call(outputs, offset, length);\n\n\t\t\t\tif (values.length > 0) {\n\t\t\t\t\tcontrol.control(values);\n\t\t\t\t}\n\n\t\t\t\toffset += length;\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tlearn: function(inputs, outputs) {\n\n\t\t\tinputs  = inputs instanceof Array  ? inputs  : null;\n\t\t\toutputs = outputs instanceof Array ? outputs : null;\n\n\n\t\t\tif (inputs !== null && outputs !== null) {\n\n\t\t\t\t// XXX: Feed Forward NN cannot learn\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetControls: function(controls) {\n\n\t\t\tcontrols = controls instanceof Array ? controls : null;\n\n\n\t\t\tif (controls !== null) {\n\n\t\t\t\tthis.controls = controls;\n\n\t\t\t\tthis.__controls_map = controls.map(function(control) {\n\t\t\t\t\treturn (control.sensor() || [ 1 ]).length;\n\t\t\t\t});\n\n\n\t\t\t\tlet size = this.__controls_map.reduce(function(a, b) {\n\t\t\t\t\treturn a + b;\n\t\t\t\t}, 0);\n\n\t\t\t\tif (size !== this.__size.output) {\n\t\t\t\t\t_init_network.call(this);\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetSensors: function(sensors) {\n\n\t\t\tsensors = sensors instanceof Array ? sensors : null;\n\n\n\t\t\tif (sensors !== null) {\n\n\t\t\t\tthis.sensors = sensors;\n\n\t\t\t\tthis.__sensors_map = sensors.map(function(sensor) {\n\t\t\t\t\treturn (sensor.sensor() || [ 1 ]).length;\n\t\t\t\t});\n\n\n\t\t\t\tlet size = this.__sensors_map.reduce(function(a, b) {\n\t\t\t\t\treturn a + b;\n\t\t\t\t}, 0);\n\n\t\t\t\tif (size !== this.__size.input) {\n\t\t\t\t\t_init_network.call(this);\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetWeights: function() {\n\n\t\t\tlet layers  = this.__layers;\n\t\t\tlet weights = [];\n\n\n\t\t\tfor (let l = 0, ll = layers.length; l < ll; l++) {\n\n\t\t\t\tlet layer = layers[l];\n\n\t\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\t\tlet neuron = layer[n];\n\t\t\t\t\tif (neuron.weights.length !== 0) {\n\n\t\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\t\tweights.push(neuron.weights[w]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__size.weight = weights.length;\n\n\n\t\t\treturn weights;\n\n\t\t},\n\n\t\tsetWeights: function(weights) {\n\n\t\t\tweights = weights instanceof Array ? weights : null;\n\n\n\t\t\tif (weights !== null) {\n\n\t\t\t\tlet size = this.__size.weight;\n\t\t\t\tif (size === weights.length) {\n\n\t\t\t\t\tlet count  = 0;\n\t\t\t\t\tlet layers = this.__layers;\n\n\t\t\t\t\tfor (let l = 0, ll = layers.length; l < ll; l++) {\n\n\t\t\t\t\t\tlet layer = layers[l];\n\n\t\t\t\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\t\t\t\tlet neuron = layer[n];\n\t\t\t\t\t\t\tif (neuron.weights.length !== 0) {\n\n\t\t\t\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\t\t\t\tneuron.weights[w] = weights[count++];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.bnn.Brain":{"constructor":"lychee.Definition","arguments":["lychee.ai.bnn.Brain"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\tconst _LEARNING_RATE     = 0.3;\n\tconst _LEARNING_MOMENTUM = 0.9;\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _random = function() {\n\t\treturn (Math.random() * 2) - 1;\n\t};\n\n\tconst _sigmoid = function(value) {\n\t\treturn (1 / (1 + Math.exp((-1 * value) / 1)));\n\t};\n\n\tconst _init_network = function() {\n\n\t\tlet input_size = this.__sensors_map.reduce(function(a, b) {\n\t\t\treturn a + b;\n\t\t}, 0);\n\n\t\tlet output_size = this.__controls_map.reduce(function(a, b) {\n\t\t\treturn a + b;\n\t\t}, 0);\n\n\n\t\tif (input_size === 0 || output_size === 0) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tlet layers_size = 3;\n\t\tlet hidden_size = 1;\n\t\tlet weight_size = 0;\n\n\t\tif (input_size > output_size) {\n\t\t\thidden_size = input_size;\n\t\t\tlayers_size = Math.max(input_size - output_size, 3);\n\t\t} else {\n\t\t\thidden_size = output_size;\n\t\t\tlayers_size = Math.max(output_size - input_size, 3);\n\t\t}\n\n\n\t\tfor (let l = 0; l < layers_size; l++) {\n\n\t\t\tlet prev = hidden_size;\n\t\t\tlet size = hidden_size;\n\n\t\t\tif (l === 0) {\n\t\t\t\tprev = 0;\n\t\t\t\tsize = input_size;\n\t\t\t} else if (l === 1) {\n\t\t\t\tprev = input_size;\n\t\t\t\tsize = hidden_size;\n\t\t\t} else if (l === layers_size - 1) {\n\t\t\t\tprev = hidden_size;\n\t\t\t\tsize = output_size;\n\t\t\t}\n\n\n\t\t\tlet layer = new Array(size);\n\n\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\tlet neuron = {\n\t\t\t\t\tbias:    1,\n\t\t\t\t\tdelta:   0,\n\t\t\t\t\tvalue:   _random(),\n\t\t\t\t\thistory: [],\n\t\t\t\t\tweights: []\n\t\t\t\t};\n\n\t\t\t\tfor (let p = 0; p < prev; p++) {\n\t\t\t\t\tneuron.history.push(0);\n\t\t\t\t\tneuron.weights.push(_random());\n\t\t\t\t}\n\n\t\t\t\tlayer[n] = neuron;\n\n\t\t\t}\n\n\t\t\tthis.__layers[l]  = layer;\n\t\t\tweight_size      += layer.length * 2;\n\n\t\t}\n\n\n\t\tthis.__size.input  = input_size;\n\t\tthis.__size.hidden = hidden_size;\n\t\tthis.__size.output = output_size;\n\t\tthis.__size.weight = weight_size;\n\n\t\tthis._inputs  = null;\n\t\tthis._outputs = null;\n\n\t\tthis._inputs  = new Array(input_size);\n\t\tthis._outputs = new Array(output_size);\n\n\t};\n\n\tconst _update_network = function(inputs, outputs) {\n\n\t\tlet layers = this.__layers;\n\n\n\t\t// Update Input Layer\n\t\tlet input_layer = layers[0];\n\n\t\tfor (let il = 0, ill = input_layer.length; il < ill; il++) {\n\t\t\tinput_layer[il].value = inputs[il];\n\t\t}\n\n\n\t\t// Update Hidden Layers\n\t\tlet prev_layer = layers[0];\n\n\t\tfor (let l = 1, ll = layers.length; l < ll; l++) {\n\n\t\t\tlet current_layer = layers[l];\n\n\t\t\tfor (let n = 0, nl = current_layer.length; n < nl; n++) {\n\n\t\t\t\tlet neuron = current_layer[n];\n\t\t\t\tlet value  = 0;\n\n\t\t\t\tfor (let p = 0, pl = prev_layer.length; p < pl; p++) {\n\t\t\t\t\tvalue += prev_layer[p].value * neuron.weights[p];\n\t\t\t\t}\n\n\t\t\t\tvalue        += neuron.bias;\n\t\t\t\tneuron.value  = _sigmoid(value);\n\n\t\t\t}\n\n\t\t\tprev_layer = current_layer;\n\n\t\t}\n\n\n\t\t// Update Output Layer\n\t\tlet output_layer = layers[layers.length - 1];\n\n\t\tfor (let o = 0, ol = output_layer.length; o < ol; o++) {\n\t\t\toutputs[o] = output_layer[o].value;\n\t\t}\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(data) {\n\n\t\tlet settings = Object.assign({}, data);\n\n\n\t\tthis.controls = [];\n\t\tthis.sensors  = [];\n\n\t\tthis.__controls_map = [];\n\t\tthis.__layers       = [];\n\t\tthis.__sensors_map  = [];\n\n\t\t// cache structures\n\t\tthis._inputs  = [];\n\t\tthis._outputs = [];\n\t\tthis.__size   = {\n\t\t\tinput:  0,\n\t\t\thidden: 0,\n\t\t\toutput: 0,\n\t\t\tweight: 0\n\t\t};\n\n\n\t\tthis.setSensors(settings.sensors);\n\t\tthis.setControls(settings.controls);\n\n\t\tsettings = null;\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\tdeserialize: function(blob) {\n\n\t\t\tif (blob.layers instanceof Array) {\n\t\t\t\tthis.__layers = lychee.deserialize(blob.layers);\n\t\t\t}\n\n\t\t\tif (blob.size instanceof Object) {\n\t\t\t\tthis.__size = lychee.deserialize(blob.size);\n\t\t\t}\n\n\t\t},\n\n\t\tserialize: function() {\n\n\t\t\tlet settings = {};\n\t\t\tlet blob     = {};\n\n\n\t\t\tif (this.controls.length > 0) settings.controls = lychee.serialize(this.controls);\n\t\t\tif (this.sensors.length > 0)  settings.sensors  = lychee.serialize(this.sensors);\n\n\n\t\t\tif (this.__layers.length > 0) {\n\t\t\t\tblob.layers = lychee.serialize(this.__layers);\n\t\t\t}\n\n\t\t\tif (this.__size.input !== 0 || this.__size.output !== 0) {\n\t\t\t\tblob.size = lychee.serialize(this.__size);\n\t\t\t}\n\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.ai.bnn.Brain',\n\t\t\t\t'arguments':   [ settings ],\n\t\t\t\t'blob':        Object.keys(blob).length > 0 ? blob : null\n\t\t\t};\n\n\t\t},\n\n\t\tupdate: function(clock, delta) {\n\n\t\t\tlet controls     = this.controls;\n\t\t\tlet controls_map = this.__controls_map;\n\t\t\tlet sensors      = this.sensors;\n\t\t\tlet inputs       = this._inputs;\n\t\t\tlet outputs      = this._outputs;\n\n\n\t\t\t// 1. Transform Policies to Inputs\n\t\t\tfor (let i = 0, s = 0, sl = sensors.length; s < sl; s++) {\n\n\t\t\t\tlet sensor = sensors[s];\n\t\t\t\tlet values = sensor.sensor();\n\n\t\t\t\tfor (let v = 0, vl = values.length; v < vl; v++) {\n\t\t\t\t\tinputs[i++] = values[v];\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// 2. Update Network\n\t\t\t_update_network.call(this, inputs, outputs);\n\n\n\t\t\t// 3. Transform Outputs to Policies\n\t\t\tlet offset = 0;\n\n\t\t\tfor (let c = 0, cl = controls_map.length; c < cl; c++) {\n\n\t\t\t\tlet control = controls[c];\n\t\t\t\tlet length  = controls_map[c];\n\t\t\t\tlet values  = [].slice.call(outputs, offset, length);\n\n\t\t\t\tif (values.length > 0) {\n\t\t\t\t\tcontrol.control(values);\n\t\t\t\t}\n\n\t\t\t\toffset += length;\n\n\t\t\t}\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tlearn: function(inputs, outputs) {\n\n\t\t\tinputs  = inputs instanceof Array  ? inputs  : null;\n\t\t\toutputs = outputs instanceof Array ? outputs : null;\n\n\n\t\t\tif (inputs !== null && outputs !== null) {\n\n\t\t\t\tlet layers = this.__layers;\n\n\n\t\t\t\t// 1. Update Network\n\t\t\t\t_update_network.call(this, inputs, this._outputs);\n\n\n\t\t\t\t// 2. Calculate gradient for Output Layer\n\t\t\t\tlet output_layer = layers[layers.length - 1];\n\n\t\t\t\tfor (let o = 0, ol = output_layer.length; o < ol; o++) {\n\n\t\t\t\t\tlet neuron = output_layer[o];\n\t\t\t\t\tlet value  = neuron.value;\n\n\t\t\t\t\tneuron.delta = value * (1 - value) * (outputs[o] - value);\n\n\t\t\t\t}\n\n\n\t\t\t\t// 3. Calculate gradients for Hidden Layers and Input Layer\n\t\t\t\tfor (let l = layers.length - 2; l >= 0; l--) {\n\n\t\t\t\t\tlet current_layer = layers[l];\n\t\t\t\t\tlet next_layer    = layers[l + 1];\n\n\t\t\t\t\tfor (let c = 0, cl = current_layer.length; c < cl; c++) {\n\n\t\t\t\t\t\tlet neuron = current_layer[c];\n\t\t\t\t\t\tlet value  = neuron.value;\n\t\t\t\t\t\tlet error  = 0.0;\n\n\t\t\t\t\t\tfor (let n = 0, nl = next_layer.length; n < nl; n++) {\n\t\t\t\t\t\t\tlet next_neuron = next_layer[n];\n\t\t\t\t\t\t\terror += next_neuron.weights[c] * next_neuron.delta;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tneuron.delta = value * (1 - value) * error;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t// 4. Calculate weights for Input Layer\n\t\t\t\tlet input_layer = layers[0];\n\n\t\t\t\tfor (let i = 0, il = input_layer.length; i < il; i++) {\n\n\t\t\t\t\tlet neuron = input_layer[i];\n\n\t\t\t\t\tneuron.bias += _LEARNING_RATE * neuron.delta;\n\n\n\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\tlet delta = _LEARNING_RATE * neuron.delta * inputs[w];\n\t\t\t\t\t\tneuron.weights[w] += delta + _LEARNING_MOMENTUM * neuron.history[w];\n\t\t\t\t\t\tneuron.history[w]  = delta;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t// 5. Calculate weights for Hidden Layers and Output Layer\n\t\t\t\tfor (let l = 1, ll = layers.length; l < ll; l++) {\n\n\t\t\t\t\tlet current_layer = layers[l];\n\t\t\t\t\tlet prev_layer    = layers[l - 1];\n\n\t\t\t\t\tfor (let c = 0, cl = current_layer.length; c < cl; c++) {\n\n\t\t\t\t\t\tlet neuron = current_layer[c];\n\n\t\t\t\t\t\tneuron.bias += _LEARNING_RATE * neuron.delta;\n\n\n\t\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\t\tlet delta = _LEARNING_RATE * neuron.delta * prev_layer[w].value;\n\t\t\t\t\t\t\tneuron.weights[w] += delta + _LEARNING_MOMENTUM * neuron.history[w];\n\t\t\t\t\t\t\tneuron.history[w]  = delta;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetControls: function(controls) {\n\n\t\t\tcontrols = controls instanceof Array ? controls : null;\n\n\n\t\t\tif (controls !== null) {\n\n\t\t\t\tthis.controls = controls;\n\n\t\t\t\tthis.__controls_map = controls.map(function(control) {\n\t\t\t\t\treturn (control.sensor() || [ 1 ]).length;\n\t\t\t\t});\n\n\n\t\t\t\tlet size = this.__controls_map.reduce(function(a, b) {\n\t\t\t\t\treturn a + b;\n\t\t\t\t}, 0);\n\n\t\t\t\tif (size !== this.__size.output) {\n\t\t\t\t\t_init_network.call(this);\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tsetSensors: function(sensors) {\n\n\t\t\tsensors = sensors instanceof Array ? sensors : null;\n\n\n\t\t\tif (sensors !== null) {\n\n\t\t\t\tthis.sensors = sensors;\n\n\t\t\t\tthis.__sensors_map = sensors.map(function(sensor) {\n\t\t\t\t\treturn (sensor.sensor() || [ 1 ]).length;\n\t\t\t\t});\n\n\n\t\t\t\tlet size = this.__sensors_map.reduce(function(a, b) {\n\t\t\t\t\treturn a + b;\n\t\t\t\t}, 0);\n\n\t\t\t\tif (size !== this.__size.input) {\n\t\t\t\t\t_init_network.call(this);\n\t\t\t\t}\n\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetWeights: function() {\n\n\t\t\tlet layers  = this.__layers;\n\t\t\tlet weights = [];\n\n\n\t\t\tfor (let l = 0, ll = layers.length; l < ll; l++) {\n\n\t\t\t\tlet layer = layers[l];\n\n\t\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\t\tlet neuron = layer[n];\n\t\t\t\t\tif (neuron.weights.length !== 0) {\n\n\t\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\t\tweights.push(neuron.history[w]);\n\t\t\t\t\t\t\tweights.push(neuron.weights[w]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tthis.__size.weight = weights.length;\n\n\n\t\t\treturn weights;\n\n\t\t},\n\n\t\tsetWeights: function(weights) {\n\n\t\t\tweights = weights instanceof Array ? weights : null;\n\n\n\t\t\tif (weights !== null) {\n\n\t\t\t\tlet size = this.__size.weight;\n\t\t\t\tif (size === weights.length) {\n\n\t\t\t\t\tlet count  = 0;\n\t\t\t\t\tlet layers = this.__layers;\n\n\t\t\t\t\tfor (let l = 0, ll = layers.length; l < ll; l++) {\n\n\t\t\t\t\t\tlet layer = layers[l];\n\n\t\t\t\t\t\tfor (let n = 0, nl = layer.length; n < nl; n++) {\n\n\t\t\t\t\t\t\tlet neuron = layer[n];\n\t\t\t\t\t\t\tif (neuron.weights.length !== 0) {\n\n\t\t\t\t\t\t\t\tfor (let w = 0, wl = neuron.weights.length; w < wl; w++) {\n\t\t\t\t\t\t\t\t\tneuron.history[w] = weights[count++];\n\t\t\t\t\t\t\t\t\tneuron.weights[w] = weights[count++];\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.ai.neat.Genome":{"constructor":"lychee.Definition","arguments":["lychee.ai.neat.Genome"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\tconst _MAX_NODES     = 1000000;\n\tconst _MUTATION_RATE = {\n\t\tbias:        0.4,\n\t\tconnections: 0.25,\n\t\tlinks:       2.0,\n\t\tnodes:       0.5,\n\t\tsteps:       0.1,\n\t\t// XXX: WTF?\n\t\tenable:      0.5,\n\t\tdisable:     0.2\n\t};\n\n\tconst _sigmoid = function(x) {\n\t\treturn 2 / (1 + Math.exp(-4.9 * x)) - 1;\n\t};\n\n\tconst _Neuron = function() {\n\n\t\tthis.incoming = [];\n\t\tthis.value    = 0.0;\n\n\t};\n\n\n\tlet Composite = function(data) {\n\n\t\t// this.genes   = [];\n\t\tthis.fitness = 0;\n\t\tthis.adjustFitness = 0;\n\t\t// this.network = {};\n\t\t// this.maxneuron = 0;\n\t\tthis.globalRank = 0;\n\n\n\t};\n\n\n\tComposite.prototype = {\n\n\t\tcopyGenome: function() {\n\n\t\t\tlet clone = new Composite();\n\n\t\t\tclone.genes     = this.genes.map(gene => gene.copyGene());\n\t\t\tclone.maxneuron = this.maxneuron;\n\n\n\t\t\treturn clone;\n\n\t\t},\n\n\t\trandomNeuron: function(nonInput, inputs, outputs) {\n\n\t\t\tlet neurons = [];\n\n\t\t\tif (nonInput === false) {\n\n\t\t\t\tinputs.forEach(function(input, i) {\n\t\t\t\t\tneurons.push(i);\n\t\t\t\t});\n\n\t\t\t\tthis.genes.forEach(gene => {\n\n\t\t\t\t\tif (neurons.indexOf(gene.into) === -1) {\n\t\t\t\t\t\tneurons.push(gene.into);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (neurons.indexOf(gene.out) === -1) {\n\t\t\t\t\t\tneurons.push(gene.out);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t} else {\n\n\t\t\t\tthis.genes.forEach(gene => {\n\n\t\t\t\t\tif (neurons.indexOf(gene.into) === -1 && gene.into > inputs.length) {\n\t\t\t\t\t\tneurons.push(gene.into);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (neurons.indexOf(gene.out) === -1 && gene.out > inputs.length) {\n\t\t\t\t\t\tneurons.push(gene.out);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\toutputs.forEach(function(output, o) {\n\t\t\t\tneurons.push(_MAX_NODES + o);\n\t\t\t});\n\n\n\t\t\tlet neuron = neurons[(Math.random() * neurons.length) | 0] || null;\n\t\t\tif (neuron === null) {\n\t\t\t\treturn neurons[0];\n\t\t\t}\n\n\t\t\treturn neuron;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.protocol.WS":{"constructor":"lychee.Definition","arguments":["lychee.net.protocol.WS"],"blob":{"attaches":{},"requires":["lychee.codec.JSON"],"exports":"function (lychee, global, attachments) {\n\n\tconst _JSON = lychee.import('lychee.codec.JSON');\n\n\n\n\t/*\n\t * HELPERS\n\t */\n\n\t/*\n\t * WebSocket Framing Protocol\n\t *\n\t *  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n\t * +-+-+-+-+-------+-+-------------+-------------------------------+\n\t * |F|R|R|R| opcode|M| Payload len |    Extended payload length    |\n\t * |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |\n\t * |N|V|V|V|       |S|             |   (if payload len==126/127)   |\n\t * | |1|2|3|       |K|             |                               |\n\t * +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +\n\t * |     Extended payload length continued, if payload len == 127  |\n\t * + - - - - - - - - - - - - - - - +-------------------------------+\n\t * |                               |Masking-key, if MASK set to 1  |\n\t * +-------------------------------+-------------------------------+\n\t * | Masking-key (continued)       |          Payload Data         |\n\t * +-------------------------------- - - - - - - - - - - - - - - - +\n\t * :                     Payload Data continued ...                :\n\t * + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +\n\t * |                     Payload Data continued ...                |\n\t * +---------------------------------------------------------------+\n\t *\n\t */\n\n\tconst _on_ping_frame = function() {\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.remote) {\n\n\t\t\tlet buffer = new Buffer(2);\n\n\t\t\t// FIN, Pong\n\t\t\t// Unmasked, 0 payload\n\n\t\t\tbuffer[0] = 128 + 0x0a;\n\t\t\tbuffer[1] =   0 + 0x00;\n\n\n\t\t\treturn buffer;\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _on_pong_frame = function() {\n\n\t\tlet type = this.type;\n\t\tif (type === Composite.TYPE.client) {\n\n\t\t\tlet buffer = new Buffer(6);\n\n\t\t\t// FIN, Ping\n\t\t\t// Masked, 0 payload\n\n\t\t\tbuffer[0] = 128 + 0x09;\n\t\t\tbuffer[1] = 128 + 0x00;\n\n\t\t\tbuffer[2] = (Math.random() * 0xff) | 0;\n\t\t\tbuffer[3] = (Math.random() * 0xff) | 0;\n\t\t\tbuffer[4] = (Math.random() * 0xff) | 0;\n\t\t\tbuffer[5] = (Math.random() * 0xff) | 0;\n\n\n\t\t\treturn buffer;\n\n\t\t}\n\n\n\t\treturn null;\n\n\t};\n\n\tconst _encode_buffer = function(payload, headers, binary) {\n\n\t\tlet buffer         = null;\n\t\tlet data           = _JSON.encode({\n\t\t\theaders: headers,\n\t\t\tpayload: payload\n\t\t});\n\t\tlet mask           = false;\n\t\tlet mask_data      = null;\n\t\tlet payload_data   = null;\n\t\tlet payload_length = data.length;\n\t\tlet type           = this.type;\n\n\n\t\tif (type === Composite.TYPE.client) {\n\n\t\t\tmask      = true;\n\t\t\tmask_data = new Buffer(4);\n\n\t\t\tmask_data[0] = (Math.random() * 0xff) | 0;\n\t\t\tmask_data[1] = (Math.random() * 0xff) | 0;\n\t\t\tmask_data[2] = (Math.random() * 0xff) | 0;\n\t\t\tmask_data[3] = (Math.random() * 0xff) | 0;\n\n\t\t\tpayload_data = data.map(function(value, index) {\n\t\t\t\treturn value ^ mask_data[index % 4];\n\t\t\t});\n\n\t\t} else {\n\n\t\t\tmask         = false;\n\t\t\tmask_data    = new Buffer(4);\n\t\t\tpayload_data = data.map(function(value) {\n\t\t\t\treturn value;\n\t\t\t});\n\n\t\t}\n\n\n\t\t// 64 Bit Extended Payload Length\n\t\tif (payload_length > 0xffff) {\n\n\t\t\tlet lo = payload_length | 0;\n\t\t\tlet hi = (payload_length - lo) / 4294967296;\n\n\t\t\tbuffer = new Buffer((mask === true ? 14 : 10) + payload_length);\n\n\t\t\tbuffer[0] = 128 + (binary === true ? 0x02 : 0x01);\n\t\t\tbuffer[1] = (mask === true ? 128 : 0) + 127;\n\n\t\t\tbuffer[2] = (hi >> 24) & 0xff;\n\t\t\tbuffer[3] = (hi >> 16) & 0xff;\n\t\t\tbuffer[4] = (hi >>  8) & 0xff;\n\t\t\tbuffer[5] = (hi >>  0) & 0xff;\n\n\t\t\tbuffer[6] = (lo >> 24) & 0xff;\n\t\t\tbuffer[7] = (lo >> 16) & 0xff;\n\t\t\tbuffer[8] = (lo >>  8) & 0xff;\n\t\t\tbuffer[9] = (lo >>  0) & 0xff;\n\n\n\t\t\tif (mask === true) {\n\n\t\t\t\tmask_data.copy(buffer, 10);\n\t\t\t\tpayload_data.copy(buffer, 14);\n\n\t\t\t} else {\n\n\t\t\t\tpayload_data.copy(buffer, 10);\n\n\t\t\t}\n\n\n\t\t// 16 Bit Extended Payload Length\n\t\t} else if (payload_length > 125) {\n\n\t\t\tbuffer = new Buffer((mask === true ? 8 : 4) + payload_length);\n\n\t\t\tbuffer[0] = 128 + (binary === true ? 0x02 : 0x01);\n\t\t\tbuffer[1] = (mask === true ? 128 : 0) + 126;\n\n\t\t\tbuffer[2] = (payload_length >> 8) & 0xff;\n\t\t\tbuffer[3] = (payload_length >> 0) & 0xff;\n\n\n\t\t\tif (mask === true) {\n\n\t\t\t\tmask_data.copy(buffer, 4);\n\t\t\t\tpayload_data.copy(buffer, 8);\n\n\t\t\t} else {\n\n\t\t\t\tpayload_data.copy(buffer, 4);\n\n\t\t\t}\n\n\n\t\t// 7 Bit Payload Length\n\t\t} else {\n\n\t\t\tbuffer = new Buffer((mask === true ? 6 : 2) + payload_length);\n\n\t\t\tbuffer[0] = 128 + (binary === true ? 0x02 : 0x01);\n\t\t\tbuffer[1] = (mask === true ? 128 : 0) + payload_length;\n\n\n\t\t\tif (mask === true) {\n\n\t\t\t\tmask_data.copy(buffer, 2);\n\t\t\t\tpayload_data.copy(buffer, 6);\n\n\t\t\t} else {\n\n\t\t\t\tpayload_data.copy(buffer, 2);\n\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn buffer;\n\n\t};\n\n\tconst _decode_buffer = function(buffer) {\n\n\t\tlet fragment = this.__fragment;\n\t\tlet chunk    = {\n\t\t\tbytes:   -1,\n\t\t\theaders: {},\n\t\t\tpayload: null\n\t\t};\n\n\n\t\tif (buffer.length <= 2) {\n\t\t\treturn chunk;\n\t\t}\n\n\n\t\tlet fin            = (buffer[0] & 128) === 128;\n\t\t// let rsv1        = (buffer[0] & 64) === 64;\n\t\t// let rsv2        = (buffer[0] & 32) === 32;\n\t\t// let rsv3        = (buffer[0] & 16) === 16;\n\t\tlet operator       = buffer[0] & 15;\n\t\tlet mask           = (buffer[1] & 128) === 128;\n\t\tlet mask_data      = new Buffer(4);\n\t\tlet payload_length = buffer[1] & 127;\n\t\tlet payload_data   = null;\n\n\t\tif (payload_length <= 125) {\n\n\t\t\tif (mask === true) {\n\t\t\t\tmask_data    = buffer.slice(2, 6);\n\t\t\t\tpayload_data = buffer.slice(6, 6 + payload_length);\n\t\t\t\tchunk.bytes  = 6 + payload_length;\n\t\t\t} else {\n\t\t\t\tmask_data    = null;\n\t\t\t\tpayload_data = buffer.slice(2, 2 + payload_length);\n\t\t\t\tchunk.bytes  = 2 + payload_length;\n\t\t\t}\n\n\t\t} else if (payload_length === 126) {\n\n\t\t\tpayload_length = (buffer[2] << 8) + buffer[3];\n\n\t\t\tif (mask === true) {\n\t\t\t\tmask_data    = buffer.slice(4, 8);\n\t\t\t\tpayload_data = buffer.slice(8, 8 + payload_length);\n\t\t\t\tchunk.bytes  = 8 + payload_length;\n\t\t\t} else {\n\t\t\t\tmask_data    = null;\n\t\t\t\tpayload_data = buffer.slice(4, 4 + payload_length);\n\t\t\t\tchunk.bytes  = 4 + payload_length;\n\t\t\t}\n\n\t\t} else if (payload_length === 127) {\n\n\t\t\tlet hi = (buffer[2] << 24) + (buffer[3] << 16) + (buffer[4] << 8) + buffer[5];\n\t\t\tlet lo = (buffer[6] << 24) + (buffer[7] << 16) + (buffer[8] << 8) + buffer[9];\n\n\t\t\tpayload_length = (hi * 4294967296) + lo;\n\n\t\t\tif (mask === true) {\n\t\t\t\tmask_data    = buffer.slice(10, 14);\n\t\t\t\tpayload_data = buffer.slice(14, 14 + payload_length);\n\t\t\t\tchunk.bytes  = 14 + payload_length;\n\t\t\t} else {\n\t\t\t\tmask_data    = null;\n\t\t\t\tpayload_data = buffer.slice(10, 10 + payload_length);\n\t\t\t\tchunk.bytes  = 10 + payload_length;\n\t\t\t}\n\n\t\t}\n\n\n\t\tif (mask_data !== null) {\n\n\t\t\tpayload_data = payload_data.map(function(value, index) {\n\t\t\t\treturn value ^ mask_data[index % 4];\n\t\t\t});\n\n\t\t}\n\n\n\t\t// 0: Continuation Frame (Fragmentation)\n\t\tif (operator === 0x00) {\n\n\t\t\tif (fin === true) {\n\n\t\t\t\tlet tmp0 = _JSON.decode(fragment.payload);\n\t\t\t\tif (tmp0 !== null) {\n\t\t\t\t\tchunk.headers = tmp0.headers || {};\n\t\t\t\t\tchunk.payload = tmp0.payload || null;\n\t\t\t\t}\n\n\t\t\t\tfragment.operator = 0x00;\n\t\t\t\tfragment.payload  = new Buffer(0);\n\n\t\t\t} else if (payload_data !== null) {\n\n\t\t\t\tlet payload = new Buffer(fragment.payload.length + payload_length);\n\n\t\t\t\tfragment.payload.copy(payload, 0);\n\t\t\t\tpayload_data.copy(payload, fragment.payload.length);\n\n\t\t\t\tfragment.payload = payload;\n\n\t\t\t}\n\n\n\t\t// 1: Text Frame\n\t\t} else if (operator === 0x01) {\n\n\t\t\tif (fin === true) {\n\n\t\t\t\tlet tmp1 = _JSON.decode(payload_data);\n\t\t\t\tif (tmp1 !== null) {\n\t\t\t\t\tchunk.headers = tmp1.headers || {};\n\t\t\t\t\tchunk.payload = tmp1.payload || null;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfragment.operator = operator;\n\t\t\t\tfragment.payload  = payload_data;\n\n\t\t\t}\n\n\n\t\t// 2: Binary Frame\n\t\t} else if (operator === 0x02) {\n\n\t\t\tif (fin === true) {\n\n\t\t\t\tlet tmp2 = _JSON.decode(payload_data);\n\t\t\t\tif (tmp2 !== null) {\n\t\t\t\t\tchunk.headers = tmp2.headers || {};\n\t\t\t\t\tchunk.payload = tmp2.payload || null;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfragment.operator = operator;\n\t\t\t\tfragment.payload  = payload_data;\n\n\t\t\t}\n\n\n\t\t// 8: Connection Close\n\t\t} else if (operator === 0x08) {\n\n\t\t\tchunk.payload = this.close(Composite.STATUS.normal_closure);\n\n\n\t\t// 9: Ping Frame\n\t\t} else if (operator === 0x09) {\n\n\t\t\tchunk.payload = _on_ping_frame.call(this);\n\n\n\t\t// 10: Pong Frame\n\t\t} else if (operator === 0x0a) {\n\n\t\t\tchunk.payload = _on_pong_frame.call(this);\n\n\n\t\t// 3-7: Reserved Non-Control Frames, 11-15: Reserved Control Frames\n\t\t} else {\n\n\t\t\tchunk.payload = this.close(Composite.STATUS.protocol_error);\n\n\t\t}\n\n\n\t\treturn chunk;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(type) {\n\n\t\tthis.type = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\t\tthis.__buffer   = new Buffer(0);\n\t\tthis.__fragment = { operator: 0x00, payload: new Buffer(0) };\n\t\tthis.__isClosed = false;\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tif (this.type === null) {\n\t\t\t\tconsole.error('lychee.net.protocol.WS: Invalid (lychee.net.protocol.WS.TYPE) type.');\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\t// Composite.FRAMESIZE = 32768; // 32kB\n\tComposite.FRAMESIZE = 0x800000; // 8MiB\n\n\n\tComposite.STATUS = {\n\n\t\t// IESG_HYBI\n\t\tnormal_closure:  1000,\n\t\tprotocol_error:  1002,\n\t\tmessage_too_big: 1009\n\n\t\t// IESG_HYBI\n\t\t// going_away:         1001,\n\t\t// unsupported_data:   1003,\n\t\t// no_status_received: 1005,\n\t\t// abnormal_closure:   1006,\n\t\t// invalid_payload:    1007,\n\t\t// policy_violation:   1008,\n\t\t// missing_extension:  1010,\n\t\t// internal_error:     1011,\n\n\t\t// IESG_HYBI Current\n\t\t// service_restart:    1012,\n\t\t// service_overload:   1013,\n\n\t\t// IESG_HYBI\n\t\t// tls_handshake:      1015\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\t// 'default': 0, (deactivated)\n\t\t'client': 1,\n\t\t'remote': 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.net.protocol.WS',\n\t\t\t\t'arguments':   [ this.type ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * PROTOCOL API\n\t\t */\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : null;\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tif (this.__isClosed === false) {\n\t\t\t\t\treturn _encode_buffer.call(this, payload, headers, binary);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\treceive: function(blob) {\n\n\t\t\tblob = blob instanceof Buffer ? blob : null;\n\n\n\t\t\tlet chunks = [];\n\n\n\t\t\tif (blob !== null) {\n\n\t\t\t\tif (blob.length > Composite.FRAMESIZE) {\n\n\t\t\t\t\tchunks.push({\n\t\t\t\t\t\tpayload: this.close(Composite.STATUS.message_too_big)\n\t\t\t\t\t});\n\n\t\t\t\t} else if (this.__isClosed === false) {\n\n\t\t\t\t\tlet buf = this.__buffer;\n\t\t\t\t\tlet tmp = new Buffer(buf.length + blob.length);\n\n\n\t\t\t\t\tbuf.copy(tmp);\n\t\t\t\t\tblob.copy(tmp, buf.length);\n\t\t\t\t\tbuf = tmp;\n\n\n\t\t\t\t\tlet chunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\twhile (chunk.bytes !== -1) {\n\n\t\t\t\t\t\tif (chunk.payload !== null) {\n\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\ttmp = new Buffer(buf.length - chunk.bytes);\n\t\t\t\t\t\tbuf.copy(tmp, 0, chunk.bytes);\n\t\t\t\t\t\tbuf = tmp;\n\n\t\t\t\t\t\tchunk = null;\n\t\t\t\t\t\tchunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tthis.__buffer = buf;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn chunks;\n\n\t\t},\n\n\t\tclose: function(status) {\n\n\t\t\tstatus = typeof status === 'number' ? status : Composite.STATUS.normal_closure;\n\n\n\t\t\tif (this.__isClosed === false) {\n\n\t\t\t\tlet buffer = new Buffer(4);\n\n\t\t\t\tbuffer[0]  = 128 + 0x08;\n\t\t\t\tbuffer[1]  =   0 + 0x02;\n\n\t\t\t\tbuffer.write(String.fromCharCode((status >> 8) & 0xff) + String.fromCharCode((status >> 0) & 0xff), 2, 'binary');\n\n\t\t\t\tthis.__isClosed = true;\n\n\n\t\t\t\treturn buffer;\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * CUSTOM API\n\t\t */\n\n\t\tping: function() {\n\n\t\t\tlet buffer = _on_pong_frame.call(this);\n\t\t\tif (buffer !== null) {\n\t\t\t\treturn buffer;\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}},"lychee.net.protocol.HTTP":{"constructor":"lychee.Definition","arguments":["lychee.net.protocol.HTTP"],"blob":{"attaches":{},"exports":"function (lychee, global, attachments) {\n\n\t/*\n\t * HELPERS\n\t */\n\n\tconst _uppercase = function(str) {\n\n\t\tlet tmp = str.split('-');\n\n\t\tfor (let t = 0, tl = tmp.length; t < tl; t++) {\n\t\t\tlet ch = tmp[t];\n\t\t\ttmp[t] = ch.charAt(0).toUpperCase() + ch.substr(1);\n\t\t}\n\n\t\treturn tmp.join('-');\n\n\t};\n\n\tconst _encode_buffer = function(payload, headers, binary) {\n\n\t\tlet type           = this.type;\n\t\tlet buffer         = null;\n\n\t\tlet headers_data   = null;\n\t\tlet headers_length = 0;\n\t\tlet payload_data   = payload;\n\t\tlet payload_length = payload.length;\n\n\n\t\tif (type === Composite.TYPE.client) {\n\n\t\t\tlet url            = headers['url']             || null;\n\t\t\tlet method         = headers['method']          || null;\n\t\t\tlet service_id     = headers['@service-id']     || null;\n\t\t\tlet service_event  = headers['@service-event']  || null;\n\t\t\tlet service_method = headers['@service-method'] || null;\n\n\n\t\t\tif (service_id !== null) {\n\n\t\t\t\tif (service_method !== null) {\n\n\t\t\t\t\tmethod = 'GET';\n\t\t\t\t\turl    = '/api/' + service_id + '/' + service_method;\n\n\t\t\t\t} else if (service_event !== null) {\n\n\t\t\t\t\tmethod = 'POST';\n\t\t\t\t\turl    = '/api/' + service_id + '/' + service_event;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (url !== null && method !== null) {\n\t\t\t\theaders_data = method + ' ' + url + ' HTTP/1.1\\r\\n';\n\t\t\t} else {\n\t\t\t\theaders_data = 'GET * HTTP/1.1\\r\\n';\n\t\t\t}\n\n\n\t\t\theaders_data += 'Connection: keep-alive\\r\\n';\n\t\t\theaders_data += 'Content-Length: ' + payload_length + '\\r\\n';\n\n\t\t\tfor (let key in headers) {\n\n\t\t\t\tif (key.charAt(0) === '@') {\n\t\t\t\t\theaders_data += '' + _uppercase('x-' + key.substr(1)) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t} else if (/url|method/g.test(key) === false) {\n\t\t\t\t\theaders_data += '' + _uppercase(key) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\theaders_data  += '\\r\\n';\n\t\t\theaders_length = headers_data.length;\n\n\t\t} else {\n\n\t\t\tlet status  = headers['status'] || Composite.STATUS.normal_okay;\n\t\t\tlet exposed = [ 'Content-Type' ];\n\n\n\t\t\theaders_data  = 'HTTP/1.1 ' + status + '\\r\\n';\n\t\t\theaders_data += 'Connection: keep-alive\\r\\n';\n\t\t\theaders_data += 'Content-Length: ' + payload_length + '\\r\\n';\n\n\t\t\tfor (let key in headers) {\n\n\t\t\t\tif (key.charAt(0) === '@') {\n\t\t\t\t\theaders_data += '' + _uppercase('x-' + key.substr(1)) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t\texposed.push(_uppercase('x-' + key.substr(1)));\n\t\t\t\t} else if (/status/g.test(key) === false) {\n\t\t\t\t\theaders_data += '' + _uppercase(key) + ': ' + headers[key] + '\\r\\n';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\theaders_data  += 'Access-Control-Expose-Headers: ' + exposed.join(', ') + '\\r\\n';\n\t\t\theaders_data  += '\\r\\n';\n\t\t\theaders_length = headers_data.length;\n\n\t\t}\n\n\n\t\tlet content_type = headers['content-type'] || 'text/plain';\n\t\tif (/text\\//g.test(content_type) === true) {\n\n\t\t\tbuffer = new Buffer(headers_length + payload_length + 2);\n\t\t\tbuffer.write(headers_data, 0, headers_length, 'utf8');\n\t\t\tpayload_data.copy(buffer, headers_length, 0, payload_length);\n\t\t\tbuffer.write('\\r\\n', headers_length + payload_length, 2, 'utf8');\n\n\t\t} else {\n\n\t\t\tbuffer = new Buffer(headers_length + payload_length + 2);\n\t\t\tbuffer.write(headers_data, 0, headers_length, 'utf8');\n\t\t\tpayload_data.copy(buffer, headers_length, 0, payload_length);\n\t\t\tbuffer.write('\\r\\n', headers_length + payload_length, 2, 'utf8');\n\n\t\t}\n\n\n\t\treturn buffer;\n\n\t};\n\n\tconst _decode_buffer = function(buffer) {\n\n\t\tbuffer = buffer.toString('utf8');\n\n\n\t\tlet chunk = {\n\t\t\tbytes:   -1,\n\t\t\theaders: {},\n\t\t\tpayload: null\n\t\t};\n\n\n\t\tif (buffer.indexOf('\\r\\n\\r\\n') === -1) {\n\t\t\treturn chunk;\n\t\t}\n\n\n\t\tlet headers_length = buffer.indexOf('\\r\\n\\r\\n');\n\t\tlet headers_data   = buffer.substr(0, headers_length);\n\t\tlet payload_data   = buffer.substr(headers_length + 4);\n\n\t\tlet i_end = payload_data.indexOf('\\r\\n\\r\\n');\n\t\tif (i_end !== -1) {\n\t\t\tpayload_data = payload_data.substr(0, i_end);\n\t\t}\n\n\n\t\theaders_data.split('\\r\\n').forEach(function(line) {\n\n\t\t\tlet tmp = line.trim();\n\t\t\tif (/^(OPTIONS|GET|POST)/g.test(tmp) === true) {\n\n\t\t\t\tlet tmp2   = tmp.split(' ');\n\t\t\t\tlet method = (tmp2[0] || '').trim() || null;\n\t\t\t\tlet url    = (tmp2[1] || '').trim() || null;\n\n\t\t\t\tif (method !== null && url !== null) {\n\n\t\t\t\t\tchunk.headers['method'] = method;\n\t\t\t\t\tchunk.headers['url']    = url;\n\n\t\t\t\t}\n\n\n\t\t\t\tif (url.substr(0, 5) === '/api/') {\n\n\t\t\t\t\tlet tmp3 = [];\n\n\t\t\t\t\tif (url.indexOf('?') !== -1) {\n\t\t\t\t\t\ttmp3 = url.split('?')[0].split('/');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttmp3 = url.split('/');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (tmp3.length === 4) {\n\n\t\t\t\t\t\tif (method === 'GET') {\n\n\t\t\t\t\t\t\tchunk.headers['@service-id']     = tmp3[2];\n\t\t\t\t\t\t\tchunk.headers['@service-method'] = tmp3[3];\n\n\t\t\t\t\t\t} else if (method === 'POST') {\n\n\t\t\t\t\t\t\tchunk.headers['@service-id']    = tmp3[2];\n\t\t\t\t\t\t\tchunk.headers['@service-event'] = tmp3[3];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if (tmp.substr(0, 4) === 'HTTP') {\n\n\t\t\t\tif (/[0-9]{3}/g.test(tmp) === true) {\n\t\t\t\t\tchunk.headers['status'] = tmp.split(' ')[1];\n\t\t\t\t}\n\n\t\t\t} else if (/^[0-9]{3}/g.test(tmp) === true) {\n\n\t\t\t\tchunk.headers['status'] = tmp.split(' ')[0];\n\n\t\t\t} else if (/:/g.test(tmp)) {\n\n\t\t\t\tlet i_tmp = tmp.indexOf(':');\n\t\t\t\tlet key   = tmp.substr(0, i_tmp).trim().toLowerCase();\n\t\t\t\tlet val   = tmp.substr(i_tmp + 1).trim().toLowerCase();\n\n\t\t\t\tif (key === 'host') {\n\n\t\t\t\t\tif (/^\\[([a-f0-9\\:]+)\\](.*)$/g.test(val) === true) {\n\t\t\t\t\t\tchunk.headers[key] = val.split(/^\\[([a-f0-9\\:]+)\\](.*)$/g)[1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchunk.headers[key] = val;\n\t\t\t\t\t}\n\n\t\t\t\t} else if (/origin|connection|upgrade|content-type|content-length|accept-encoding|accept-language|e-tag/g.test(key) === true) {\n\n\t\t\t\t\tchunk.headers[key] = val;\n\n\t\t\t\t} else if (/expires|if-modified-since|last-modified/g.test(key) === true) {\n\n\t\t\t\t\tval = tmp.split(':').slice(1).join(':').trim();\n\t\t\t\t\tchunk.headers[key] = val;\n\n\t\t\t\t} else if (/access-control/g.test(key) === true) {\n\n\t\t\t\t\tchunk.headers[key] = val;\n\n\t\t\t\t} else if (key.substr(0, 2) === 'x-') {\n\n\t\t\t\t\tchunk.headers['@' + key.substr(2)] = val;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\n\t\tlet check = chunk.headers['method'] || null;\n\t\tif (check === 'GET') {\n\n\t\t\tlet tmp4 = chunk.headers['url'] || '';\n\t\t\tif (tmp4.indexOf('?') !== -1) {\n\n\t\t\t\tlet tmp5 = tmp4.split('?')[1].split('&');\n\t\t\t\tlet tmp6 = {};\n\n\t\t\t\ttmp5.forEach(function(str) {\n\n\t\t\t\t\tlet key = str.split('=')[0] || '';\n\t\t\t\t\tlet val = str.split('=')[1] || '';\n\n\t\t\t\t\tif (key !== '' && val !== '') {\n\t\t\t\t\t\ttmp6[key] = val;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\n\t\t\t\tchunk.bytes   = headers_data.length + payload_data.length + 4;\n\t\t\t\tchunk.payload = new Buffer(JSON.stringify(tmp6), 'utf8');\n\n\t\t\t} else {\n\n\t\t\t\tchunk.bytes   = headers_data.length + payload_data.length + 4;\n\t\t\t\tchunk.payload = new Buffer('', 'utf8');\n\n\t\t\t}\n\n\t\t} else if (check === 'OPTIONS') {\n\n\t\t\tchunk.bytes   = headers_data.length + payload_data.length + 4;\n\t\t\tchunk.payload = new Buffer('', 'utf8');\n\n\t\t} else if (check === 'POST') {\n\n\t\t\tchunk.bytes   = headers_data.length + payload_data.length + 4;\n\t\t\tchunk.payload = new Buffer(payload_data, 'utf8');\n\n\t\t} else {\n\n\t\t\tlet status = chunk.headers['status'] || null;\n\t\t\tif (status !== null) {\n\t\t\t\tchunk.bytes   = buffer.length;\n\t\t\t\tchunk.payload = new Buffer(payload_data, 'utf8');\n\t\t\t} else {\n\t\t\t\tchunk.bytes   = buffer.length;\n\t\t\t\tchunk.headers = null;\n\t\t\t\tchunk.payload = null;\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn chunk;\n\n\t};\n\n\n\n\t/*\n\t * IMPLEMENTATION\n\t */\n\n\tlet Composite = function(type) {\n\n\t\tthis.type = lychee.enumof(Composite.TYPE, type) ? type : null;\n\n\t\tthis.__buffer   = new Buffer(0);\n\t\tthis.__isClosed = false;\n\n\n\t\tif (lychee.debug === true) {\n\n\t\t\tif (this.type === null) {\n\t\t\t\tconsole.error('lychee.net.protocol.HTTP: Invalid (lychee.net.protocol.HTTP.TYPE) type.');\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\n\t// Composite.FRAMESIZE = 32768; // 32kB\n\tComposite.FRAMESIZE = 0x800000; // 8MiB\n\n\n\tComposite.STATUS = {\n\n\t\t// RFC7231\n\t\tnormal_continue: '100 Continue',\n\t\tnormal_okay:     '200 OK',\n\t\tprotocol_error:  '400 Bad Request',\n\t\tmessage_too_big: '413 Payload Too Large',\n\t\tnot_found:       '404 Not Found',\n\t\tnot_allowed:     '405 Method Not Allowed',\n\t\tnot_implemented: '501 Not Implemented',\n\t\tbad_gateway:     '502 Bad Gateway',\n\n\t\t// RFC7233\n\t\tnormal_closure:  '204 No Content',\n\t\tnormal_partial:  '206 Partial Content'\n\n\t};\n\n\n\tComposite.TYPE = {\n\t\t// 'default': 0, (deactivated)\n\t\t'client': 1,\n\t\t'remote': 2\n\t};\n\n\n\tComposite.prototype = {\n\n\t\t/*\n\t\t * ENTITY API\n\t\t */\n\n\t\t// deserialize: function(blob) {},\n\n\t\tserialize: function() {\n\n\t\t\treturn {\n\t\t\t\t'constructor': 'lychee.net.protocol.HTTP',\n\t\t\t\t'arguments':   [ this.type ],\n\t\t\t\t'blob':        null\n\t\t\t};\n\n\t\t},\n\n\n\n\t\t/*\n\t\t * PROTOCOL API\n\t\t */\n\n\t\tsend: function(payload, headers, binary) {\n\n\t\t\tpayload = payload instanceof Buffer ? payload : null;\n\t\t\theaders = headers instanceof Object ? headers : null;\n\t\t\tbinary  = binary === true;\n\n\n\t\t\tif (payload !== null) {\n\n\t\t\t\tif (this.__isClosed === false) {\n\t\t\t\t\treturn _encode_buffer.call(this, payload, headers, binary);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t},\n\n\t\treceive: function(blob) {\n\n\t\t\tblob = blob instanceof Buffer ? blob : null;\n\n\n\t\t\tlet chunks = [];\n\n\n\t\t\tif (blob !== null) {\n\n\t\t\t\tif (blob.length > Composite.FRAMESIZE) {\n\n\t\t\t\t\tchunks.push(this.close(Composite.STATUS.message_too_big));\n\n\t\t\t\t} else if (this.__isClosed === false) {\n\n\t\t\t\t\tlet buf = this.__buffer;\n\t\t\t\t\tlet tmp = new Buffer(buf.length + blob.length);\n\n\n\t\t\t\t\tbuf.copy(tmp);\n\t\t\t\t\tblob.copy(tmp, buf.length);\n\t\t\t\t\tbuf = tmp;\n\n\n\t\t\t\t\tlet chunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\twhile (chunk.bytes !== -1) {\n\n\t\t\t\t\t\tif (chunk.payload !== null) {\n\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\ttmp = new Buffer(buf.length - chunk.bytes);\n\t\t\t\t\t\tbuf.copy(tmp, 0, chunk.bytes);\n\t\t\t\t\t\tbuf = tmp;\n\n\t\t\t\t\t\tchunk = null;\n\t\t\t\t\t\tchunk = _decode_buffer.call(this, buf);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tthis.__buffer = buf;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\treturn chunks;\n\n\t\t},\n\n\t\tclose: function(status) {\n\n\t\t\tstatus = typeof status === 'number' ? status : Composite.STATUS.no_content;\n\n\n\t\t\tif (this.__isClosed === false) {\n\n// TODO: Close method should create a close status buffer\n\t\t\t\t// let buffer = new Buffer(4);\n\n\t\t\t\t// buffer[0]  = 128 + 0x08;\n\t\t\t\t// buffer[1]  =   0 + 0x02;\n\n\t\t\t\t// buffer.write(String.fromCharCode((status >> 8) & 0xff) + String.fromCharCode((status >> 0) & 0xff), 2, 'binary');\n\n\t\t\t\t// this.__isClosed = true;\n\n\n\t\t\t\t// return buffer;\n\n\t\t\t}\n\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\n\treturn Composite;\n\n}"}}},"features":{"setInterval":"function"}}});
	if (environment !== null) {
		lychee.envinit(environment, {});
	}

})(lychee, typeof global !== 'undefined' ? global : this);
</script>
</body>
</html>
